try{Object.defineProperty(Error.prototype,"message",{enumerable:!0})}catch(e){}var IntelliFactory={Runtime:{Class:function(n,t){function i(){}i.prototype=n;for(var r in t)i[r]=t[r];return i},Define:function(n,t){function i(n,t){var u,f,e;for(u in t)if(f=typeof n[u],e=typeof t[u],f=="object"&&e=="object")i(n[u],t[u]);else if(f=="undefined"||r)n[u]=t[u];else throw new Error("Name conflict: "+u);}var r=!!this.overwrite;i(n,t)},DeleteEmptyFields:function(n,t){for(var r,i=0;i<t.length;i++)r=t[i],n[r]===undefined&&delete n[r];return n},Field:function(n){var t,i=!1;return function(){return i||(i=!0,t=n()),t}},GetOptional:function(n){return n===undefined?{$:0}:{$:1,$0:n}},New:function(n,t){var i=new n;for(var r in t)r in i||(i[r]=t[r]);return i},NewObject:function(n){for(var i={},t=0;t<n.length;t++)i[n[t][0]]=n[t][1];return i},OnInit:function(n){"init"in this||(this.init=[]);this.init.push(n)},OnLoad:function(n){"load"in this||(this.load=[]);this.load.push(n)},Inherit:function(n,t){var i,r;if(typeof t=="function"){i=n.prototype;n.prototype=new t;for(r in i)n.prototype[r]=i[r]}},Safe:function(n){return n===undefined?{}:n},SetOptional:function(n,t,i){i.$==0?delete n[t]:n[t]=i.$0},Start:function(){function n(n){for(var t=0;t<n.length;t++)n[t]()}"init"in this&&(n(this.init),this.init=[]);"load"in this&&(n(this.load),this.load=[])},Bind:function(n){return function(){return n.apply(this,arguments)}},CreateFuncWithArgs:function(n){return function(){return n(Array.prototype.slice.call(arguments))}},CreateFuncWithOnlyThis:function(n){return function(){return n(this)}},CreateFuncWithThis:function(n){return function(){return n(this).apply(null,arguments)}},CreateFuncWithThisArgs:function(n){return function(){return n(this)(Array.prototype.slice.call(arguments))}},CreateFuncWithRest:function(n,t){return function(){return t(Array.prototype.slice.call(arguments,0,n).concat([Array.prototype.slice.call(arguments,n)]))}},CreateFuncWithArgsRest:function(n,t){return function(){return t([Array.prototype.slice.call(arguments,0,n),Array.prototype.slice.call(arguments,n)])}},UnionByType:function(n,t,i){for(var u,f=typeof t,r=0;r<n.length;r++)if(u=n[r],typeof u=="number"){if(Array.isArray(t)&&(u==0||t.length==u))return{$:r,$0:t}}else if(u==f)return{$:r,$0:t};if(!i)throw new Error("Type not expected for creating Choice value.");}}};Date.now||(Date.now=function(){return(new Date).getTime()});Math.trunc||(Math.trunc=function(n){return n<0?Math.ceil(n):Math.floor(n)});
var JSON;JSON||(JSON={}),function(){"use strict";function i(n){return n<10?"0"+n:n}function f(n){return o.lastIndex=0,o.test(n)?'"'+n.replace(o,function(n){var t=s[n];return typeof t=="string"?t:"\\u"+("0000"+n.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+n+'"'}function r(i,e){var s,l,h,a,v=n,c,o=e[i];o&&typeof o=="object"&&typeof o.toJSON=="function"&&(o=o.toJSON(i));typeof t=="function"&&(o=t.call(e,i,o));switch(typeof o){case"string":return f(o);case"number":return isFinite(o)?String(o):"null";case"boolean":case"null":return String(o);case"object":if(!o)return"null";if(n+=u,c=[],Object.prototype.toString.apply(o)==="[object Array]"){for(a=o.length,s=0;s<a;s+=1)c[s]=r(s,o)||"null";return h=c.length===0?"[]":n?"[\n"+n+c.join(",\n"+n)+"\n"+v+"]":"["+c.join(",")+"]",n=v,h}if(t&&typeof t=="object")for(a=t.length,s=0;s<a;s+=1)typeof t[s]=="string"&&(l=t[s],h=r(l,o),h&&c.push(f(l)+(n?": ":":")+h));else for(l in o)Object.prototype.hasOwnProperty.call(o,l)&&(h=r(l,o),h&&c.push(f(l)+(n?": ":":")+h));return h=c.length===0?"{}":n?"{\n"+n+c.join(",\n"+n)+"\n"+v+"}":"{"+c.join(",")+"}",n=v,h}}typeof Date.prototype.toJSON!="function"&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+i(this.getUTCMonth()+1)+"-"+i(this.getUTCDate())+"T"+i(this.getUTCHours())+":"+i(this.getUTCMinutes())+":"+i(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()});var e=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,o=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,n,u,s={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},t;typeof JSON.stringify!="function"&&(JSON.stringify=function(i,f,e){var o;if(n="",u="",typeof e=="number")for(o=0;o<e;o+=1)u+=" ";else typeof e=="string"&&(u=e);if(t=f,f&&typeof f!="function"&&(typeof f!="object"||typeof f.length!="number"))throw new Error("JSON.stringify");return r("",{"":i})});typeof JSON.parse!="function"&&(JSON.parse=function(n,t){function r(n,i){var f,e,u=n[i];if(u&&typeof u=="object")for(f in u)Object.prototype.hasOwnProperty.call(u,f)&&(e=r(u,f),e!==undefined?u[f]=e:delete u[f]);return t.call(n,i,u)}var i;if(n=String(n),e.lastIndex=0,e.test(n)&&(n=n.replace(e,function(n){return"\\u"+("0000"+n.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(n.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return i=eval("("+n+")"),typeof t=="function"?r({"":i},""):i;throw new SyntaxError("JSON.parse");})}();
(function(){var $$=this,$=this.IntelliFactory.Runtime,a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,_0;$.Define($$,{Arrays:{contains:function(_1,_2){var _3,_4,_5;_3=true;_4=0;_5=_2.length;while(_3?_4<_5:false){a.Equals(_2[_4],_1)?_3=false:_4=_4+1;}return!_3;},mapFold:function(_6,_7,_8){var _9,_,ba,bb,bc,bd;_9=b(_8.length);_=_7;for(ba=0;ba<=_8.length-1;ba++){bb=(_6(_))(c.get(_8,ba));bc=bb[1];bd=bb[0];c.set(_9,ba,bd);_=bc;}return[_9,_];},mapFoldBack:function(bd,be,bf){var bg,bh,bi,bj,bk,bl,bm,bn;bg=b(be.length);bh=bf;bi=be.length;for(bj=1;bj<=bi;bj++){bk=bi-bj;bl=(bd(c.get(be,bk)))(bh);bm=bl[1];bn=bl[0];c.set(bg,bk,bn);bh=bm;}return[bg,bh];},sortInPlaceByDescending:function(bo,bp){return bp.sort(function(bq,br){return-d.Compare(bo(bq),bo(br));});},splitInto:function(bs,bt){var bu,bv,bw,bx,by,bz,bA,bB;bs<=0?d.FailWith("Count must be positive"):null;bu=c.length(bt);if(bu===0){bv=[];}else{bw=d.Min(bs,bu);bx=b(bw);by=bu/bw>>0;bz=0;for(bA=0;bA<=bu%bw-1;bA++){c.set(bx,bA,c.sub(bt,bz,by+1));bz=bz+by+1;}for(bB=bu%bw;bB<=bw-1;bB++){c.set(bx,bB,c.sub(bt,bz,by));bz=bz+by;}bv=bx;}return bv;},tryFindBack:function(bC,bD){var bE,bF;bE={$:0};bF=bD.length-1;while(bF>0?bE.$==0:false){bC(c.get(bD,bF))?bE={$:1,$0:c.get(bD,bF)}:null;bF=bF-1;}return bE;},tryFindIndexBack:function(bG,bH){var bI,bJ;bI={$:0};bJ=bH.length-1;while(bJ>0?bI.$==0:false){bG(c.get(bH,bJ))?bI={$:1,$0:bJ}:null;bJ=bJ-1;}return bI;}},List:{map3:function(bK,bL,bM,bN){var bO;bO=c.map2(function(bP){return function(bQ){return bP(bQ);};},c.map2(bK,c.ofSeq(bL),c.ofSeq(bM)),c.ofSeq(bN));return e.ofArray(bO);},skip:function(bR,bS){var bT,bU,bV,bW;bT=bS;for(bU=1;bU<=bR;bU++){if(bT.$==0){bV=d.FailWith("Input list too short.");}else{bW=bT.$1;bV=bT=bW;}}return bT;},skipWhile:function(bX,bY){var bZ;bZ=bY;while(!(bZ.$==0)?bX(e.head(bZ)):false){bZ=e.tail(bZ);}return bZ;}},Seq:{chunkBySize:function(b0,b1){var b2;b0<=0?d.FailWith("Chunk size must be positive"):null;b2=function(){var b4,b5,b7;b4=f.Get(b1);b5=function(){return b4.Dispose();};b7=function(b8){var b9,b_,b$;if(b4.MoveNext()){b_=[b4.get_Current()];while(c.length(b_)<b0?b4.MoveNext():false){b$=b_.push(b4.get_Current());}b8.c=b_;b9=true;}else{b9=false;}return b9;};return g.New(null,null,b7,b5);};return h.Of(b2);},compareWith:function(ca,cb,cc){var cd,ce,cf,cg,ch,ci,cj;cd=f.Get(cb);try{cf=f.Get(cc);try{ch=0;ci=true;while(ci?ch===0:false){cj=[cd.MoveNext(),cf.MoveNext()];cj[0]?cj[1]?ch=(ca(cd.get_Current()))(cf.get_Current()):ch=1:cj[1]?ch=-1:ci=false;}cg=ch;}finally{cf.Dispose!=undefined?cf.Dispose():null;}ce=cg;}finally{cd.Dispose!=undefined?cd.Dispose():null;}return ce;},contains:function(ck,cl){var cm,cn,co;cm=f.Get(cl);try{co=false;while(!co?cm.MoveNext():false){co=a.Equals(cm.get_Current(),ck);}cn=co;}finally{cm.Dispose!=undefined?cm.Dispose():null;}return cn;},countBy:function(cp,cq){var cr;cr=function(){var ct,cu,cv,cw,cx,cy,cz,cA,cC,cD;ct={};cu=f.Get(cq);try{cw=[];while(cu.MoveNext()){cx=cp(cu.get_Current());cy=a.Hash(cx);if(ct.hasOwnProperty(cy)){cz=void(ct[cy]=ct[cy]+1);}else{cw.push(cx);cz=void(ct[cy]=1);}}cA=function(cB){return[cB,ct[a.Hash(cB)]];};cC=cw.slice(0);cD=c.map(cA,cC);cv=cD;}finally{cu.Dispose!=undefined?cu.Dispose():null;}return cv;};return i.delay(cr);},distinct:function(cE){return j.distinctBy(function(cF){return cF;},cE);},distinctBy:function(cG,cH){var cI;cI=function(){var cK,cL,cM,cU,cW;cK=f.Get(cH);cL=b.prototype.constructor.apply(b,[]);cM=function(cN){var cO,cP,cQ,cR,cS,cT;cO=cG(cN);cP=a.Hash(cO);cQ=cL[cP];if(a.Equals(cQ,undefined)){cL[cP]=[cO];cR=true;}else{if(k.contains(cO,cQ)){cS=false;}else{cT=cQ.push(cO);cS=true;}cR=cS;}return cR;};cU=function(){return cK.Dispose();};cW=function(cX){var cY,cZ,c0,c1;if(cK.MoveNext()){cZ=cK.get_Current();c0=cM(cZ);while(!c0?cK.MoveNext():false){cZ=cK.get_Current();c0=cM(cZ);}if(c0){cX.c=cZ;c1=true;}else{c1=false;}cY=c1;}else{cY=false;}return cY;};return g.New(null,null,cW,cU);};return h.Of(cI);},except:function(c2,c3){var c4;c4=function(){var c6,c7,c8,dd,de,df,dg,dh,dj;c6=f.Get(c3);c7=b.prototype.constructor.apply(b,[]);c8=function(c9){var c_,c$,da,db,dc;c_=a.Hash(c9);c$=c7[c_];if(a.Equals(c$,undefined)){c7[c_]=[c9];da=true;}else{if(k.contains(c9,c$)){db=false;}else{dc=c$.push(c9);db=true;}da=db;}return da;};dd=f.Get(c2);try{while(dd.MoveNext()){df=dd.get_Current();dg=c8(df);}}finally{dd.Dispose!=undefined?dd.Dispose():null;}dh=function(){return c6.Dispose();};dj=function(dk){var dl,dm,dn,_do;if(c6.MoveNext()){dm=c6.get_Current();dn=c8(dm);while(!dn?c6.MoveNext():false){dm=c6.get_Current();dn=c8(dm);}if(dn){dk.c=dm;_do=true;}else{_do=false;}dl=_do;}else{dl=false;}return dl;};return g.New(null,null,dj,dh);};return h.Of(c4);},groupBy:function(dp,dq){return i.delay(function(){var ds,dt,du,dv,dw,dx,dy,dz;ds={};dt={};du=[];dv=f.Get(dq);try{while(dv.MoveNext()){dx=dv.get_Current();dy=dp(dx);dz=a.Hash(dy);!ds.hasOwnProperty(dz)?du.push(dy):null;dt[dz]=dy;ds.hasOwnProperty(dz)?ds[dz].push(dx):void(ds[dz]=[dx]);}dw=c.map(function(dA){return[dA,ds[a.Hash(dA)]];},du);}finally{dv.Dispose!=undefined?dv.Dispose():null;}return dw;});},insufficient:function(){return d.FailWith("The input sequence has an insufficient number of elements.");},last:function(dB){var dC,dD,dE,dF;dC=f.Get(dB);try{dE=dC.MoveNext();if(!dE){dF=j.insufficient();}else{while(dC.MoveNext()){}dF=dC.get_Current();}dD=dF;}finally{dC.Dispose!=undefined?dC.Dispose():null;}return dD;},nonNegative:function(){return d.FailWith("The input must be non-negative.");},pairwise:function(dG){var dH,dJ;dH=function(dI){return[c.get(dI,0),c.get(dI,1)];};dJ=j.windowed(2,dG);return i.map(dH,dJ);},truncate:function(dK,dL){return i.delay(function(){return i.enumUsing(f.Get(dL),function(dN){var dO;dO=[0];return i.enumWhile(function(){return dN.MoveNext()?dO[0]<dK:false;},i.delay(function(){l.incr(dO);return[dN.get_Current()];}));});});},tryHead:function(dR){var dS,dT;dS=f.Get(dR);try{dT=dS.MoveNext()?{$:1,$0:dS.get_Current()}:{$:0};}finally{dS.Dispose!=undefined?dS.Dispose():null;}return dT;},tryItem:function(dU,dV){var dW,dX,dY,dZ,d0;if(dU<0){dW={$:0};}else{dX=0;dY=f.Get(dV);try{d0=true;while(d0?dX<=dU:false){dY.MoveNext()?dX=dX+1:d0=false;}dZ=d0?{$:1,$0:dY.get_Current()}:{$:0};}finally{dY.Dispose!=undefined?dY.Dispose():null;}dW=dZ;}return dW;},tryLast:function(d1){var d2,d3,d4;d2=f.Get(d1);try{if(d2.MoveNext()){while(d2.MoveNext()){}d4={$:1,$0:d2.get_Current()};}else{d4={$:0};}d3=d4;}finally{d2.Dispose!=undefined?d2.Dispose():null;}return d3;},unfold:function(d5,d6){var d7;d7=function(){var d9;d9=function(d_){var d$,ea,eb,ec;d$=d5(d_.s);if(d$.$==0){ea=false;}else{eb=d$.$0[0];ec=d$.$0[1];d_.c=eb;d_.s=ec;ea=true;}return ea;};return g.New(d6,null,d9,function(){});};return h.Of(d7);},windowed:function(ee,ef){ee<=0?d.FailWith("The input must be positive."):null;return i.delay(function(){return i.enumUsing(f.Get(ef),function(eh){var ei;ei=[];return i.append(i.enumWhile(function(){return ei.length<ee?eh.MoveNext():false;},i.delay(function(){ei.push(eh.get_Current());return i.empty();})),i.delay(function(){return ei.length===ee?i.append([ei.slice(0)],i.delay(function(){return i.enumWhile(function(){return eh.MoveNext();},i.delay(function(){ei.shift();ei.push(eh.get_Current());return[ei.slice(0)];}));})):i.empty();}));});});}},WebSharper:{Activator:{Activate:$.Field(function(){var ep,eq;if(m.hasDocument()){eq=n.getElementById("websharper-data");ep=eq?o(n).ready(function(){var es,et,eu,eA;es=eq.getAttribute("content");et=p.Activate(q.parse(es));eu=function(ev){var ew,ex,ey,ez;ew=ev[0];ex=ev[1];ey=ex.get_Body();ez=n.getElementById(ew);return ey.ReplaceInDom(ez);};eA=s.GetFields(et);return c.iter(eu,eA);}):null;}else{ep=null;}return ep;}),hasDocument:function(){var $0=this,$this=this;return typeof $$.document!=="undefined";}},AggregateException:$.Class({},{New:function(eB){return $.New(this,t.New1("One or more errors occurred.",eB));},New1:function(eC){return $.New(this,u.New1(eC));}}),ArgumentException:$.Class({},{New:function(){return $.New(this,v.New1("Value does not fall within the expected range."));},New1:function(eE){return $.New(this,u.New1(eE));}}),Arrays:{average:function(eF){return w(c.sum(eF))/w(eF.length);},averageBy:function(eG,eH){return w(c.sumBy(eG,eH))/w(eH.length);},blit:function(eI,eJ,eK,eL,eM){var eN;c.checkRange(eI,eJ,eM);c.checkRange(eK,eL,eM);for(eN=0;eN<=eM-1;eN++){c.set(eK,eL+eN,c.get(eI,eJ+eN));}return;},checkBounds:function(eO,eP){return(eP<0?true:eP>=eO.length)?d.FailWith("Index was outside the bounds of the array."):null;},checkBounds2D:function(eQ,eR,eS){return(((eR<0?true:eS<0)?true:eR>=eQ.length)?true:eS>=(eQ.length?eQ[0].length:0))?d.Raise(x.New()):null;},checkLength:function(eT,eU){return eT.length!==eU.length?d.FailWith("Arrays differ in length."):null;},checkRange:function(eV,eW,eX){return((eX<0?true:eW<0)?true:eV.length<eW+eX)?d.FailWith("Index was outside the bounds of the array."):null;},choose:function(eY,eZ){var e0,e1,e2,e3,e4;e0=[];for(e1=0;e1<=eZ.length-1;e1++){e2=eY(c.get(eZ,e1));if(e2.$==0){e3=null;}else{e4=e2.$0;e3=e0.push(e4);}}return e0;},chunkBySize:function(e5,e6){var e7;e7=j.chunkBySize(e5,e6);return i.toArray(e7);},collect:function(e8,e9){return b.prototype.concat.apply([],c.map(e8,e9));},compareWith:function(e_,e$,fa){return j.compareWith(e_,e$,fa);},concat:function(fb){return b.prototype.concat.apply([],c.ofSeq(fb));},contains:function(fc,fd){return j.contains(fc,fd);},countBy:function(fe,ff){var fg;fg=j.countBy(fe,ff);return i.toArray(fg);},create:function(fh,fi){var fj,fk;fj=b(fh);for(fk=0;fk<=fh-1;fk++){c.set(fj,fk,fi);}return fj;},create2D:function(fl){var fm,fo,fp;fm=function(fn){return c.ofSeq(fn);};fo=i.map(fm,fl);fp=c.ofSeq(fo);fp.dims=2;return fp;},distinct:function(fq){var fr;fr=j.distinct(fq);return i.toArray(fr);},distinctBy:function(fs,ft){var fu;fu=j.distinctBy(fs,ft);return i.toArray(fu);},exactlyOne:function(fv){return c.length(fv)===1?c.get(fv,0):d.FailWith("The input does not have precisely one element.");},except:function(fw,fx){var fy;fy=j.except(fw,fx);return i.toArray(fy);},exists2:function(fz,fA,fB){c.checkLength(fA,fB);return i.exists2(fz,fA,fB);},fill:function(fC,fD,fE,fF){var fG;c.checkRange(fC,fD,fE);for(fG=fD;fG<=fD+fE-1;fG++){c.set(fC,fG,fF);}return;},filter:function(fH,fI){var fJ,fK;fJ=[];for(fK=0;fK<=fI.length-1;fK++){fH(c.get(fI,fK))?fJ.push(c.get(fI,fK)):null;}return fJ;},find:function(fL,fM){var fN,fO,fP;fN=c.tryFind(fL,fM);if(fN.$==0){fO=d.FailWith("KeyNotFoundException");}else{fP=fN.$0;fO=fP;}return fO;},findBack:function(fQ,fR){var fS,fT,fU;fS=k.tryFindBack(fQ,fR);if(fS.$==0){fT=d.FailWith("KeyNotFoundException");}else{fU=fS.$0;fT=fU;}return fT;},findINdex:function(fV,fW){var fX,fY,fZ;fX=c.tryFindIndex(fV,fW);if(fX.$==0){fY=d.FailWith("KeyNotFoundException");}else{fZ=fX.$0;fY=fZ;}return fY;},findIndexBack:function(f0,f1){var f2,f3,f4;f2=k.tryFindIndexBack(f0,f1);if(f2.$==0){f3=d.FailWith("KeyNotFoundException");}else{f4=f2.$0;f3=f4;}return f3;},fold:function(f5,f6,f7){var f8,f9;f8=f6;for(f9=0;f9<=f7.length-1;f9++){f8=(f5(f8))(c.get(f7,f9));}return f8;},fold2:function(f_,f$,ga,gb){var gc,gd;c.checkLength(ga,gb);gc=f$;for(gd=0;gd<=ga.length-1;gd++){gc=((f_(gc))(c.get(ga,gd)))(c.get(gb,gd));}return gc;},foldBack:function(ge,gf,gg){var gh,gi,gj;gh=gg;gi=gf.length;for(gj=1;gj<=gi;gj++){gh=(ge(c.get(gf,gi-gj)))(gh);}return gh;},foldBack2:function(gk,gl,gm,gn){var go,gp,gq;c.checkLength(gl,gm);go=gl.length;gp=gn;for(gq=1;gq<=go;gq++){gp=((gk(c.get(gl,go-gq)))(c.get(gm,go-gq)))(gp);}return gp;},forall2:function(gr,gs,gt){c.checkLength(gs,gt);return i.forall2(gr,gs,gt);},get:function(gu,gv){c.checkBounds(gu,gv);return gu[gv];},get2D:function(gw,gx,gy){c.checkBounds2D(gw,gx,gy);return gw[gx][gy];},groupBy:function(gz,gA){var gB,gF,gG;gB=function(gC){var gD,gE;gD=gC[0];gE=gC[1];return[gD,i.toArray(gE)];};gF=j.groupBy(gz,gA);gG=i.toArray(gF);return c.map(gB,gG);},head:function(gH){return e.head(e.ofArray(gH));},indexed:function(gI){return c.mapi(function(gJ){return function(gK){return[gJ,gK];};},gI);},init:function(gL,gM){var gN,gO;gL<0?d.FailWith("Negative size given."):null;gN=b(gL);for(gO=0;gO<=gL-1;gO++){c.set(gN,gO,gM(gO));}return gN;},iter:function(gP,gQ){var gR;for(gR=0;gR<=gQ.length-1;gR++){gP(c.get(gQ,gR));}return;},iter2:function(gS,gT,gU){var gV;c.checkLength(gT,gU);for(gV=0;gV<=gT.length-1;gV++){(gS(c.get(gT,gV)))(c.get(gU,gV));}return;},iteri:function(gW,gX){var gY;for(gY=0;gY<=gX.length-1;gY++){(gW(gY))(c.get(gX,gY));}return;},iteri2:function(gZ,g0,g1){var g2;c.checkLength(g0,g1);for(g2=0;g2<=g0.length-1;g2++){((gZ(g2))(c.get(g0,g2)))(c.get(g1,g2));}return;},last:function(g3){return j.last(g3);},length:function(g4){var g5;g5=g4.dims;return g5===2?g4.length*g4.length:g4.length;},map:function(g6,g7){var g8,g9;g8=b(g7.length);for(g9=0;g9<=g7.length-1;g9++){c.set(g8,g9,g6(c.get(g7,g9)));}return g8;},map2:function(g_,g$,ha){var hb,hc;c.checkLength(g$,ha);hb=b(ha.length);for(hc=0;hc<=ha.length-1;hc++){c.set(hb,hc,(g_(c.get(g$,hc)))(c.get(ha,hc)));}return hb;},map3:function(hd,he,hf,hg){var hh;hh=y.map3(hd,e.ofArray(he),e.ofArray(hf),e.ofArray(hg));return c.ofSeq(hh);},mapi:function(hi,hj){var hk,hl;hk=b(hj.length);for(hl=0;hl<=hj.length-1;hl++){c.set(hk,hl,(hi(hl))(c.get(hj,hl)));}return hk;},mapi2:function(hm,hn,ho){var hp,hq;c.checkLength(hn,ho);hp=b(hn.length);for(hq=0;hq<=hn.length-1;hq++){c.set(hp,hq,((hm(hq))(c.get(hn,hq)))(c.get(ho,hq)));}return hp;},max:function(hr){return c.reduce(function(hs){return function(ht){return d.Max(hs,ht);};},hr);},maxBy:function(hu,hv){return c.reduce(function(hw){return function(hx){return a.Compare(hu(hw),hu(hx))===1?hw:hx;};},hv);},min:function(hy){return c.reduce(function(hz){return function(hA){return d.Min(hz,hA);};},hy);},minBy:function(hB,hC){return c.reduce(function(hD){return function(hE){return a.Compare(hB(hD),hB(hE))===-1?hD:hE;};},hC);},nonEmpty:function(hF){return hF.length===0?d.FailWith("The input array was empty."):null;},ofSeq:function(hG){var hH,hI,hJ;hH=[];hI=f.Get(hG);try{while(hI.MoveNext()){hH.push(hI.get_Current());}hJ=hH;}finally{hI.Dispose!=undefined?hI.Dispose():null;}return hJ;},pairwise:function(hK){var hL;hL=j.pairwise(hK);return i.toArray(hL);},partition:function(hM,hN){var hO,hP,hQ;hO=[];hP=[];for(hQ=0;hQ<=hN.length-1;hQ++){hM(c.get(hN,hQ))?hO.push(c.get(hN,hQ)):hP.push(c.get(hN,hQ));}return[hO,hP];},permute:function(hR,hS){var hT,hU;hT=b(hS.length);for(hU=0;hU<=hS.length-1;hU++){c.set(hT,hR(hU),c.get(hS,hU));}return hT;},pick:function(hV,hW){var hX,hY,hZ;hX=c.tryPick(hV,hW);if(hX.$==0){hY=d.FailWith("KeyNotFoundException");}else{hZ=hX.$0;hY=hZ;}return hY;},reduce:function(h0,h1){var h2,h3;c.nonEmpty(h1);h2=c.get(h1,0);for(h3=1;h3<=h1.length-1;h3++){h2=(h0(h2))(c.get(h1,h3));}return h2;},reduceBack:function(h4,h5){var h6,h7,h8;c.nonEmpty(h5);h6=h5.length;h7=c.get(h5,h6-1);for(h8=2;h8<=h6;h8++){h7=(h4(c.get(h5,h6-h8)))(h7);}return h7;},replicate:function(h9,h_){return c.create(h9,h_);},reverse:function(h$,ia,ib){var ic;ic=c.sub(h$,ia,ib).slice().reverse();return c.blit(ic,0,h$,ia,c.length(ic));},scan:function(id,ie,_if){var ig,ih;ig=b(1+_if.length);c.set(ig,0,ie);for(ih=0;ih<=_if.length-1;ih++){c.set(ig,ih+1,(id(c.get(ig,ih)))(c.get(_if,ih)));}return ig;},scanBack:function(ii,ij,ik){var il,im,_in;il=ij.length;im=b(1+il);c.set(im,il,ik);for(_in=0;_in<=il-1;_in++){c.set(im,il-_in-1,(ii(c.get(ij,il-_in-1)))(c.get(im,il-_in)));}return im;},set:function(io,ip,iq){c.checkBounds(io,ip);io[ip]=iq;return;},set2D:function(ir,is,it,iu){c.checkBounds2D(ir,is,it);ir[is][it]=iu;return;},setSub:function(iv,iw,ix,iy){var iz;for(iz=0;iz<=ix-1;iz++){c.set(iv,iw+iz,c.get(iy,iz));}return;},setSub2D:function(iA,iB,iC,iD,iE,iF){var iG,iH;for(iG=0;iG<=iD-1;iG++){for(iH=0;iH<=iE-1;iH++){c.set2D(iA,iB+iG,iC+iH,c.get2D(iF,iG,iH));}}return;},skip:function(iI,iJ){return iI<0?j.nonNegative():iI>c.length(iJ)?j.insufficient():iJ.slice(iI);},skipWhile:function(iK,iL){var iM,iN;iM=c.length(iL);iN=0;while(iN<iM?iK(c.get(iL,iN)):false){iN=iN+1;}return iL.slice(iN);},sort:function(iO){return c.sortBy(function(iP){return iP;},iO);},sortBy:function(iQ,iR){return iR.slice().sort(function(iS,iT){return d.Compare(iQ(iS),iQ(iT));});},sortByDescending:function(iU,iV){return iV.slice().sort(function(iW,iX){return-d.Compare(iU(iW),iU(iX));});},sortDescending:function(iY){return c.sortByDescending(function(iZ){return iZ;},iY);},sortInPlace:function(i0){return c.sortInPlaceBy(function(i1){return i1;},i0);},sortInPlaceBy:function(i2,i3){return i3.sort(function(i4,i5){return d.Compare(i2(i4),i2(i5));});},sortInPlaceWith:function(i6,i7){return i7.sort(function(i8,i9){return(i6(i8))(i9);});},sortWith:function(i_,i$){return i$.slice().sort(function(ja,jb){return(i_(ja))(jb);});},splitAt:function(jc,jd){return[c.take(jc,jd),c.skip(jc,jd)];},sub:function(je,jf,jg){c.checkRange(je,jf,jg);return je.slice(jf,jf+jg);},sub2D:function(jh,ji,jj,jk,jl){var jm,jn,jo,jp,jq;jm=jk<0?0:jk;jn=jl<0?0:jl;jo=c.zeroCreate2D(jm,jn);for(jp=0;jp<=jm-1;jp++){for(jq=0;jq<=jn-1;jq++){c.set2D(jo,jp,jq,c.get2D(jh,ji+jp,jj+jq));}}return jo;},sum:function($arr){var $0=this,$this=this;var sum=0;for(var i=0;i<$arr.length;i++)sum+=$arr[i];return sum;},sumBy:function($f,$arr){var $0=this,$this=this;var sum=0;for(var i=0;i<$arr.length;i++)sum+=$f($arr[i]);return sum;},tail:function(jr){return c.skip(1,jr);},take:function(js,jt){return js<0?j.nonNegative():js>c.length(jt)?j.insufficient():jt.slice(0,js);},takeWhile:function(ju,jv){var jw,jx;jw=c.length(jv);jx=0;while(jx<jw?ju(c.get(jv,jx)):false){jx=jx+1;}return jv.slice(0,jx);},truncate:function(jy,jz){return jz.slice(jy);},tryFind:function(jA,jB){var jC,jD;jC={$:0};jD=0;while(jD<jB.length?jC.$==0:false){jA(c.get(jB,jD))?jC={$:1,$0:c.get(jB,jD)}:null;jD=jD+1;}return jC;},tryFindIndex:function(jE,jF){var jG,jH;jG={$:0};jH=0;while(jH<jF.length?jG.$==0:false){jE(c.get(jF,jH))?jG={$:1,$0:jH}:null;jH=jH+1;}return jG;},tryHead:function(jI){return c.length(jI)===0?{$:0}:{$:1,$0:jI[0]};},tryItem:function(jJ,jK){return(c.length(jK)<=jJ?true:jJ<0)?{$:0}:{$:1,$0:jK[jJ]};},tryLast:function(jL){var jM;jM=c.length(jL);return jM===0?{$:0}:{$:1,$0:jL[jM-1]};},tryPick:function(jN,jO){var jP,jQ,jR;jP={$:0};jQ=0;while(jQ<jO.length?jP.$==0:false){jR=jN(c.get(jO,jQ));jR.$==1?jP=jR:null;jQ=jQ+1;}return jP;},unfold:function(jS,jT){var jU;jU=j.unfold(jS,jT);return i.toArray(jU);},unzip:function(jV){var jW,jX,jY,jZ,j0,j1;jW=[];jX=[];for(jY=0;jY<=jV.length-1;jY++){jZ=c.get(jV,jY);j0=jZ[1];j1=jZ[0];jW.push(j1);jX.push(j0);}return[jW,jX];},unzip3:function(j2){var j3,j4,j5,j6,j7,j8,j9,j_;j3=[];j4=[];j5=[];for(j6=0;j6<=j2.length-1;j6++){j7=c.get(j2,j6);j8=j7[2];j9=j7[1];j_=j7[0];j3.push(j_);j4.push(j9);j5.push(j8);}return[j3,j4,j5];},windowed:function(j$,ka){var kb;kb=j.windowed(j$,ka);return i.toArray(kb);},zeroCreate2D:function(kc,kd){var ke;ke=c.init(kc,function(){return b(kd);});ke.dims=2;return ke;},zip:function(kg,kh){var ki,kj;c.checkLength(kg,kh);ki=b(kg.length);for(kj=0;kj<=kg.length-1;kj++){c.set(ki,kj,[c.get(kg,kj),c.get(kh,kj)]);}return ki;},zip3:function(kk,kl,km){var kn,ko;c.checkLength(kk,kl);c.checkLength(kl,km);kn=b(kk.length);for(ko=0;ko<=kk.length-1;ko++){c.set(kn,ko,[c.get(kk,ko),c.get(kl,ko),c.get(km,ko)]);}return kn;}},Arrays2D:{copy:function(kp){return z.init(kp.length,kp.length?kp[0].length:0,function(kq){return function(kr){return c.get2D(kp,kq,kr);};});},init:function(ks,kt,ku){var kv,kw,kx;kv=c.zeroCreate2D(ks,kt);for(kw=0;kw<=ks-1;kw++){for(kx=0;kx<=kt-1;kx++){c.set2D(kv,kw,kx,(ku(kw))(kx));}}return kv;},iter:function(ky,kz){var kA,kB,kC,kD;kA=kz.length;kB=kz.length?kz[0].length:0;for(kC=0;kC<=kA-1;kC++){for(kD=0;kD<=kB-1;kD++){ky(c.get2D(kz,kC,kD));}}return;},iteri:function(kE,kF){var kG,kH,kI,kJ;kG=kF.length;kH=kF.length?kF[0].length:0;for(kI=0;kI<=kG-1;kI++){for(kJ=0;kJ<=kH-1;kJ++){((kE(kI))(kJ))(c.get2D(kF,kI,kJ));}}return;},map:function(kK,kL){return z.init(kL.length,kL.length?kL[0].length:0,function(kM){return function(kN){return kK(c.get2D(kL,kM,kN));};});},mapi:function(kO,kP){return z.init(kP.length,kP.length?kP[0].length:0,function(kQ){return function(kR){return((kO(kQ))(kR))(c.get2D(kP,kQ,kR));};});}},AsyncProxy:$.Class({},{get_CancellationToken:function(){return A.GetCT();},get_DefaultCancellationToken:function(){return(A.defCTS())[0];}}),CancellationTokenSource:$.Class({Cancel:function(){var kS,kT,kX,kY;if(!this.c){this.c=true;kT=function(kU){var kV,kW;try{kU(null);kV={$:0};}catch(kW){kV={$:1,$0:kW};}return kV;};kX=this.r;kY=c.choose(kT,kX);kS=c.length(kY)>0?d.Raise(t.New(kY)):null;}else{kS=null;}return kS;},Cancel1:function(kZ){var k0,k1,k2,k4;if(!kZ){k0=this.Cancel();}else{if(!this.c){this.c=true;k2=function(k3){return k3(null);};k4=this.r;k1=c.iter(k2,k4);}else{k1=null;}k0=k1;}return k0;},CancelAfter:function(k5){var k6,k7,k9,k$=this;if(!this.c){k7=this.pending;B.iter(function(k8){return C(k8);},k7);k9=D(function(){return k$.Cancel();},k5);k6=void(this.pending={$:1,$0:k9});}else{k6=null;}return k6;},get_IsCancellationRequested:function(){return this.c;}},{CreateLinkedTokenSource:function(la,lb){return E.CreateLinkedTokenSource1([la,lb]);},CreateLinkedTokenSource1:function(lc){var ld,le;ld=E.New();le=function(lf){var lg;lg=A.Register(lf,function(){return function(){return ld.Cancel();}();});return;};return c.iter(le,lc);},New:function(){var lj;lj=$.New(this,{});lj.c=false;lj.pending={$:0};lj.r=[];return lj;}}),Char:$.Class({},{GetNumericValue:function(lk){return(lk>=48?lk<=57:false)?w(lk)-w(48):-1;},IsControl:function(ll){return(ll>=0?ll<=31:false)?true:ll>=128?ll<=159:false;},IsDigit:function(lm){return lm>=48?lm<=57:false;},IsLetter:function(ln){return(ln>=65?ln<=90:false)?true:ln>=97?ln<=122:false;},IsLetterOrDigit:function(lo){return F.IsLetter(lo)?true:F.IsDigit(lo);},IsLower:function(lp){return lp>=97?lp<=122:false;},IsUpper:function(lq){return lq>=65?lq<=90:false;},IsWhiteSpace:function($c){var $0=this,$this=this;return $$.String.fromCharCode($c).match(/\s/)!==null;},Parse:function(lr){return lr.length===1?lr.charCodeAt(0):d.FailWith("String must be exactly one character long.");}}),Concurrency:{AwaitEvent:function(ls){var lt;lt=function(lu){var lv,lw,lx,ly,lz,lA;lv=function(){return G.subscribeTo(ls,function(lC){var lD;H.Force(lw).Dispose();H.Force(ly).Dispose();lD=function(){return lu.k.call(null,{$:0,$0:lC});};return A.scheduler().Fork(lD);});};lw=H.Create(lv);lx=function(){return A.Register(lu.ct,function(){var lH;H.Force(lw).Dispose();lH=function(){return lu.k.call(null,{$:2,$0:I.New()});};return A.scheduler().Fork(lH);});};ly=H.Create(lx);lz=H.Force(lw);lA=H.Force(ly);return null;};return A.checkCancel(lt);},Bind:function(lJ,lK){var lL;lL=function(lM){return lJ({k:function(lN){var lO,lP,lQ,lU;if(lN.$==0){lP=lN.$0;lQ=function(){var lS,lT;try{lS=(lK(lP))(lM);}catch(lT){lS=lM.k.call(null,{$:1,$0:lT});}return lS;};lO=A.scheduler().Fork(lQ);}else{lU=function(){return lM.k.call(null,lN);};lO=A.scheduler().Fork(lU);}return lO;},ct:lM.ct});};return A.checkCancel(lL);},Catch:function(lW){var lX;lX=function(lY){var lZ,l4;try{lZ=lW({k:function(l0){var l1,l2,l3;if(l0.$==0){l2=l0.$0;l1=lY.k.call(null,{$:0,$0:{$:0,$0:l2}});}else{if(l0.$==1){l3=l0.$0;l1=lY.k.call(null,{$:0,$0:{$:1,$0:l3}});}else{l1=lY.k.call(null,l0);}}return l1;},ct:lY.ct});}catch(l4){lZ=lY.k.call(null,{$:0,$0:{$:1,$0:l4}});}return lZ;};return A.checkCancel(lX);},Combine:function(l5,l6){return A.Bind(l5,function(){return l6;});},Delay:function(l8){var l9;l9=function(l_){var l$,ma;try{l$=(l8(null))(l_);}catch(ma){l$=l_.k.call(null,{$:1,$0:ma});}return l$;};return A.checkCancel(l9);},For:function(mb,mc){return A.Using(f.Get(mb),function(md){return A.While(function(){return md.MoveNext();},A.Delay(function(){return mc(md.get_Current());}));});},FromContinuations:function(mg){var mh;mh=function(mi){var mj,mk;mj=[false];mk=function(ml){var mm;if(mj[0]){mm=d.FailWith("A continuation provided by Async.FromContinuations was invoked multiple times");}else{mj[0]=true;mm=A.scheduler().Fork(ml);}return mm;};return mg([function(mn){return mk(function(){return mi.k.call(null,{$:0,$0:mn});});},function(mp){return mk(function(){return mi.k.call(null,{$:1,$0:mp});});},function(mr){return mk(function(){return mi.k.call(null,{$:2,$0:mr});});}]);};return A.checkCancel(mh);},GetCT:$.Field(function(){var mt;mt=function(mu){return mu.k.call(null,{$:0,$0:mu.ct});};return A.checkCancel(mt);}),Ignore:function(mv){return A.Bind(mv,function(){return A.Return(null);});},OnCancel:function(mx){var my;my=function(mz){return mz.k.call(null,{$:0,$0:A.Register(mz.ct,mx)});};return A.checkCancel(my);},Parallel:function(mA){var mB,mC,mD;mB=c.ofSeq(mA);if(c.length(mB)===0){mC=A.Return([]);}else{mD=function(mE){var mF,mG,mH,mI;mF=mB.length;mG=[mF];mH=c.create(mF,undefined);mI=function(mJ){return function(mK){var mL,mM,mN,mO,mP,mQ,mR,mS,mT;mL=[mG[0],mK];if(mL[0]===0){mM=null;}else{if(mL[0]===1){if(mL[1].$==0){mO=mL[1].$0;c.set(mH,mJ,mO);mG[0]=0;mN=mE.k.call(null,{$:0,$0:mH});}else{mL[0];mP=mL[1];mG[0]=0;mN=mE.k.call(null,mP);}mM=mN;}else{if(mL[1].$==0){mR=mL[1].$0;mS=mL[0];c.set(mH,mJ,mR);mQ=void(mG[0]=mS-1);}else{mL[0];mT=mL[1];mG[0]=0;mQ=mE.k.call(null,mT);}mM=mQ;}}return mM;};};return c.iteri(function(mU){return function(mV){var mW;mW=function(){return mV({k:mI(mU),ct:mE.ct});};return A.scheduler().Fork(mW);};},mB);};mC=A.checkCancel(mD);}return mC;},Register:function(mY,mZ){var m0;m0=mY.r.push(mZ)-1;return{Dispose:function(){return c.set(mY.r,m0,function(){});}};},Return:function(m3){var m4;m4=function(m5){return m5.k.call(null,{$:0,$0:m3});};return A.checkCancel(m4);},Scheduler:$.Class({Fork:function(m6){var m7,m8,m_=this;this.robin.push(m6);if(this.idle){this.idle=false;m8=D(function(){return m_.tick();},0);m7=void m8;}else{m7=null;}return m7;},tick:function(){var m$,na,nb,nc,nd,ne,ng=this;m$=J.now();na=true;while(na){nb=this.robin.length;if(nb===0){this.idle=true;nc=na=false;}else{(this.robin.shift())(null);if(J.now()-m$>40){ne=D(function(){return ng.tick();},0);nd=na=false;}else{nd=null;}nc=nd;}}return;}},{New:function(){var nh;nh=$.New(this,{});nh.idle=true;nh.robin=[];return nh;}}),Sleep:function(ni){var nj;nj=function(nk){var nl,nm,nn,no,np,nq;nl=function(){return D(function(){var nt;H.Force(no).Dispose();nt=function(){return nk.k.call(null,{$:0,$0:null});};return A.scheduler().Fork(nt);},ni);};nm=H.Create(nl);nn=function(){return A.Register(nk.ct,function(){var nx;C(H.Force(nm));nx=function(){return nk.k.call(null,{$:2,$0:I.New()});};return A.scheduler().Fork(nx);});};no=H.Create(nn);np=H.Force(nm);nq=H.Force(no);return null;};return A.checkCancel(nj);},Start:function(nz,nA){return A.StartWithContinuations(nz,function(){},function(nC){var nD;nD=[nC];return K?K.log.apply(K,["WebSharper: Uncaught asynchronous exception"].concat(nD)):undefined;},function(){},nA);},StartChild:function(nF){var nG;nG=function(nH){var nI,nJ,nK,nN,nS;nI=[{$:0}];nJ=[];nK=function(){return nF({k:function(nM){nI[0]={$:1,$0:nM};while(nJ.length>0){(nJ.shift())(nM);}return;},ct:nH.ct});};A.scheduler().Fork(nK);nN=function(nO){var nP,nQ,nR;nP=nI[0];if(nP.$==0){nQ=nJ.push(nO.k);}else{nR=nP.$0;nQ=nO.k.call(null,nR);}return nQ;};nS=A.checkCancel(nN);return nH.k.call(null,{$:0,$0:nS});};return A.checkCancel(nG);},StartWithContinuations:function(nT,nU,nV,nW,nX){var nY,nZ;nY=d.DefaultArg(nX,(A.defCTS())[0]);nZ=function(){return nT({k:function(n1){var n2,n3,n4,n5;if(n1.$==1){n3=n1.$0;n2=nV(n3);}else{if(n1.$==2){n4=n1.$0;n2=nW(n4);}else{n5=n1.$0;n2=nU(n5);}}return n2;},ct:nY});};return A.scheduler().Fork(nZ);},TryCancelled:function(n6,n7){var n8;n8=function(n9){return n6({k:function(n_){var n$,oa;if(n_.$==2){oa=n_.$0;n7(oa);n$=n9.k.call(null,n_);}else{n$=n9.k.call(null,n_);}return n$;},ct:n9.ct});};return A.checkCancel(n8);},TryFinally:function(ob,oc){var od;od=function(oe){return ob({k:function(of){var og,oh;try{oc(null);og=oe.k.call(null,of);}catch(oh){og=oe.k.call(null,{$:1,$0:oh});}return og;},ct:oe.ct});};return A.checkCancel(od);},TryWith:function(oi,oj){var ok;ok=function(ol){return oi({k:function(om){var on,oo,op,oq,or;if(om.$==0){oo=om.$0;on=ol.k.call(null,{$:0,$0:oo});}else{if(om.$==1){op=om.$0;try{oq=(oj(op))(ol);}catch(or){oq=ol.k.call(null,om);}on=oq;}else{on=ol.k.call(null,om);}}return on;},ct:ol.ct});};return A.checkCancel(ok);},Using:function(os,ot){return A.TryFinally(ot(os),function(){return os.Dispose();});},While:function(ov,ow){return ov(null)?A.Bind(ow,function(){return A.While(ov,ow);}):A.Return(null);},checkCancel:function(oy){return function(oz){return oz.ct.c?oz.k.call(null,{$:2,$0:I.New()}):oy(oz);};},defCTS:$.Field(function(){return[E.New()];}),scheduler:$.Field(function(){return L.New();})},Control:{createEvent:function(oA,oB,oC){return{AddHandler:oA,RemoveHandler:oB,Subscribe:function(oD){var oE;oE=oC(function(){return function(oG){return oD.OnNext.call(null,oG);};});oA(oE);return{Dispose:function(){return oB(oE);}};}};}},DateTimeHelpers:{AddMonths:function(oI,oJ){var oK;oK=new J(oI);return(new J(oK.getFullYear(),oK.getMonth()+oJ,oK.getDate(),oK.getHours(),oK.getMinutes(),oK.getSeconds(),oK.getMilliseconds())).getTime();},AddYears:function(oL,oM){var oN;oN=new J(oL);return(new J(oN.getFullYear()+oM,oN.getMonth(),oN.getDate(),oN.getHours(),oN.getMinutes(),oN.getSeconds(),oN.getMilliseconds())).getTime();},DatePortion:function(oO){var oP;oP=new J(oO);return(new J(oP.getFullYear(),oP.getMonth(),oP.getDate())).getTime();},LongDate:function($d){var $0=this,$this=this;return(new $$.Date($d)).toLocaleDateString({},{year:"numeric",month:"long",day:"numeric",weekday:"long"});},LongTime:function($d){var $0=this,$this=this;return(new $$.Date($d)).toLocaleTimeString({},{hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:false});},Parse:function(oQ){var oR;oR=J.parse(oQ);return $$.isNaN(oR)?d.FailWith("Failed to parse date string."):oR;},ShortTime:function($d){var $0=this,$this=this;return(new $$.Date($d)).toLocaleTimeString({},{hour:"2-digit",minute:"2-digit",hour12:false});},TimePortion:function(oS){var oT;oT=new J(oS);return(((24*0+oT.getHours())*60+oT.getMinutes())*60+oT.getSeconds())*1000+oT.getMilliseconds();}},Enumerable:{Of:function(oU){return{GetEnumerator:oU};}},Enumerator:{Get:function(oV){return oV instanceof $$.Array?g.New(0,null,function(oW){var oX,oY;oX=oW.s;if(oX<c.length(oV)){oW.c=c.get(oV,oX);oW.s=oX+1;oY=true;}else{oY=false;}return oY;},function(){}):a.Equals(typeof oV,"string")?g.New(0,null,function(o0){var o1,o2;o1=o0.s;if(o1<oV.length){o0.c=oV.charCodeAt(o1);o0.s=o1+1;o2=true;}else{o2=false;}return o2;},function(){}):oV.GetEnumerator();},T:$.Class({Dispose:function(){return this.d.call(null,this);},MoveNext:function(){return this.n.call(null,this);},get_Current:function(){return this.c;}},{New:function(o4,o5,o6,o7){var o8;o8=$.New(this,{});o8.s=o4;o8.c=o5;o8.n=o6;o8.d=o7;return o8;}})},Exception:$.Class({},{New:function(){return $.New(this,u.New1("Exception of type 'System.Exception' was thrown."));},New1:function($message){var $0=this,$this=this;return new $$.Error($message);}}),Guid:$.Class({},{NewGuid:function(){var $0=this,$this=this;return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(c){var r=$$.Math.random()*16|0,v=c=="x"?r:r&0x3|0x8;return v.toString(16);});}}),HtmlContentExtensions:{"IControlBody.SingleNode.Static":function(o9){return N.New(o9);},SingleNode:$.Class({ReplaceInDom:function(o_){var o$;o$=this.node.parentNode.replaceChild(this.node,o_);return;}},{New:function(pa){var pb;pb=$.New(this,{});pb.node=pa;return pb;}})},IndexOutOfRangeException:$.Class({},{New:function(){return $.New(this,x.New1("Index was outside the bounds of the array."));},New1:function(pc){return $.New(this,u.New1(pc));}}),InvalidOperationException:$.Class({},{New:function(){return $.New(this,O.New1("Operation is not valid due to the current state of the object."));},New1:function(pd){return $.New(this,u.New1(pd));}}),JavaScript:{JSModule:{Delete:function($x,$field){var $0=this,$this=this;return delete $x[$field];},ForEach:function($x,$iter){var $0=this,$this=this;for(var k in $x){if($iter(k))break;}},GetFieldNames:function($o){var $0=this,$this=this;var r=[];for(var k in $o)r.push(k);return r;},GetFieldValues:function($o){var $0=this,$this=this;var r=[];for(var k in $o)r.push($o[k]);return r;},GetFields:function($o){var $0=this,$this=this;var r=[];for(var k in $o)r.push([k,$o[k]]);return r;},Log:function($x){var $0=this,$this=this;if($$.console)$$.console.log($x);},LogMore:function($args){var $0=this,$this=this;if($$.console)$$.console.log.apply($$.console,$args);}},Pervasives:{NewFromList:function(pe){var pf,pg,ph,pi,pj,pk;pf={};pg=f.Get(pe);try{while(pg.MoveNext()){pi=pg.get_Current();pj=pi[1];pk=pi[0];pf[pk]=pj;}}finally{pg.Dispose!=undefined?pg.Dispose():null;}return pf;}}},Json:{Activate:function(pl){var pm,pn,po;pm=pl.$TYPES;for(pn=0;pn<=c.length(pm)-1;pn++){c.set(pm,pn,p.lookup(c.get(pm,pn)));}po=function(pp){var pq,pr,ps,pt,pu,pv,pw,px;if(a.Equals(pp,null)){pq=pp;}else{pr=typeof pp;if(pr==="object"){if(pp instanceof $$.Array){pt=p.shallowMap(po,pp);}else{pu=p.shallowMap(po,pp.$V);pv=pp.$T;if(a.Equals(typeof pv,"undefined")){pw=pu;}else{px=new(c.get(pm,pv))();s.ForEach(pu,function(py){px[py]=pu[py];return false;});pw=px;}pt=pw;}ps=pt;}else{ps=pp;}pq=ps;}return pq;};return po(pl.$DATA);},lookup:function(pz){var pA,pB,pC,pD,pE,pF;pA=c.length(pz);pB=$$;pC=0;while(pC<pA){pD=c.get(pz,pC);pE=pB[pD];if(!a.Equals(typeof pE,undefined)){pB=pE;pF=pC=pC+1;}else{pF=d.FailWith("Invalid server reply. Failed to find type: "+pD);}}return pB;},shallowMap:function(pG,pH){var pI,pJ,pK,pL;if(pH instanceof $$.Array){pI=c.map(pG,pH);}else{pJ=typeof pH;if(pJ==="object"){pL={};s.ForEach(pH,function(pM){pL[pM]=pG(pH[pM]);return false;});pK=pL;}else{pK=pH;}pI=pK;}return pI;}},Lazy:{Create:function(pN){var pO,pP;pO={value:undefined,created:false,eval:pN};pP=function(){var pR;if(pO.created){pR=pO.value;}else{pO.created=true;pO.value=pN(null);pR=pO.value;}return pR;};pO.eval=pP;return pO;},CreateFromValue:function(pS){return{value:pS,created:true,eval:function(){return pS;},eval:function(){return pS;}};},Force:function(pV){return pV.eval.call(null,null);}},List:{T:$.Class({GetEnumerator:function(){return g.New(this,null,function(pW){var pX,pY,pZ,p0;pX=pW.s;if(pX.$==0){pY=false;}else{pZ=pX.$1;p0=pX.$0;pW.c=p0;pW.s=pZ;pY=true;}return pY;},function(){});},GetSlice:function(p2,p3){var p4,p5,p6,p7,p8,p9,p_,p$,qa,qb,qc,qd,qe;p4=[p2,p3];if(p4[0].$==1){if(p4[1].$==1){p7=p4[0].$0;p8=p4[1].$0;p9=p8-p7+1;p_=y.skip(p7,this);p$=i.take(p9,p_);p6=e.ofSeq(p$);}else{qa=p4[0].$0;p6=y.skip(qa,this);}p5=p6;}else{if(p4[1].$==1){qc=p4[1].$0;qd=qc+1;qe=i.take(qd,this);qb=e.ofSeq(qe);}else{qb=this;}p5=qb;}return p5;},get_Item:function(qf){return i.nth(qf,this);},get_Length:function(){return i.length(this);}},{Construct:function(qg,qh){return $.New(P,{$:1,$0:qg,$1:qh});},get_Nil:function(){return $.New(P,{$:0});}}),append:function(qi,qj){return e.ofSeq(i.append(qi,qj));},choose:function(qk,ql){return e.ofSeq(i.choose(qk,ql));},chunkBySize:function(qm,qn){var qo,qq,qr;qo=function(qp){return e.ofArray(qp);};qq=j.chunkBySize(qm,qn);qr=i.toList(qq);return e.map(qo,qr);},collect:function(qs,qt){return e.ofSeq(i.collect(qs,qt));},compareWith:function(qu,qv,qw){return j.compareWith(qu,qv,qw);},concat:function(qx){return e.ofSeq(i.concat(qx));},contains:function(qy,qz){return j.contains(qy,qz);},countBy:function(qA,qB){var qC;qC=j.countBy(qA,qB);return i.toList(qC);},distinct:function(qD){var qE;qE=j.distinct(qD);return i.toList(qE);},distinctBy:function(qF,qG){var qH;qH=j.distinctBy(qF,qG);return i.toList(qH);},exactlyOne:function(qI){var qJ,qK,qL;if(qI.$==1){if(qI.$1.$==0){qL=qI.$0;qK=qL;}else{qK=d.FailWith("The input does not have precisely one element.");}qJ=qK;}else{qJ=d.FailWith("The input does not have precisely one element.");}return qJ;},except:function(qM,qN){var qO;qO=j.except(qM,qN);return i.toList(qO);},exists2:function(qP,qQ,qR){return c.exists2(qP,c.ofSeq(qQ),c.ofSeq(qR));},filter:function(qS,qT){return e.ofSeq(i.filter(qS,qT));},findBack:function(qU,qV){var qW,qX,qY;qW=e.tryFindBack(qU,qV);if(qW.$==0){qX=d.FailWith("KeyNotFoundException");}else{qY=qW.$0;qX=qY;}return qX;},findIndexBack:function(qZ,q0){var q1,q2,q3;q1=k.tryFindIndexBack(qZ,c.ofSeq(q0));if(q1.$==0){q2=d.FailWith("KeyNotFoundException");}else{q3=q1.$0;q2=q3;}return q2;},fold2:function(q4,q5,q6,q7){return c.fold2(q4,q5,c.ofSeq(q6),c.ofSeq(q7));},foldBack:function(q8,q9,q_){return c.foldBack(q8,c.ofSeq(q9),q_);},foldBack2:function(q$,ra,rb,rc){return c.foldBack2(q$,c.ofSeq(ra),c.ofSeq(rb),rc);},forall2:function(rd,re,rf){return c.forall2(rd,c.ofSeq(re),c.ofSeq(rf));},groupBy:function(rg,rh){var ri,rm,rn;ri=function(rj){var rk,rl;rk=rj[0];rl=rj[1];return[rk,i.toList(rl)];};rm=j.groupBy(rg,rh);rn=i.toList(rm);return e.map(ri,rn);},head:function(ro){var rp,rq;if(ro.$==1){rq=ro.$0;rp=rq;}else{rp=d.FailWith("The input list was empty.");}return rp;},indexed:function(rr){return e.mapi(function(rs){return function(rt){return[rs,rt];};},rr);},init:function(ru,rv){return e.ofArray(c.init(ru,rv));},iter2:function(rw,rx,ry){return c.iter2(rw,c.ofSeq(rx),c.ofSeq(ry));},iteri2:function(rz,rA,rB){return c.iteri2(rz,c.ofSeq(rA),c.ofSeq(rB));},last:function(rC){return j.last(rC);},map:function(rD,rE){return e.ofSeq(i.map(rD,rE));},map2:function(rF,rG,rH){return e.ofArray(c.map2(rF,c.ofSeq(rG),c.ofSeq(rH)));},mapFold:function(rI,rJ,rK){var rL,rM,rN;rL=k.mapFold(rI,rJ,c.ofSeq(rK));rM=rL[0];rN=rL[1];return[e.ofArray(rM),rN];},mapFoldBack:function(rO,rP,rQ){var rR,rS,rT;rR=k.mapFoldBack(rO,c.ofSeq(rP),rQ);rS=rR[0];rT=rR[1];return[e.ofArray(rS),rT];},mapi:function(rU,rV){return e.ofSeq(i.mapi(rU,rV));},mapi2:function(rW,rX,rY){return e.ofArray(c.mapi2(rW,c.ofSeq(rX),c.ofSeq(rY)));},max:function(rZ){return i.reduce(function(r0){return function(r1){return d.Max(r0,r1);};},rZ);},maxBy:function(r2,r3){return i.reduce(function(r4){return function(r5){return a.Compare(r2(r4),r2(r5))===1?r4:r5;};},r3);},min:function(r6){return i.reduce(function(r7){return function(r8){return d.Min(r7,r8);};},r6);},minBy:function(r9,r_){return i.reduce(function(r$){return function(sa){return a.Compare(r9(r$),r9(sa))===-1?r$:sa;};},r_);},ofArray:function(sb){var sc,sd;sc=$.New(P,{$:0});for(sd=0;sd<=c.length(sb)-1;sd++){sc=$.New(P,{$:1,$0:c.get(sb,c.length(sb)-sd-1),$1:sc});}return sc;},ofSeq:function(se){var sf,sg,sh,si,sj;sf=$.New(P,{$:0});sg=sf;sh=f.Get(se);try{while(sh.MoveNext()){sg.$=1;sj=$.New(P,{$:0});sg.$0=sh.get_Current();sg.$1=sj;sg=sj;}sg.$=0;si=sf;}finally{sh.Dispose!=undefined?sh.Dispose():null;}return si;},pairwise:function(sk){var sl;sl=j.pairwise(sk);return i.toList(sl);},partition:function(sm,sn){var so,sp,sq;so=c.partition(sm,c.ofSeq(sn));sp=so[1];sq=so[0];return[e.ofArray(sq),e.ofArray(sp)];},permute:function(sr,ss){return e.ofArray(c.permute(sr,c.ofSeq(ss)));},reduceBack:function(st,su){return c.reduceBack(st,c.ofSeq(su));},replicate:function(sv,sw){return e.ofArray(c.create(sv,sw));},rev:function(sx){var sy;sy=c.ofSeq(sx);sy.reverse();return e.ofArray(sy);},scan:function(sz,sA,sB){return e.ofSeq(i.scan(sz,sA,sB));},scanBack:function(sC,sD,sE){return e.ofArray(c.scanBack(sC,c.ofSeq(sD),sE));},singleton:function(sF){return e.ofArray([sF]);},sort:function(sG){var sH;sH=c.ofSeq(sG);c.sortInPlace(sH);return e.ofArray(sH);},sortBy:function(sI,sJ){return e.sortWith(function(sK){return function(sL){return d.Compare(sI(sK),sI(sL));};},sJ);},sortByDescending:function(sM,sN){return e.sortWith(function(sO){return function(sP){return-d.Compare(sM(sO),sM(sP));};},sN);},sortDescending:function(sQ){var sR;sR=c.ofSeq(sQ);k.sortInPlaceByDescending(function(sS){return sS;},sR);return e.ofArray(sR);},sortWith:function(sT,sU){var sV;sV=c.ofSeq(sU);c.sortInPlaceWith(sT,sV);return e.ofArray(sV);},splitAt:function(sW,sX){return[e.ofSeq(i.take(sW,sX)),y.skip(sW,sX)];},splitInto:function(sY,sZ){var s0,s2,s3;s0=function(s1){return e.ofArray(s1);};s2=k.splitInto(sY,c.ofSeq(sZ));s3=e.ofArray(s2);return e.map(s0,s3);},tail:function(s4){var s5,s6;if(s4.$==1){s6=s4.$1;s5=s6;}else{s5=d.FailWith("The input list was empty.");}return s5;},tryFindBack:function(s7,s8){return k.tryFindBack(s7,c.ofSeq(s8));},tryHead:function(s9){var s_,s$;if(s9.$==0){s_={$:0};}else{s$=s9.$0;s_={$:1,$0:s$};}return s_;},tryItem:function(ta,tb){return j.tryItem(ta,tb);},tryLast:function(tc){return j.tryLast(tc);},unfold:function(td,te){var tf;tf=j.unfold(td,te);return i.toList(tf);},unzip:function(tg){var th,ti,tj,tk,tl,tm,tn;th=[];ti=[];tj=f.Get(tg);try{while(tj.MoveNext()){tl=tj.get_Current();tm=tl[1];tn=tl[0];th.push(tn);ti.push(tm);}}finally{tj.Dispose!=undefined?tj.Dispose():null;}return[e.ofArray(th.slice(0)),e.ofArray(ti.slice(0))];},unzip3:function(to){var tp,tq,tr,ts,tt,tu,tv,tw,tx;tp=[];tq=[];tr=[];ts=f.Get(to);try{while(ts.MoveNext()){tu=ts.get_Current();tv=tu[2];tw=tu[1];tx=tu[0];tp.push(tx);tq.push(tw);tr.push(tv);}}finally{ts.Dispose!=undefined?ts.Dispose():null;}return[e.ofArray(tp.slice(0)),e.ofArray(tq.slice(0)),e.ofArray(tr.slice(0))];},windowed:function(ty,tz){var tA,tC,tD;tA=function(tB){return e.ofArray(tB);};tC=j.windowed(ty,tz);tD=i.map(tA,tC);return i.toList(tD);},zip:function(tE,tF){return e.ofArray(c.zip(c.ofSeq(tE),c.ofSeq(tF)));},zip3:function(tG,tH,tI){return e.ofArray(c.zip3(c.ofSeq(tG),c.ofSeq(tH),c.ofSeq(tI)));}},MatchFailureException:$.Class({},{New:function(tJ,tK,tL){return $.New(this,u.New1(tJ+" at "+$$.String(tK)+":"+$$.String(tL)));}}),Nullable:{get:function(tM){return tM==null?d.FailWith("Nullable object must have a value."):tM;},getOrValue:function(tN,tO){return tN==null?tO:tN;}},OperationCanceledException:$.Class({},{New:function(){return $.New(this,I.New1("The operation was canceled."));},New1:function(tP){return $.New(this,u.New1(tP));}}),Operators:{Compare:function(tQ,tR){return a.Compare(tQ,tR);},DefaultArg:function(tS,tT){var tU,tV;if(tS.$==0){tU=tT;}else{tV=tS.$0;tU=tV;}return tU;},FailWith:function(tW){return d.Raise(u.New1(tW));},KeyValue:function(tX){return[tX.K,tX.V];},Max:function(tY,tZ){return a.Compare(tY,tZ)===1?tY:tZ;},Min:function(t0,t1){return a.Compare(t0,t1)===-1?t0:t1;},Pown:function(t2,t3){var t4;t4=function(t5){var t6,t7,t8;if(t5===1){t6=t2;}else{if(t5%2===0){t8=t4(t5/2>>0);t7=t8*t8;}else{t7=t2*t4(t5-1);}t6=t7;}return t6;};return t4(t3);},Raise:function($e){var $0=this,$this=this;throw $e;},Sign:function(t9){return t9===0?0:t9<0?-1:1;},Truncate:function(t_){return t_<0?R.ceil(t_):R.floor(t_);},Using:function(t$,ua){var ub;try{ub=ua(t$);}finally{t$.Dispose();}return ub;},range:function(uc,ud){var ue;ue=1+ud-uc;return ue<=0?i.empty():i.init(ue,function(uf){return uf+uc;});},step:function(ug,uh,ui){var uj,uk,um,uo;uj=d.Sign(uh);uk=function(ul){return uj*(ui-ul)>=0;};um=i.initInfinite(function(un){return ug+un*uh;});uo=i.takeWhile(uk,um);return uo;}},Option:{bind:function(up,uq){var ur,us;if(uq.$==0){ur={$:0};}else{us=uq.$0;ur=up(us);}return ur;},exists:function(ut,uu){var uv,uw;if(uu.$==0){uv=false;}else{uw=uu.$0;uv=ut(uw);}return uv;},filter:function(ux,uy){var uz,uA;if(uy.$==1){uA=uy.$0;uz=ux(uA)?{$:1,$0:uA}:{$:0};}else{uz={$:0};}return uz;},fold:function(uB,uC,uD){var uE,uF;if(uD.$==0){uE=uC;}else{uF=uD.$0;uE=(uB(uC))(uF);}return uE;},foldBack:function(uG,uH,uI){var uJ,uK;if(uH.$==0){uJ=uI;}else{uK=uH.$0;uJ=(uG(uK))(uI);}return uJ;},forall:function(uL,uM){var uN,uO;if(uM.$==0){uN=true;}else{uO=uM.$0;uN=uL(uO);}return uN;},iter:function(uP,uQ){var uR,uS;if(uQ.$==0){uR=null;}else{uS=uQ.$0;uR=uP(uS);}return uR;},map:function(uT,uU){var uV,uW;if(uU.$==0){uV={$:0};}else{uW=uU.$0;uV={$:1,$0:uT(uW)};}return uV;},ofObj:function(uX){return uX==null?{$:0}:{$:1,$0:uX};},toArray:function(uY){var uZ,u0;if(uY.$==0){uZ=[];}else{u0=uY.$0;uZ=[u0];}return uZ;},toList:function(u1){var u2,u3;if(u1.$==0){u2=$.New(P,{$:0});}else{u3=u1.$0;u2=e.ofArray([u3]);}return u2;},toObj:function(u4){var u5,u6;if(u4.$==0){}else{u6=u4.$0;u5=u6;}return u5;}},PrintfHelpers:{padNumLeft:function(u7,u8){var u9;u9=c.get(u7,0);return((u9===" "?true:u9==="+")?true:u9==="-")?u9+S.PadLeftWith(u7.substr(1),u8-1,48):S.PadLeftWith(u7,u8,48);},plusForPos:function(u_,u$){return 0<=u_?"+"+u$:u$;},prettyPrint:function(va){var vb,vl,vm,vn,vo,vp,vr;vb=function(vc){var vd,ve,vf,vj,vk;vd=$$.String(vc);if(vd==="[object Object]"){vf=function(vg){var vh,vi;vh=vg[0];vi=vg[1];return vh+" = "+T.prettyPrint(vi);};vj=s.GetFields(vc);vk=c.map(vf,vj);ve="{"+S.concat("; ",vk)+"}";}else{ve=vd;}return ve;};vl=typeof va;if(vl=="string"){vm="\""+va+"\"";}else{if(vl=="object"){if(va instanceof $$.Array){vp=function(vq){return T.prettyPrint(vq);};vr=c.map(vp,va);vo="[|"+S.concat("; ",vr)+"|]";}else{vo=vb(va);}vn=vo;}else{vn=$$.String(va);}vm=vn;}return vm;},printArray:function(vs,vt){var vu;vu=c.map(vs,vt);return"[|"+S.concat("; ",vu)+"|]";},printArray2D:function(vv,vw){var vx;vx=i.delay(function(){var vz;vz=vw.length?vw[0].length:0;return i.map(function(vA){var vB;vB=i.delay(function(){return i.map(function(vD){return vv(c.get2D(vw,vA,vD));},d.range(0,vz-1));});return S.concat("; ",vB);},d.range(0,vw.length-1));});return"[["+S.concat("][",vx)+"]]";},printList:function(vE,vF){var vG;vG=i.map(vE,vF);return"["+S.concat("; ",vG)+"]";},spaceForPos:function(vH,vI){return 0<=vH?" "+vI:vI;},toSafe:function(vJ){return vJ==null?"":vJ;}},Queue:{Clear:function(vK){return vK.splice(0,c.length(vK));},Contains:function(vL,vM){return i.exists(function(vN){return a.Equals(vM,vN);},vL);},CopyTo:function(vO,vP,vQ){return c.blit(vO,0,vP,vQ,c.length(vO));}},Random:$.Class({Next:function(){return R.floor(R.random()*2147483648);},Next1:function(vR){return vR<0?d.FailWith("'maxValue' must be greater than zero."):R.floor(R.random()*vR);},Next2:function(vS,vT){var vU,vV;if(vS>vT){vU=d.FailWith("'minValue' cannot be greater than maxValue.");}else{vV=vT-vS;vU=vS+R.floor(R.random()*vV);}return vU;},NextBytes:function(vW){var vX;for(vX=0;vX<=c.length(vW)-1;vX++){c.set(vW,vX,R.floor(R.random()*256));}return;}},{New:function(){return $.New(this,{});}}),Ref:{decr:function($x){var $0=this,$this=this;return void($x[0]--);},incr:function($x){var $0=this,$this=this;return void($x[0]++);}},Remoting:{AjaxProvider:$.Field(function(){return V.New();}),AjaxRemotingProvider:$.Class({},{Async:function(vY,vZ){var v0,v1;v0=U.makeHeaders(vY);v1=U.makePayload(vZ);return A.Delay(function(){var v3;v3=W.get_CancellationToken();return A.Bind(v3,function(v4){return A.FromContinuations(function(v5){var v6,v7,v8,v9,v_,wc,wf,wi;v6=v5[0];v7=v5[1];v8=v5[2];v9=[true];v_=A.Register(v4,function(){return function(){var wb;if(v9[0]){v9[0]=false;wb=v8(I.New());}else{wb=null;}return wb;}();});wc=function(wd){var we;if(v9[0]){v9[0]=false;v_.Dispose();we=v6(p.Activate(q.parse(wd)));}else{we=null;}return we;};wf=function(wg){var wh;if(v9[0]){v9[0]=false;v_.Dispose();wh=v7(wg);}else{wh=null;}return wh;};wi=U.EndPoint();return U.AjaxProvider().Async(wi,v0,v1,wc,wf);});});});},Send:function(wj,wk){return A.Start(A.Ignore(X.Async(wj,wk)),{$:0});},Sync:function(wl,wm){var wn,wo,wp,wq;wn=U.EndPoint();wo=U.makeHeaders(wl);wp=U.makePayload(wm);wq=U.AjaxProvider().Sync(wn,wo,wp);return p.Activate(q.parse(wq));}}),EndPoint:$.Field(function(){return"?";}),UseHttps:function(){var wr,ws,wt,wu;try{if(!S.StartsWith(Y.location.href,"https://")){wt=S.Replace(Y.location.href,"http://","https://");U.EndPoint=function(){return wt;};ws=true;}else{ws=false;}wr=ws;}catch(wu){wr=false;}return wr;},XhrProvider:$.Class({Async:function(wv,ww,wx,wy,wz){return U.ajax(true,wv,ww,wx,wy,wz,function(){return U.ajax(true,wv,ww,wx,wy,wz,undefined);});},Sync:function(wB,wC,wD){var wE;wE=[undefined];U.ajax(false,wB,wC,wD,function(wF){wE[0]=wF;},function(wG){return d.Raise(wG);},function(){return U.ajax(false,wB,wC,wD,function(wI){wE[0]=wI;},function(wJ){return d.Raise(wJ);},undefined);});return wE[0];}},{New:function(){return $.New(this,{});}}),ajax:function($async,$url,$headers,$data,$ok,$err,$csrf){var $0=this,$this=this;var xhr=new $$.XMLHttpRequest();var csrf=$$.document.cookie.replace(new $$.RegExp("(?:(?:^|.*;)\\s*csrftoken\\s*\\=\\s*([^;]*).*$)|^.*$"),"$1");xhr.open("POST",$url,$async);if($async==true){xhr.withCredentials=true;}for(var h in $headers){xhr.setRequestHeader(h,$headers[h]);}if(csrf){xhr.setRequestHeader("x-csrftoken",csrf);}function k(){if(xhr.status==200){$ok(xhr.responseText);}else if($csrf&&xhr.status==403&&xhr.responseText=="CSRF"){$csrf();}else{var msg="Response status is not 200: ";$err(new $$.Error(msg+xhr.status));}}if("onload"in xhr){xhr.onload=xhr.onerror=xhr.onabort=k;}else{xhr.onreadystatechange=function(){if(xhr.readyState==4){k();}};}xhr.send($data);},makeHeaders:function(wK){var wL;wL={};wL["content-type"]="application/json";wL["x-websharper-rpc"]=wK;return wL;},makePayload:function(wM){return q.stringify(wM);}},Seq:{append:function(wN,wO){return h.Of(function(){var wQ,wR;wQ=f.Get(wN);wR=[true];return g.New(wQ,null,function(wS){var wT,wU,wV,wW;if(wS.s.MoveNext()){wS.c=wS.s.get_Current();wT=true;}else{wU=wS.s;!a.Equals(wU,null)?wU.Dispose():null;wS.s=null;if(wR[0]){wR[0]=false;wS.s=f.Get(wO);if(wS.s.MoveNext()){wS.c=wS.s.get_Current();wW=true;}else{wS.s.Dispose();wS.s=null;wW=false;}wV=wW;}else{wV=false;}wT=wV;}return wT;},function(wX){var wY;wY=wX.s;return!a.Equals(wY,null)?wY.Dispose():null;});});},average:function(wZ){var w0,w5,w6;w0=i.fold(function(w1){var w2,w3;w2=w1[0];w3=w1[1];return function(w4){return[w2+1,w3+w4];};},[0,0],wZ);w5=w0[1];w6=w0[0];return w5/w6;},averageBy:function(w7,w8){var w9,xc,xd;w9=i.fold(function(w_){var w$,xa;w$=w_[0];xa=w_[1];return function(xb){return[w$+1,xa+w7(xb)];};},[0,0],w8);xc=w9[1];xd=w9[0];return xc/xd;},cache:function(xe){var xf,xg,xh;xf=[];xg=[f.Get(xe)];xh=function(){var xj;xj=function(xk){var xl,xm,xn,xo;if(xk.s+1<xf.length){xk.s=xk.s+1;xk.c=xf[xk.s];xl=true;}else{xm=xg[0];if(a.Equals(xm,null)){xn=false;}else{if(xm.MoveNext()){xk.s=xk.s+1;xk.c=xm.get_Current();xf.push(xk.get_Current());xo=true;}else{xm.Dispose();xg[0]=null;xo=false;}xn=xo;}xl=xn;}return xl;};return g.New(0,null,xj,function(){});};return h.Of(xh);},choose:function(xq,xr){var xs;xs=function(xt){var xu,xv,xw;xu=xq(xt);if(xu.$==0){xv=$.New(P,{$:0});}else{xw=xu.$0;xv=e.ofArray([xw]);}return xv;};return i.collect(xs,xr);},collect:function(xx,xy){return i.concat(i.map(xx,xy));},concat:function(xz){return h.Of(function(){var xB,xC;xB=f.Get(xz);xC=function(xD){var xE,xF,xG,xH;xE=xD.s;if(a.Equals(xE,null)){if(xB.MoveNext()){xD.s=f.Get(xB.get_Current());xG=xC(xD);}else{xB.Dispose();xG=false;}xF=xG;}else{if(xE.MoveNext()){xD.c=xE.get_Current();xH=true;}else{xD.Dispose();xD.s=null;xH=xC(xD);}xF=xH;}return xF;};return g.New(null,null,xC,function(xI){var xJ;xJ=xI.s;!a.Equals(xJ,null)?xJ.Dispose():null;return!a.Equals(xB,null)?xB.Dispose():null;});});},delay:function(xK){return h.Of(function(){return f.Get(xK(null));});},empty:function(){return[];},enumFinally:function(xM,xN){var xO;xO=function(){var xQ,xR,xS,xT,xV;try{xR=f.Get(xM);}catch(xS){xN(null);xR=d.Raise(xS);}xQ=xR;xT=function(){xQ.Dispose();return xN(null);};xV=function(xW){var xX;if(xQ.MoveNext()){xW.c=xQ.get_Current();xX=true;}else{xX=false;}return xX;};return g.New(null,null,xV,xT);};return h.Of(xO);},enumUsing:function(xY,xZ){var x0;x0=function(){var x2,x3,x4,x5,x7;try{x3=f.Get(xZ(xY));}catch(x4){xY.Dispose();x3=d.Raise(x4);}x2=x3;x5=function(){x2.Dispose();return xY.Dispose();};x7=function(x8){var x9;if(x2.MoveNext()){x8.c=x2.get_Current();x9=true;}else{x9=false;}return x9;};return g.New(null,null,x7,x5);};return h.Of(x0);},enumWhile:function(x_,x$){return h.Of(function(){var yb;yb=function(yc){var yd,ye,yf,yg;yd=yc.s;if(a.Equals(yd,null)){if(x_(null)){yc.s=f.Get(x$);yf=yb(yc);}else{yf=false;}ye=yf;}else{if(yd.MoveNext()){yc.c=yd.get_Current();yg=true;}else{yd.Dispose();yc.s=null;yg=yb(yc);}ye=yg;}return ye;};return g.New(null,null,yb,function(yh){var yi;yi=yh.s;return!a.Equals(yi,null)?yi.Dispose():null;});});},exists:function(yj,yk){var yl,ym,yn;yl=f.Get(yk);try{yn=false;while(!yn?yl.MoveNext():false){yn=yj(yl.get_Current());}ym=yn;}finally{yl.Dispose!=undefined?yl.Dispose():null;}return ym;},exists2:function(yo,yp,yq){var yr,ys,yt,yu,yv;yr=f.Get(yp);try{yt=f.Get(yq);try{yv=false;while((!yv?yr.MoveNext():false)?yt.MoveNext():false){yv=(yo(yr.get_Current()))(yt.get_Current());}yu=yv;}finally{yt.Dispose!=undefined?yt.Dispose():null;}ys=yu;}finally{yr.Dispose!=undefined?yr.Dispose():null;}return ys;},filter:function(yw,yx){var yy;yy=function(){var yA,yB,yD;yA=f.Get(yx);yB=function(){return yA.Dispose();};yD=function(yE){var yF,yG,yH,yI;yF=yA.MoveNext();yG=yA.get_Current();yH=false;while(yF){if(yw(yG)){yE.c=yG;yH=true;yI=yF=false;}else{yI=yA.MoveNext()?yG=yA.get_Current():yF=false;}}return yH;};return g.New(null,null,yD,yB);};return h.Of(yy);},find:function(yJ,yK){var yL,yM,yN;yL=i.tryFind(yJ,yK);if(yL.$==0){yM=d.FailWith("KeyNotFoundException");}else{yN=yL.$0;yM=yN;}return yM;},findBack:function(yO,yP){var yQ,yR,yS;yQ=k.tryFindBack(yO,c.ofSeq(yP));if(yQ.$==0){yR=d.FailWith("KeyNotFoundException");}else{yS=yQ.$0;yR=yS;}return yR;},findIndex:function(yT,yU){var yV,yW,yX;yV=i.tryFindIndex(yT,yU);if(yV.$==0){yW=d.FailWith("KeyNotFoundException");}else{yX=yV.$0;yW=yX;}return yW;},findIndexBack:function(yY,yZ){var y0,y1,y2;y0=k.tryFindIndexBack(yY,c.ofSeq(yZ));if(y0.$==0){y1=d.FailWith("KeyNotFoundException");}else{y2=y0.$0;y1=y2;}return y1;},fold:function(y3,y4,y5){var y6,y7,y8;y6=y4;y7=f.Get(y5);try{while(y7.MoveNext()){y6=(y3(y6))(y7.get_Current());}y8=y6;}finally{y7.Dispose!=undefined?y7.Dispose():null;}return y8;},fold2:function(y9,y_,y$,za){return c.fold2(y9,y_,c.ofSeq(y$),c.ofSeq(za));},foldBack:function(zb,zc,zd){return c.foldBack(zb,c.ofSeq(zc),zd);},foldBack2:function(ze,zf,zg,zh){return c.foldBack2(ze,c.ofSeq(zf),c.ofSeq(zg),zh);},forall:function(zi,zj){return!i.exists(function(zk){return!zi(zk);},zj);},forall2:function(zl,zm,zn){return!i.exists2(function(zo){return function(zp){return!(zl(zo))(zp);};},zm,zn);},head:function(zq){var zr,zs;zr=f.Get(zq);try{zs=zr.MoveNext()?zr.get_Current():j.insufficient();}finally{zr.Dispose!=undefined?zr.Dispose():null;}return zs;},indexed:function(zt){return i.mapi(function(zu){return function(zv){return[zu,zv];};},zt);},init:function(zw,zx){return i.take(zw,i.initInfinite(zx));},initInfinite:function(zy){var zz;zz=function(){var zB;zB=function(zC){zC.c=zy(zC.s);zC.s=zC.s+1;return true;};return g.New(0,null,zB,function(){});};return h.Of(zz);},isEmpty:function(zE){var zF,zG;zF=f.Get(zE);try{zG=!zF.MoveNext();}finally{zF.Dispose!=undefined?zF.Dispose():null;}return zG;},iter:function(zH,zI){return i.iteri(function(){return function(zK){return zH(zK);};},zI);},iter2:function(zL,zM,zN){var zO,zP,zQ,zR;zO=f.Get(zM);try{zQ=f.Get(zN);try{while(zO.MoveNext()?zQ.MoveNext():false){(zL(zO.get_Current()))(zQ.get_Current());}}finally{zQ.Dispose!=undefined?zQ.Dispose():null;}zP=zR;}finally{zO.Dispose!=undefined?zO.Dispose():null;}return zP;},iteri:function(zS,zT){var zU,zV,zW;zU=0;zV=f.Get(zT);try{while(zV.MoveNext()){(zS(zU))(zV.get_Current());zU=zU+1;}}finally{zV.Dispose!=undefined?zV.Dispose():null;}return zW;},iteri2:function(zX,zY,zZ){return c.iteri2(zX,c.ofSeq(zY),c.ofSeq(zZ));},length:function(z0){var z1,z2,z3;z1=0;z2=f.Get(z0);try{while(z2.MoveNext()){z1=z1+1;}z3=z1;}finally{z2.Dispose!=undefined?z2.Dispose():null;}return z3;},map:function(z4,z5){var z6;z6=function(){var z8,z9,z$;z8=f.Get(z5);z9=function(){return z8.Dispose();};z$=function(Aa){var Ab;if(z8.MoveNext()){Aa.c=z4(z8.get_Current());Ab=true;}else{Ab=false;}return Ab;};return g.New(null,null,z$,z9);};return h.Of(z6);},map2:function(Ac,Ad,Ae){var Af;Af=function(){var Ah,Ai,Aj,Al;Ah=f.Get(Ad);Ai=f.Get(Ae);Aj=function(){Ah.Dispose();return Ai.Dispose();};Al=function(Am){var An;if(Ah.MoveNext()?Ai.MoveNext():false){Am.c=(Ac(Ah.get_Current()))(Ai.get_Current());An=true;}else{An=false;}return An;};return g.New(null,null,Al,Aj);};return h.Of(Af);},map3:function(Ao,Ap,Aq,Ar){var As;As=function(){var Au,Av,Aw,Ax,Az;Au=f.Get(Ap);Av=f.Get(Aq);Aw=f.Get(Ar);Ax=function(){Au.Dispose();Av.Dispose();return Aw.Dispose();};Az=function(AA){var AB;if((Au.MoveNext()?Av.MoveNext():false)?Aw.MoveNext():false){AA.c=((Ao(Au.get_Current()))(Av.get_Current()))(Aw.get_Current());AB=true;}else{AB=false;}return AB;};return g.New(null,null,Az,Ax);};return h.Of(As);},mapFold:function(AC,AD,AE){var AF,AG,AH;AF=k.mapFold(AC,AD,i.toArray(AE));AG=AF[0];AH=AF[1];return[AG,AH];},mapFoldBack:function(AI,AJ,AK){var AL,AM,AN;AL=k.mapFoldBack(AI,i.toArray(AJ),AK);AM=AL[0];AN=AL[1];return[AM,AN];},mapi:function(AO,AP){return i.map2(AO,i.initInfinite(function(AQ){return AQ;}),AP);},mapi2:function(AR,AS,AT){return i.map3(AR,i.initInfinite(function(AU){return AU;}),AS,AT);},max:function(AV){return i.reduce(function(AW){return function(AX){return a.Compare(AW,AX)>=0?AW:AX;};},AV);},maxBy:function(AY,AZ){return i.reduce(function(A0){return function(A1){return a.Compare(AY(A0),AY(A1))>=0?A0:A1;};},AZ);},min:function(A2){return i.reduce(function(A3){return function(A4){return a.Compare(A3,A4)<=0?A3:A4;};},A2);},minBy:function(A5,A6){return i.reduce(function(A7){return function(A8){return a.Compare(A5(A7),A5(A8))<=0?A7:A8;};},A6);},nth:function(A9,A_){var A$,Ba,Bb;A9<0?d.FailWith("negative index requested"):null;A$=-1;Ba=f.Get(A_);try{while(A$<A9){!Ba.MoveNext()?j.insufficient():null;A$=A$+1;}Bb=Ba.get_Current();}finally{Ba.Dispose!=undefined?Ba.Dispose():null;}return Bb;},permute:function(Bc,Bd){return i.delay(function(){return c.permute(Bc,c.ofSeq(Bd));});},pick:function(Bf,Bg){var Bh,Bi,Bj;Bh=i.tryPick(Bf,Bg);if(Bh.$==0){Bi=d.FailWith("KeyNotFoundException");}else{Bj=Bh.$0;Bi=Bj;}return Bi;},readOnly:function(Bk){return h.Of(function(){return f.Get(Bk);});},reduce:function(Bm,Bn){var Bo,Bp,Bq;Bo=f.Get(Bn);try{!Bo.MoveNext()?d.FailWith("The input sequence was empty"):null;Bq=Bo.get_Current();while(Bo.MoveNext()){Bq=(Bm(Bq))(Bo.get_Current());}Bp=Bq;}finally{Bo.Dispose!=undefined?Bo.Dispose():null;}return Bp;},reduceBack:function(Br,Bs){return c.reduceBack(Br,c.ofSeq(Bs));},replicate:function(Bt,Bu){Bt<0?j.nonNegative():null;return i.delay(function(){return i.map(function(){return Bu;},d.range(0,Bt-1));});},rev:function(Bx){return i.delay(function(){var Bz;Bz=i.toArray(Bx).slice().reverse();return Bz;});},scan:function(BA,BB,BC){var BD;BD=function(){var BF,BG,BI;BF=f.Get(BC);BG=function(){return BF.Dispose();};BI=function(BJ){var BK,BL;if(BJ.s){if(BF.MoveNext()){BJ.c=(BA(BJ.get_Current()))(BF.get_Current());BL=true;}else{BL=false;}BK=BL;}else{BJ.c=BB;BJ.s=true;BK=true;}return BK;};return g.New(false,null,BI,BG);};return h.Of(BD);},scanBack:function(BM,BN,BO){return i.delay(function(){return c.scanBack(BM,c.ofSeq(BN),BO);});},skip:function(BQ,BR){return h.Of(function(){var BT;BT=f.Get(BR);return g.New(true,null,function(BU){var BV,BW,BX;if(BU.s){for(BW=1;BW<=BQ;BW++){!BT.MoveNext()?j.insufficient():null;}BV=void(BU.s=false);}else{BV=null;}if(BT.MoveNext()){BU.c=BT.get_Current();BX=true;}else{BX=false;}return BX;},function(){return BT.Dispose();});});},skipWhile:function(BZ,B0){return h.Of(function(){var B2;B2=f.Get(B0);return g.New(true,null,function(B3){var B4,B5,B6,B7,B8,B9;if(B3.s){B5=true;B6=false;while(B5){if(B2.MoveNext()){B7=!BZ(B2.get_Current())?B5=false:null;}else{B5=false;B7=B6=true;}}B3.s=false;if(B6){B8=false;}else{B3.c=B2.get_Current();B8=true;}B4=B8;}else{if(B2.MoveNext()){B3.c=B2.get_Current();B9=true;}else{B9=false;}B4=B9;}return B4;},function(){return B2.Dispose();});});},sort:function(B$){return i.sortBy(function(Ca){return Ca;},B$);},sortBy:function(Cb,Cc){return i.delay(function(){var Ce;Ce=c.ofSeq(Cc);c.sortInPlaceBy(Cb,Ce);return Ce;});},sortByDescending:function(Cf,Cg){return i.delay(function(){var Ci;Ci=c.ofSeq(Cg);k.sortInPlaceByDescending(Cf,Ci);return Ci;});},sortDescending:function(Cj){return i.sortByDescending(function(Ck){return Ck;},Cj);},sortWith:function(Cl,Cm){return i.delay(function(){var Co;Co=c.ofSeq(Cm);c.sortInPlaceWith(Cl,Co);return Co;});},splitInto:function(Cp,Cq){Cp<=0?d.FailWith("Count must be positive"):null;return i.delay(function(){var Cs;Cs=k.splitInto(Cp,c.ofSeq(Cq));return Cs;});},sum:function(Ct){return i.fold(function(Cu){return function(Cv){return Cu+Cv;};},0,Ct);},sumBy:function(Cw,Cx){return i.fold(function(Cy){return function(Cz){return Cy+Cw(Cz);};},0,Cx);},tail:function(CA){return i.skip(1,CA);},take:function(CB,CC){CB<0?j.nonNegative():null;return h.Of(function(){var CE;CE=[f.Get(CC)];return g.New(0,null,function(CF){var CG,CH,CI,CJ,CK;CF.s=CF.s+1;if(CF.s>CB){CG=false;}else{CH=CE[0];if(a.Equals(CH,null)){CI=j.insufficient();}else{if(CH.MoveNext()){CF.c=CH.get_Current();if(CF.s===CB){CH.Dispose();CK=void(CE[0]=null);}else{CK=null;}CJ=true;}else{CH.Dispose();CE[0]=null;CJ=j.insufficient();}CI=CJ;}CG=CI;}return CG;},function(){var CM;CM=CE[0];return!a.Equals(CM,null)?CM.Dispose():null;});});},takeWhile:function(CN,CO){return i.delay(function(){return i.enumUsing(f.Get(CO),function(CQ){return i.enumWhile(function(){return CQ.MoveNext()?CN(CQ.get_Current()):false;},i.delay(function(){return[CQ.get_Current()];}));});});},toArray:function(CT){var CU,CV,CW,CX;CU=[];CV=f.Get(CT);try{while(CV.MoveNext()){CX=CV.get_Current();CU.push(CX);}}finally{CV.Dispose!=undefined?CV.Dispose():null;}return CU.slice(0);},toList:function(CY){return e.ofSeq(CY);},tryFind:function(CZ,C0){var C1,C2,C3,C4;C1=f.Get(C0);try{C3={$:0};while(C3.$==0?C1.MoveNext():false){C4=C1.get_Current();CZ(C4)?C3={$:1,$0:C4}:null;}C2=C3;}finally{C1.Dispose!=undefined?C1.Dispose():null;}return C2;},tryFindIndex:function(C5,C6){var C7,C8,C9,C_,C$;C7=f.Get(C6);try{C9=true;C_=0;while(C9?C7.MoveNext():false){C$=C7.get_Current();C5(C$)?C9=false:C_=C_+1;}C8=C9?{$:0}:{$:1,$0:C_};}finally{C7.Dispose!=undefined?C7.Dispose():null;}return C8;},tryPick:function(Da,Db){var Dc,Dd,De;Dc=f.Get(Db);try{De={$:0};while(a.Equals(De,{$:0})?Dc.MoveNext():false){De=Da(Dc.get_Current());}Dd=De;}finally{Dc.Dispose!=undefined?Dc.Dispose():null;}return Dd;},zip:function(Df,Dg){return i.map2(function(Dh){return function(Di){return[Dh,Di];};},Df,Dg);},zip3:function(Dj,Dk,Dl){return i.map2(function(Dm){return function(Dn){var Do,Dp;Do=Dn[0];Dp=Dn[1];return[Dm,Do,Dp];};},Dj,i.zip(Dk,Dl));}},Slice:{array:function(Dq,Dr,Ds){var Dt,Du,Dv,Dw,Dx,Dy,Dz,DA;Dt=[Dr,Ds];if(Dt[0].$==0){if(Dt[1].$==1){Dw=Dt[1].$0;Dv=Dq.slice(0,Dw+1);}else{Dv=[];}Du=Dv;}else{if(Dt[1].$==0){Dy=Dt[0].$0;Dx=Dq.slice(Dy);}else{Dz=Dt[1].$0;DA=Dt[0].$0;Dx=Dq.slice(DA,Dz+1);}Du=Dx;}return Du;},array2D:function(DB,DC,DD,DE,DF){var DG,DH,DI,DJ,DK,DL,DM,DN,DO,DP,DQ,DR,DS,DT;if(DC.$==1){DI=DC.$0;DH=DI;}else{DH=0;}DG=DH;if(DE.$==1){DL=DE.$0;DK=DL;}else{DK=0;}DJ=DK;if(DD.$==1){DO=DD.$0;DN=DO;}else{DN=DB.length-1;}DM=DN;if(DF.$==1){DR=DF.$0;DQ=DR;}else{DQ=(DB.length?DB[0].length:0)-1;}DP=DQ;DS=DM-DG+1;DT=DP-DJ+1;return c.sub2D(DB,DG,DJ,DS,DT);},array2Dfix1:function(DU,DV,DW,DX){var DY,DZ,D0,D1,D2,D3,D4,D5,D6;if(DW.$==1){D0=DW.$0;DZ=D0;}else{DZ=0;}DY=DZ;if(DX.$==1){D3=DX.$0;D2=D3;}else{D2=(DU.length?DU[0].length:0)-1;}D1=D2;D4=D1-DY+1;D5=b(D4);for(D6=0;D6<=D4-1;D6++){c.set(D5,D6,c.get2D(DU,DV,DY+D6));}return D5;},array2Dfix2:function(D7,D8,D9,D_){var D$,Ea,Eb,Ec,Ed,Ee,Ef,Eg,Eh;if(D8.$==1){Eb=D8.$0;Ea=Eb;}else{Ea=0;}D$=Ea;if(D9.$==1){Ee=D9.$0;Ed=Ee;}else{Ed=D7.length-1;}Ec=Ed;Ef=Ec-D$+1;Eg=b(Ef);for(Eh=0;Eh<=Ef-1;Eh++){c.set(Eg,Eh,c.get2D(D7,D$+Eh,D_));}return Eg;},setArray:function(Ei,Ej,Ek,El){var Em,En,Eo,Ep,Eq,Er;if(Ej.$==1){Eo=Ej.$0;En=Eo;}else{En=0;}Em=En;if(Ek.$==1){Er=Ek.$0;Eq=Er;}else{Eq=Ei.length-1;}Ep=Eq;return c.setSub(Ei,Em,Ep-Em+1,El);},setArray2D:function(Es,Et,Eu,Ev,Ew,Ex){var Ey,Ez,EA,EB,EC,ED,EE,EF,EG,EH,EI,EJ;if(Et.$==1){EA=Et.$0;Ez=EA;}else{Ez=0;}Ey=Ez;if(Ev.$==1){ED=Ev.$0;EC=ED;}else{EC=0;}EB=EC;if(Eu.$==1){EG=Eu.$0;EF=EG;}else{EF=Es.length-1;}EE=EF;if(Ew.$==1){EJ=Ew.$0;EI=EJ;}else{EI=(Es.length?Es[0].length:0)-1;}EH=EI;return c.setSub2D(Es,Ey,EB,EE-Ey+1,EH-EB+1,Ex);},setArray2Dfix1:function(EK,EL,EM,EN,EO){var EP,EQ,ER,ES,ET,EU,EV,EW;if(EM.$==1){ER=EM.$0;EQ=ER;}else{EQ=0;}EP=EQ;if(EN.$==1){EU=EN.$0;ET=EU;}else{ET=(EK.length?EK[0].length:0)-1;}ES=ET;EV=ES-EP+1;for(EW=0;EW<=EV-1;EW++){c.set2D(EK,EL,EP+EW,c.get(EO,EW));}return;},setArray2Dfix2:function(EX,EY,EZ,E0,E1){var E2,E3,E4,E5,E6,E7,E8,E9;if(EY.$==1){E4=EY.$0;E3=E4;}else{E3=0;}E2=E3;if(EZ.$==1){E7=EZ.$0;E6=E7;}else{E6=EX.length-1;}E5=E6;E8=E5-E2+1;for(E9=0;E9<=E8-1;E9++){c.set2D(EX,E2+E9,E0,c.get(E1,E9));}return;},string:function(E_,E$,Fa){var Fb,Fc,Fd,Fe,Ff,Fg,Fh,Fi;Fb=[E$,Fa];if(Fb[0].$==0){if(Fb[1].$==1){Fe=Fb[1].$0;Fd=E_.slice(0,Fe+1);}else{Fd="";}Fc=Fd;}else{if(Fb[1].$==0){Fg=Fb[0].$0;Ff=E_.slice(Fg);}else{Fh=Fb[1].$0;Fi=Fb[0].$0;Ff=E_.slice(Fi,Fh+1);}Fc=Ff;}return Fc;}},Stack:{Clear:function(Fj){return Fj.splice(0,c.length(Fj));},Contains:function(Fk,Fl){return i.exists(function(Fm){return a.Equals(Fl,Fm);},Fk);},CopyTo:function(Fn,Fo,Fp){return c.blit(Fo,0,Fo,Fp,c.length(Fn));}},Strings:{Compare:function(Fq,Fr){return d.Compare(Fq,Fr);},CopyTo:function(Fs,Ft,Fu,Fv,Fw){return c.blit(S.ToCharArray(Fs),Ft,Fu,Fv,Fw);},EndsWith:function($x,$s){var $0=this,$this=this;return $x.substring($x.length-$s.length)==$s;},Filter:function(Fx,Fy){var Fz,FB;Fz=function(FA){return Fx(FA)?{$:1,$0:Z.fromCharCode(FA)}:{$:0};};FB=i.choose(Fz,Fy);return c.ofSeq(FB).join("");},IndexOf:function($s,$c,$i){var $0=this,$this=this;return $s.indexOf($$.String.fromCharCode($c),$i);},Insert:function($x,$index,$s){var $0=this,$this=this;return $x.substring(0,$index-1)+$s+$x.substring($index);},IsNullOrEmpty:function($x){var $0=this,$this=this;return $x==null||$x=="";},Join:function($sep,$values){var $0=this,$this=this;return $values.join($sep);},LastIndexOf:function($s,$c,$i){var $0=this,$this=this;return $s.lastIndexOf($$.String.fromCharCode($c),$i);},PadLeft:function(FC,FD){return S.PadLeftWith(FC,FD,32);},PadLeftWith:function($s,$n,$c){var $0=this,$this=this;return $n>$s.length?$$.Array($n-$s.length+1).join($$.String.fromCharCode($c))+$s:$s;},PadRight:function(FE,FF){return S.PadRightWith(FE,FF,32);},PadRightWith:function($s,$n,$c){var $0=this,$this=this;return $n>$s.length?$s+$$.Array($n-$s.length+1).join($$.String.fromCharCode($c)):$s;},RegexEscape:function($s){var $0=this,$this=this;return $s.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&");},Remove:function($x,$ix,$ct){var $0=this,$this=this;return $x.substring(0,$ix)+$x.substring($ix+$ct);},Replace:function(FG,FH,FI){var FJ;FJ=function(FK){var FL,FM,FN,FO;FL=FK.indexOf(FH);if(FL!==-1){FN=S.ReplaceOnce(FK,FH,FI);FO=FL+FI.length;FM=S.Substring(FN,0,FL+FI.length)+FJ(FN.substring(FO));}else{FM=FK;}return FM;};return FJ(FG);},ReplaceChar:function(FP,FQ,FR){return S.Replace(FP,Z.fromCharCode(FQ),Z.fromCharCode(FR));},ReplaceOnce:function($string,$search,$replace){var $0=this,$this=this;return $string.replace($search,$replace);},Split:function(FS,FT,FU){var FV;FV=S.SplitWith(FS,FT);return FU===1?c.filter(function(FW){return FW!=="";},FV):FV;},SplitChars:function(FX,FY,FZ){var F0;F0="["+S.RegexEscape(Z.fromCharCode.apply(undefined,FY))+"]";return S.Split(FX,new _0(F0),FZ);},SplitStrings:function(F1,F2,F3){var F4;F4=S.concat("|",c.map(function(F5){return S.RegexEscape(F5);},F2));return S.Split(F1,new _0(F4),F3);},SplitWith:function($str,$pat){var $0=this,$this=this;return $str.split($pat);},StartsWith:function($t,$s){var $0=this,$this=this;return $t.substring(0,$s.length)==$s;},Substring:function($s,$ix,$ct){var $0=this,$this=this;return $s.substr($ix,$ct);},ToCharArray:function(F6){return c.init(F6.length,function(F7){return F6.charCodeAt(F7);});},ToCharArrayRange:function(F8,F9,F_){return c.init(F_,function(F$){return F8.charCodeAt(F9+F$);});},Trim:function($s){var $0=this,$this=this;return $s.replace(/^\s+/,"").replace(/\s+$/,"");},TrimEnd:function($s){var $0=this,$this=this;return $s.replace(/\s+$/,"");},TrimStart:function($s){var $0=this,$this=this;return $s.replace(/^\s+/,"");},collect:function(Ga,Gb){return c.init(Gb.length,function(Gc){return Ga(Gb.charCodeAt(Gc));}).join("");},concat:function(Gd,Ge){return i.toArray(Ge).join(Gd);},exists:function(Gf,Gg){return i.exists(Gf,S.protect(Gg));},forall:function(Gh,Gi){return i.forall(Gh,S.protect(Gi));},init:function(Gj,Gk){return c.init(Gj,Gk).join("");},iter:function(Gl,Gm){return i.iter(Gl,S.protect(Gm));},iteri:function(Gn,Go){return i.iteri(Gn,S.protect(Go));},length:function(Gp){return S.protect(Gp).length;},map:function(Gq,Gr){return S.collect(function(Gs){return Z.fromCharCode(Gq(Gs));},S.protect(Gr));},mapi:function(Gt,Gu){return i.toArray(i.mapi(function(Gv){return function(Gw){return Z.fromCharCode((Gt(Gv))(Gw));};},Gu)).join("");},protect:function(Gx){return Gx===null?"":Gx;},replicate:function(Gy,Gz){return S.init(Gy,function(){return Gz;});}},Unchecked:{Compare:function(GB,GC){var GD,GN,GO,GP,GQ;GD=function(GE){return function(GF){var GG;GG=[0];s.ForEach(GE,function(GH){var GI,GJ;if(!GE.hasOwnProperty(GH)){GI=false;}else{if(!GF.hasOwnProperty(GH)){GG[0]=1;GJ=true;}else{GG[0]=a.Compare(GE[GH],GF[GH]);GJ=GG[0]!==0;}GI=GJ;}return GI;});GG[0]===0?s.ForEach(GF,function(GK){var GL,GM;if(!GF.hasOwnProperty(GK)){GL=false;}else{if(!GE.hasOwnProperty(GK)){GG[0]=-1;GM=true;}else{GM=false;}GL=GM;}return GL;}):null;return GG[0];};};if(GB===GC){GN=0;}else{GO=typeof GB;if(GO==="function"){GP=d.FailWith("Cannot compare function values.");}else{if(GO==="boolean"){GP=GB<GC?-1:1;}else{if(GO==="number"){GP=GB<GC?-1:1;}else{if(GO==="string"){GP=GB<GC?-1:1;}else{if(GO==="object"){GP=GB===null?-1:GC===null?1:"CompareTo"in GB?GB.CompareTo(GC):(GB instanceof b?GC instanceof b:false)?a.compareArrays(GB,GC):(GB instanceof J?GC instanceof J:false)?a.compareDates(GB,GC):(GD(GB))(GC);}else{GQ=typeof GC;GP=GQ==="undefined"?0:-1;}}}}}GN=GP;}return GN;},Equals:function(GR,GS){var GT,GZ,G0;GT=function(GU){return function(GV){var GW;GW=[true];s.ForEach(GU,function(GX){GW[0]=!GU.hasOwnProperty(GX)?true:GV.hasOwnProperty(GX)?a.Equals(GU[GX],GV[GX]):false;return!GW[0];});GW[0]?s.ForEach(GV,function(GY){GW[0]=!GV.hasOwnProperty(GY)?true:GU.hasOwnProperty(GY);return!GW[0];}):null;return GW[0];};};if(GR===GS){GZ=true;}else{G0=typeof GR;GZ=G0==="object"?(((GR===null?true:GR===undefined)?true:GS===null)?true:GS===undefined)?false:"Equals"in GR?GR.Equals(GS):(GR instanceof b?GS instanceof b:false)?a.arrayEquals(GR,GS):(GR instanceof J?GS instanceof J:false)?a.dateEquals(GR,GS):(GT(GR))(GS):false;}return GZ;},Hash:function(G1){var G2;G2=typeof G1;return G2==="function"?0:G2==="boolean"?G1?1:0:G2==="number"?G1:G2==="string"?a.hashString(G1):G2==="object"?G1==null?0:G1 instanceof b?a.hashArray(G1):a.hashObject(G1):0;},arrayEquals:function(G3,G4){var G5,G6,G7;if(c.length(G3)===c.length(G4)){G6=true;G7=0;while(G6?G7<c.length(G3):false){!a.Equals(c.get(G3,G7),c.get(G4,G7))?G6=false:null;G7=G7+1;}G5=G6;}else{G5=false;}return G5;},compareArrays:function(G8,G9){var G_,G$,Ha,Hb;if(c.length(G8)<c.length(G9)){G_=-1;}else{if(c.length(G8)>c.length(G9)){G$=1;}else{Ha=0;Hb=0;while(Ha===0?Hb<c.length(G8):false){Ha=a.Compare(c.get(G8,Hb),c.get(G9,Hb));Hb=Hb+1;}G$=Ha;}G_=G$;}return G_;},compareDates:function(Hc,Hd){return d.Compare(Hc.getTime(),Hd.getTime());},dateEquals:function(He,Hf){return He.getTime()===Hf.getTime();},hashArray:function(Hg){var Hh,Hi;Hh=-34948909;for(Hi=0;Hi<=c.length(Hg)-1;Hi++){Hh=a.hashMix(Hh,a.Hash(c.get(Hg,Hi)));}return Hh;},hashMix:function(Hj,Hk){return(Hj<<5)+Hj+Hk;},hashObject:function(Hl){var Hm,Hn,Hq;if("GetHashCode"in Hl){Hm=Hl.GetHashCode();}else{Hn=function(Ho,Hp){return a.hashMix(Ho,Hp);};Hq=[0];s.ForEach(Hl,function(Hr){Hq[0]=Hn(Hn(Hq[0],a.hashString(Hr)),a.Hash(Hl[Hr]));return false;});Hm=Hq[0];}return Hm;},hashString:function(Hs){var Ht,Hu,Hv;if(Hs===null){Ht=0;}else{Hu=5381;for(Hv=0;Hv<=Hs.length-1;Hv++){Hu=a.hashMix(Hu,Hs.charCodeAt(Hv)<<0);}Ht=Hu;}return Ht;}},Util:{addListener:function(Hw,Hx){Hw.Subscribe(G.observer(Hx));},observer:function(Hy){return{OnCompleted:function(){},OnError:function(){},OnNext:Hy};},subscribeTo:function(HB,HC){return HB.Subscribe(G.observer(HC));}}}});$.OnInit(function(){a=$.Safe($$.WebSharper.Unchecked);b=$.Safe($$.Array);c=$.Safe($$.WebSharper.Arrays);d=$.Safe($$.WebSharper.Operators);e=$.Safe($$.WebSharper.List);f=$.Safe($$.WebSharper.Enumerator);g=$.Safe(f.T);h=$.Safe($$.WebSharper.Enumerable);i=$.Safe($$.WebSharper.Seq);j=$.Safe($$.Seq);k=$.Safe($$.Arrays);l=$.Safe($$.WebSharper.Ref);m=$.Safe($$.WebSharper.Activator);n=$.Safe($$.document);o=$.Safe($$.jQuery);p=$.Safe($$.WebSharper.Json);q=$.Safe($$.JSON);r=$.Safe($$.WebSharper.JavaScript);s=$.Safe(r.JSModule);t=$.Safe($$.WebSharper.AggregateException);u=$.Safe($$.WebSharper.Exception);v=$.Safe($$.WebSharper.ArgumentException);w=$.Safe($$.Number);x=$.Safe($$.WebSharper.IndexOutOfRangeException);y=$.Safe($$.List);z=$.Safe($$.WebSharper.Arrays2D);A=$.Safe($$.WebSharper.Concurrency);B=$.Safe($$.WebSharper.Option);C=$.Safe($$.clearTimeout);D=$.Safe($$.setTimeout);E=$.Safe($$.WebSharper.CancellationTokenSource);F=$.Safe($$.WebSharper.Char);G=$.Safe($$.WebSharper.Util);H=$.Safe($$.WebSharper.Lazy);I=$.Safe($$.WebSharper.OperationCanceledException);J=$.Safe($$.Date);K=$.Safe($$.console);L=$.Safe(A.Scheduler);M=$.Safe($$.WebSharper.HtmlContentExtensions);N=$.Safe(M.SingleNode);O=$.Safe($$.WebSharper.InvalidOperationException);P=$.Safe(e.T);Q=$.Safe($$.WebSharper.MatchFailureException);R=$.Safe($$.Math);S=$.Safe($$.WebSharper.Strings);T=$.Safe($$.WebSharper.PrintfHelpers);U=$.Safe($$.WebSharper.Remoting);V=$.Safe(U.XhrProvider);W=$.Safe($$.WebSharper.AsyncProxy);X=$.Safe(U.AjaxRemotingProvider);Y=$.Safe($$.window);Z=$.Safe($$.String);return _0=$.Safe($$.RegExp);});$.OnLoad(function(){$.Inherit(t,u);$.Inherit(v,u);$.Inherit(x,u);$.Inherit(O,u);$.Inherit(Q,u);$.Inherit(I,u);U.EndPoint();U.AjaxProvider();A.scheduler();A.defCTS();A.GetCT();m.Activate();return;});}());

(function(){var $$=this,$=this.IntelliFactory.Runtime,a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C;$.Define($$,{WebSharper:{Collections:{BalancedTree:{Add:function(D,E){return b.Put(function(){return function(G){return G;};},D,E);},Branch:function(H,I,J){return{Node:H,Left:I,Right:J,Height:1+c.Max(I==null?0:I.Height,J==null?0:J.Height),Count:1+(I==null?0:I.Count)+(J==null?0:J.Count)};},Build:function(K,L,M){var N,O,P,Q,R;N=M-L+1;if(N<=0){O=null;}else{P=(L+M)/2>>0;Q=b.Build(K,L,P-1);R=b.Build(K,P+1,M);O=b.Branch(d.get(K,P),Q,R);}return O;},Contains:function(S,T){return!((b.Lookup(S,T))[0]==null);},Enumerate:function(U,V){var W;W=function(X){var Y,Z,_0,_1,_2,_3,_4;Y=X[0];Z=X[1];if(Y==null){if(Z.$==1){_2=Z.$0[0];_3=Z.$1;_4=Z.$0[1];_1={$:1,$0:[_2,[_4,_3]]};}else{_1={$:0};}_0=_1;}else{_0=U?W([Y.Right,$.New(g,{$:1,$0:[Y.Node,Y.Left],$1:Z})]):W([Y.Left,$.New(g,{$:1,$0:[Y.Node,Y.Right],$1:Z})]);}return _0;};return e.unfold(W,[V,$.New(g,{$:0})]);},Lookup:function(_5,_6){var _7,_8,_9,_,ba,bb;_7=[];_8=_6;_9=true;while(_9){if(_8==null){_=_9=false;}else{ba=c.Compare(_5,_8.Node);if(ba===0){bb=_9=false;}else{if(ba===1){_7.unshift([true,_8.Node,_8.Left]);bb=_8=_8.Right;}else{_7.unshift([false,_8.Node,_8.Right]);bb=_8=_8.Left;}}_=bb;}}return[_8,_7];},OfSeq:function(bb){var bc;bc=d.sort(h.toArray(e.distinct(bb)));return b.Build(bc,0,bc.length-1);},Put:function(bd,be,bf){var bg,bh,bi;bg=b.Lookup(be,bf);bh=bg[0];bi=bg[1];return bh==null?b.Rebuild(bi,b.Branch(be,null,null)):b.Rebuild(bi,b.Branch((bd(bh.Node))(be),bh.Left,bh.Right));},Rebuild:function(bj,bk){var bl,bn,bo,bp,bq,br,bs,bt,bu,bv,bw,bx,by,bz,bA;bl=function(bm){return bm==null?0:bm.Height;};bn=bk;for(bo=0;bo<=d.length(bj)-1;bo++){bp=d.get(bj,bo);if(bp[0]){br=bp[1];bs=bp[2];if(bl(bn)>bl(bs)+1){if(bl(bn.Left)===bl(bn.Right)+1){bv=bn.Left;bu=b.Branch(bv.Node,b.Branch(br,bs,bv.Left),b.Branch(bn.Node,bv.Right,bn.Right));}else{bu=b.Branch(bn.Node,b.Branch(br,bs,bn.Left),bn.Right);}bt=bu;}else{bt=b.Branch(br,bs,bn);}bq=bt;}else{bw=bp[1];bx=bp[2];if(bl(bn)>bl(bx)+1){if(bl(bn.Right)===bl(bn.Left)+1){bA=bn.Right;bz=b.Branch(bA.Node,b.Branch(bn.Node,bn.Left,bA.Left),b.Branch(bw,bA.Right,bx));}else{bz=b.Branch(bn.Node,bn.Left,b.Branch(bw,bn.Right,bx));}by=bz;}else{by=b.Branch(bw,bn,bx);}bq=by;}bn=bq;}return bn;},Remove:function(bB,bC){var bD,bE,bF,bG,bH,bI,bJ,bK,bL;bD=b.Lookup(bB,bC);bE=bD[0];bF=bD[1];if(bE==null){bG=bC;}else{if(bE.Right==null){bH=b.Rebuild(bF,bE.Left);}else{if(bE.Left==null){bI=b.Rebuild(bF,bE.Right);}else{bJ=h.append(b.Enumerate(false,bE.Left),b.Enumerate(false,bE.Right));bK=h.toArray(bJ);bL=b.Build(bK,0,bK.length-1);bI=b.Rebuild(bF,bL);}bH=bI;}bG=bH;}return bG;},TryFind:function(bM,bN){var bO;bO=(b.Lookup(bM,bN))[0];return bO==null?{$:0}:{$:1,$0:bO.Node};}},Dictionary:$.Class({Add:function(bP,bQ){var bR,bS;bR=this.hash.call(null,bP);if(this.data.hasOwnProperty(bR)){bS=c.FailWith("An item with the same key has already been added.");}else{this.data[bR]={K:bP,V:bQ};bS=void(this.count=this.count+1);}return bS;},Clear:function(){this.data={};this.count=0;return;},ContainsKey:function(bT){return this.data.hasOwnProperty(this.hash.call(null,bT));},GetEnumerator:function(){var bU;bU=j.GetFieldValues(this.data);return k.Get(bU);},Remove:function(bV){var bW,bX;bW=this.hash.call(null,bV);if(this.data.hasOwnProperty(bW)){j.Delete(this.data,bW);this.count=this.count-1;bX=true;}else{bX=false;}return bX;},get_Item:function(bY){var bZ,b0,b1;bZ=this.hash.call(null,bY);if(this.data.hasOwnProperty(bZ)){b1=this.data[bZ];b0=b1.V;}else{b0=l.notPresent();}return b0;},set_Item:function(b2,b3){var b4;b4=this.hash.call(null,b2);!this.data.hasOwnProperty(b4)?void(this.count=this.count+1):null;this.data[b4]={K:b2,V:b3};return;}},{New:function(b5){return $.New(this,m.New4(b5,function(b6){return function(b7){return n.Equals(b6,b7);};},function(b8){return n.Hash(b8);}));},New1:function(b9,b_){return $.New(this,m.New4(b9,function(b$){return function(ca){return b_.Equals(b$,ca);};},function(cb){return b_.GetHashCode(cb);}));},New11:function(cc,cd){return $.New(this,m.New3(cd));},New12:function(){return $.New(this,m.New4([],function(ce){return function(cf){return n.Equals(ce,cf);};},function(cg){return n.Hash(cg);}));},New2:function(){return $.New(this,m.New12());},New3:function(ci){return $.New(this,m.New4([],function(cj){return function(ck){return ci.Equals(cj,ck);};},function(cl){return ci.GetHashCode(cl);}));},New4:function(cm,cn,co){var cp,cq,cr,cs,ct;cp=$.New(this,{});cp.hash=co;cp.count=0;cp.data={};cq=k.Get(cm);try{while(cq.MoveNext()){cs=cq.get_Current();ct=cs.K;cp.data[cp.hash.call(null,ct)]=cs.V;}}finally{cq.Dispose!=undefined?cq.Dispose():null;}return cp;}}),DictionaryUtil:{notPresent:function(){return c.FailWith("The given key was not present in the dictionary.");}},FSharpMap:$.Class({Add:function(cu,cv){var cw,cx;cw=this.tree;cx=$.New(p,{Key:cu,Value:cv});return o.New(b.Add(cx,cw));},CompareTo:function(cy){return e.compareWith(function(cz){return function(cA){return c.Compare(cz,cA);};},this,cy);},ContainsKey:function(cB){var cC,cD;cC=this.tree;cD=$.New(p,{Key:cB,Value:undefined});return b.Contains(cD,cC);},Equals:function(cE){return this.get_Count()===cE.get_Count()?h.forall2(function(cF){return function(cG){return n.Equals(cF,cG);};},this,cE):false;},GetEnumerator:function(){var cH,cJ,cK;cH=function(cI){return{K:cI.Key,V:cI.Value};};cJ=b.Enumerate(false,this.tree);cK=h.map(cH,cJ);return k.Get(cK);},GetHashCode:function(){return n.Hash(h.toArray(this));},Remove:function(cL){var cM,cN;cM=this.tree;cN=$.New(p,{Key:cL,Value:undefined});return o.New(b.Remove(cN,cM));},TryFind:function(cO){var cP,cQ,cR,cT;cP=this.tree;cQ=$.New(p,{Key:cO,Value:undefined});cR=function(cS){return cS.Value;};cT=b.TryFind(cQ,cP);return q.map(cR,cT);},get_Count:function(){var cU;cU=this.tree;return cU==null?0:cU.Count;},get_IsEmpty:function(){return this.tree==null;},get_Item:function(cV){var cW,cX,cY;cW=this.TryFind(cV);if(cW.$==0){cX=c.FailWith("The given key was not present in the dictionary.");}else{cY=cW.$0;cX=cY;}return cX;},get_Tree:function(){return this.tree;}},{New:function(cZ){var c0;c0=$.New(this,{});c0.tree=cZ;return c0;},New1:function(c1){return $.New(this,o.New(r.fromSeq(c1)));}}),FSharpSet:$.Class({Add:function(c2){return s.New1(b.Add(c2,this.tree));},CompareTo:function(c3){return e.compareWith(function(c4){return function(c5){return c.Compare(c4,c5);};},this,c3);},Contains:function(c6){return b.Contains(c6,this.tree);},Equals:function(c7){return this.get_Count()===c7.get_Count()?h.forall2(function(c8){return function(c9){return n.Equals(c8,c9);};},this,c7):false;},GetEnumerator:function(){return k.Get(b.Enumerate(false,this.tree));},GetHashCode:function(){return-1741749453+n.Hash(h.toArray(this));},IsProperSubsetOf:function(c_){return this.IsSubsetOf(c_)?this.get_Count()<c_.get_Count():false;},IsProperSupersetOf:function(c$){return this.IsSupersetOf(c$)?this.get_Count()>c$.get_Count():false;},IsSubsetOf:function(da){return h.forall(function(db){return da.Contains(db);},this);},IsSupersetOf:function(dc){var de=this;return h.forall(function(dd){return de.Contains(dd);},dc);},Remove:function(df){return s.New1(b.Remove(df,this.tree));},add:function(dg){return s.New1(b.OfSeq(h.append(this,dg)));},get_Count:function(){var dh;dh=this.tree;return dh==null?0:dh.Count;},get_IsEmpty:function(){return this.tree==null;},get_MaximumElement:function(){return h.head(b.Enumerate(true,this.tree));},get_MinimumElement:function(){return h.head(b.Enumerate(false,this.tree));},get_Tree:function(){return this.tree;},sub:function(di){return t.Filter(function(dj){return!di.Contains(dj);},this);}},{New:function(dk){return $.New(this,s.New1(u.ofSeq(dk)));},New1:function(dl){var dm;dm=$.New(this,{});dm.tree=dl;return dm;}}),HashSetProxy:$.Class({Add:function(dn){return this.add(dn);},Clear:function(){this.data=v.prototype.constructor.apply(v,[]);this.count=0;return;},Contains:function(_do){var dp;dp=this.data[this.hash.call(null,_do)];return dp==null?false:this.arrContains(_do,dp);},CopyTo:function(dq){var dr,ds,dt;dr=0;ds=w.concat(this.data);for(dt=0;dt<=ds.length-1;dt++){d.set(dq,dt,ds[dt]);}return;},ExceptWith:function(du){var dv,dw,dx,dy;dv=k.Get(du);try{while(dv.MoveNext()){dx=dv.get_Current();dy=this.Remove(dx);}}finally{dv.Dispose!=undefined?dv.Dispose():null;}return dw;},GetEnumerator:function(){return k.Get(w.concat(this.data));},IntersectWith:function(dz){var dA,dB,dC,dD,dE,dF,dG;dA=x.New3(dz,this.equals,this.hash);dB=w.concat(this.data);for(dC=0;dC<=dB.length-1;dC++){dD=dB[dC];dE=dA.Contains(dD);if(!dE){dG=this.Remove(dD);dF=void dG;}else{dF=null;}}return;},IsProperSubsetOf:function(dH){var dI;dI=d.ofSeq(dH);return this.count<d.length(dI)?this.IsSubsetOf(dI):false;},IsProperSupersetOf:function(dJ){var dK;dK=d.ofSeq(dJ);return this.count>d.length(dK)?this.IsSupersetOf(dK):false;},IsSubsetOf:function(dL){var dM,dN,dP;dM=x.New3(dL,this.equals,this.hash);dN=function(dO){return dM.Contains(dO);};dP=w.concat(this.data);return h.forall(dN,dP);},IsSupersetOf:function(dQ){var dR,dT=this;dR=function(dS){return dT.Contains(dS);};return h.forall(dR,dQ);},Overlaps:function(dU){var dV,dX=this;dV=function(dW){return dX.Contains(dW);};return h.exists(dV,dU);},Remove:function(dY){var dZ,d0,d1,d2;dZ=this.hash.call(null,dY);d0=this.data[dZ];if(d0==null){d1=false;}else{if(this.arrRemove(dY,d0)){this.count=this.count-1;d2=true;}else{d2=false;}d1=d2;}return d1;},RemoveWhere:function(d3){var d4,d5,d6,d7,d8;d4=w.concat(this.data);for(d5=0;d5<=d4.length-1;d5++){d6=d4[d5];if(d3(d6)){d8=this.Remove(d6);d7=void d8;}else{d7=null;}}return;},SetEquals:function(d9){var d_;d_=x.New3(d9,this.equals,this.hash);return this.get_Count()===d_.get_Count()?this.IsSupersetOf(d_):false;},SymmetricExceptWith:function(d$){var ea,eb,ec,ed,ee,ef;ea=k.Get(d$);try{while(ea.MoveNext()){ec=ea.get_Current();if(this.Contains(ec)){ee=this.Remove(ec);ed=void ee;}else{ef=this.Add(ec);ed=void ef;}}}finally{ea.Dispose!=undefined?ea.Dispose():null;}return eb;},UnionWith:function(eg){var eh,ei,ej,ek;eh=k.Get(eg);try{while(eh.MoveNext()){ej=eh.get_Current();ek=this.Add(ej);}}finally{eh.Dispose!=undefined?eh.Dispose():null;}return ei;},add:function(el){var em,en,eo,ep,eq;em=this.hash.call(null,el);en=this.data[em];if(en==null){this.data[em]=[el];this.count=this.count+1;eo=true;}else{if(this.arrContains(el,en)){ep=false;}else{eq=en.push(el);this.count=this.count+1;ep=true;}eo=ep;}return eo;},arrContains:function(er,es){var et,eu,ev;et=true;eu=0;ev=es.length;while(et?eu<ev:false){(this.equals.call(null,es[eu]))(er)?et=false:eu=eu+1;}return!et;},arrRemove:function(ew,ex){var ey,ez,eA,eB,eC,eD,eE;ey=true;ez=0;eA=ex.length;while(ey?ez<eA:false){if((this.equals.call(null,ex[ez]))(ew)){eC=ez;eD=[];eE=ex.splice.apply(ex,[eC,1].concat(eD));eB=ey=false;}else{eB=ez=ez+1;}}return!ey;},get_Count:function(){return this.count;}},{New:function(eF){return $.New(this,x.New3(eF,function(eG){return function(eH){return n.Equals(eG,eH);};},function(eI){return n.Hash(eI);}));},New1:function(eJ){return $.New(this,x.New3(h.empty(),function(eK){return function(eL){return eJ.Equals(eK,eL);};},function(eM){return eJ.GetHashCode(eM);}));},New11:function(){return $.New(this,x.New3(h.empty(),function(eN){return function(eO){return n.Equals(eN,eO);};},function(eP){return n.Hash(eP);}));},New2:function(eQ,eR){return $.New(this,x.New3(eQ,function(eS){return function(eT){return eR.Equals(eS,eT);};},function(eU){return eR.GetHashCode(eU);}));},New3:function(eV,eW,eX){var eY,eZ,e0,e1,e2;eY=$.New(this,{});eY.equals=eW;eY.hash=eX;eY.data=v.prototype.constructor.apply(v,[]);eY.count=0;eZ=k.Get(eV);try{while(eZ.MoveNext()){e1=eZ.get_Current();e2=eY.add(e1);}}finally{eZ.Dispose!=undefined?eZ.Dispose():null;}return eY;}}),HashSetUtil:{concat:function($o){var $0=this,$this=this;var r=[];for(var k in $o){r.push.apply(r,$o[k]);};return r;}},LinkedList:{E:$.Class({Dispose:function(){return null;},MoveNext:function(){this.c=this.c.n;return!n.Equals(this.c,null);},get_Current:function(){return this.c.v;}},{New:function(e3){var e4;e4=$.New(this,{});e4.c=e3;return e4;}}),T:$.Class({AddAfter:function(e5,e6){var e7,e8,e9;e7=e5.n;e8={p:e5,n:e7,v:e6};n.Equals(e5.n,null)?void(this.p=e8):null;e5.n=e8;if(!n.Equals(e7,null)){e7.p=e8;e9=e8;}else{e9=null;}this.c=this.c+1;return e8;},AddBefore:function(e_,e$){var fa,fb,fc;fa=e_.p;fb={p:fa,n:e_,v:e$};n.Equals(e_.p,null)?void(this.n=fb):null;e_.p=fb;if(!n.Equals(fa,null)){fa.n=fb;fc=fb;}else{fc=null;}this.c=this.c+1;return fb;},AddFirst:function(fd){var fe,ff;if(this.c===0){ff={p:null,n:null,v:fd};this.n=ff;this.p=this.n;this.c=1;fe=ff;}else{fe=this.AddBefore(this.n,fd);}return fe;},AddLast:function(fg){var fh,fi;if(this.c===0){fi={p:null,n:null,v:fg};this.n=fi;this.p=this.n;this.c=1;fh=fi;}else{fh=this.AddAfter(this.p,fg);}return fh;},Clear:function(){this.c=0;this.n=null;this.p=null;return;},Contains:function(fj){var fk,fl;fk=false;fl=this.n;while(!n.Equals(fl,null)?!fk:false){fl.v==fj?fk=true:fl=fl.n;}return fk;},Find:function(fm){var fn,fo;fn=this.n;fo=true;while(fo?!n.Equals(fn,null):false){fn.v==fm?fo=false:fn=fn.n;}return fo?null:fn;},FindLast:function(fp){var fq,fr;fq=this.p;fr=true;while(fr?!n.Equals(fq,null):false){fq.v==fp?fr=false:fq=fq.p;}return fr?null:fq;},GetEnumerator:function(){return z.New(this);},Remove:function(fs){var ft,fu,fv,fw;ft=fs.p;fu=fs.n;if(n.Equals(ft,null)){fv=void(this.n=fu);}else{ft.n=fu;fv=fu;}if(n.Equals(fu,null)){fw=void(this.p=ft);}else{fu.p=ft;fw=ft;}this.c=this.c-1;return;},Remove1:function(fx){var fy,fz;fy=this.Find(fx);if(n.Equals(fy,null)){fz=false;}else{this.Remove(fy);fz=true;}return fz;},RemoveFirst:function(){return this.Remove(this.n);},RemoveLast:function(){return this.Remove(this.p);},get_Count:function(){return this.c;},get_First:function(){return this.n;},get_Last:function(){return this.p;}},{New:function(){return $.New(this,A.New1(h.empty()));},New1:function(fA){var fB,fC,fD,fE;fB=$.New(this,{});fB.c=0;fB.n=null;fB.p=null;fC=k.Get(fA);if(fC.MoveNext()){fB.n={p:null,n:null,v:fC.get_Current()};fB.p=fB.n;fD=void(fB.c=1);}else{fD=null;}while(fC.MoveNext()){fE={p:fB.p,n:null,v:fC.get_Current()};fB.p.n=fE;fB.p=fE;fB.c=fB.c+1;}return fB;}})},MapModule:{Exists:function(fF,fG){var fH;fH=function(fI){return(fF(fI.K))(fI.V);};return h.exists(fH,fG);},Filter:function(fJ,fK){var fL,fN,fO,fP,fQ;fL=function(fM){return(fJ(fM.Key))(fM.Value);};fN=b.Enumerate(false,fK.get_Tree());fO=h.filter(fL,fN);fP=h.toArray(fO);fQ=b.Build(fP,0,fP.length-1);return o.New(fQ);},FindKey:function(fR,fS){var fT;fT=function(fU){return(fR(fU.K))(fU.V)?{$:1,$0:fU.K}:{$:0};};return h.pick(fT,fS);},Fold:function(fV,fW,fX){var fY,f1;fY=function(fZ){return function(f0){return((fV(fZ))(f0.Key))(f0.Value);};};f1=b.Enumerate(false,fX.get_Tree());return h.fold(fY,fW,f1);},FoldBack:function(f2,f3,f4){var f5,f8;f5=function(f6){return function(f7){return((f2(f7.Key))(f7.Value))(f6);};};f8=b.Enumerate(true,f3.get_Tree());return h.fold(f5,f4,f8);},ForAll:function(f9,f_){var f$;f$=function(ga){return(f9(ga.K))(ga.V);};return h.forall(f$,f_);},Iterate:function(gb,gc){var gd;gd=function(ge){return(gb(ge.K))(ge.V);};return h.iter(gd,gc);},Map:function(gf,gg){var gh,gj,gk,gl;gh=function(gi){return $.New(p,{Key:gi.Key,Value:(gf(gi.Key))(gi.Value)});};gj=b.Enumerate(false,gg.get_Tree());gk=h.map(gh,gj);gl=b.OfSeq(gk);return o.New(gl);},OfArray:function(gm){var gn,gr,gs;gn=function(go){var gp,gq;gp=go[0];gq=go[1];return $.New(p,{Key:gp,Value:gq});};gr=h.map(gn,gm);gs=b.OfSeq(gr);return o.New(gs);},Partition:function(gt,gu){var gv,gx,gy,gz,gA;gv=function(gw){return(gt(gw.Key))(gw.Value);};gx=h.toArray(b.Enumerate(false,gu.get_Tree()));gy=d.partition(gv,gx);gz=gy[1];gA=gy[0];return[o.New(b.Build(gA,0,gA.length-1)),o.New(b.Build(gz,0,gz.length-1))];},Pick:function(gB,gC){var gD;gD=function(gE){return(gB(gE.K))(gE.V);};return h.pick(gD,gC);},ToSeq:function(gF){var gG,gI;gG=function(gH){return[gH.Key,gH.Value];};gI=b.Enumerate(false,gF.get_Tree());return h.map(gG,gI);},TryFind:function(gJ,gK){return gK.TryFind(gJ);},TryFindKey:function(gL,gM){var gN;gN=function(gO){return(gL(gO.K))(gO.V)?{$:1,$0:gO.K}:{$:0};};return h.tryPick(gN,gM);},TryPick:function(gP,gQ){var gR;gR=function(gS){return(gP(gS.K))(gS.V);};return h.tryPick(gR,gQ);}},MapUtil:{fromSeq:function(gT){var gU;gU=h.toArray(h.delay(function(){return h.collect(function(gW){var gX,gY;gX=gW[1];gY=gW[0];return[$.New(p,{Key:gY,Value:gX})];},e.distinctBy(function(gZ){return gZ[0];},gT));}));d.sortInPlace(gU);return b.Build(gU,0,gU.length-1);}},Pair:$.Class({CompareTo:function(g0){return c.Compare(this.Key,g0.Key);},Equals:function(g1){return n.Equals(this.Key,g1.Key);},GetHashCode:function(){return n.Hash(this.Key);}}),ResizeArray:{ResizeArrayProxy:$.Class({Add:function(g2){return this.arr.push(g2);},AddRange:function(g3){var g5=this;return h.iter(function(g4){return g5.Add(g4);},g3);},Clear:function(){var g6;g6=B.splice(this.arr,0,d.length(this.arr),[]);return;},CopyTo:function(g7){return this.CopyTo1(g7,0);},CopyTo1:function(g8,g9){return this.CopyTo2(0,g8,g9,this.get_Count());},CopyTo2:function(g_,g$,ha,hb){return d.blit(this.arr,g_,g$,ha,hb);},GetEnumerator:function(){return k.Get(this.arr);},GetRange:function(hc,hd){return C.New11(d.sub(this.arr,hc,hd));},Insert:function(he,hf){var hg;hg=B.splice(this.arr,he,0,[hf]);return;},InsertRange:function(hh,hi){var hj;hj=B.splice(this.arr,hh,0,h.toArray(hi));return;},RemoveAt:function(hk){var hl;hl=B.splice(this.arr,hk,1,[]);return;},RemoveRange:function(hm,hn){var ho;ho=B.splice(this.arr,hm,hn,[]);return;},Reverse:function(){return this.arr.reverse();},Reverse1:function(hp,hq){return d.reverse(this.arr,hp,hq);},ToArray:function(){return this.arr.slice();},get_Count:function(){return d.length(this.arr);},get_Item:function(hr){return d.get(this.arr,hr);},set_Item:function(hs,ht){return d.set(this.arr,hs,ht);}},{New:function(hu){return $.New(this,C.New11(h.toArray(hu)));},New1:function(){return $.New(this,C.New11([]));},New11:function(hw){var hx;hx=$.New(this,{});hx.arr=hw;return hx;},New2:function(){return $.New(this,C.New11([]));}}),splice:function($arr,$index,$howMany,$items){var $0=this,$this=this;return $$.Array.prototype.splice.apply($arr,[$index,$howMany].concat($items));}},SetModule:{Filter:function(hy,hz){var hA;hA=h.toArray(h.filter(hy,hz));return s.New1(b.Build(hA,0,hA.length-1));},FoldBack:function(hB,hC,hD){return h.fold(function(hE){return function(hF){return(hB(hF))(hE);};},hD,b.Enumerate(true,hC.get_Tree()));},Partition:function(hG,hH){var hI,hJ,hK;hI=d.partition(hG,h.toArray(hH));hJ=hI[1];hK=hI[0];return[s.New1(b.OfSeq(hK)),s.New1(b.OfSeq(hJ))];}},SetUtil:{ofSeq:function(hL){var hM;hM=h.toArray(hL);d.sortInPlace(hM);return b.Build(hM,0,hM.length-1);}}}}});$.OnInit(function(){a=$.Safe($$.WebSharper.Collections);b=$.Safe(a.BalancedTree);c=$.Safe($$.WebSharper.Operators);d=$.Safe($$.WebSharper.Arrays);e=$.Safe($$.Seq);f=$.Safe($$.WebSharper.List);g=$.Safe(f.T);h=$.Safe($$.WebSharper.Seq);i=$.Safe($$.WebSharper.JavaScript);j=$.Safe(i.JSModule);k=$.Safe($$.WebSharper.Enumerator);l=$.Safe(a.DictionaryUtil);m=$.Safe(a.Dictionary);n=$.Safe($$.WebSharper.Unchecked);o=$.Safe(a.FSharpMap);p=$.Safe(a.Pair);q=$.Safe($$.WebSharper.Option);r=$.Safe(a.MapUtil);s=$.Safe(a.FSharpSet);t=$.Safe(a.SetModule);u=$.Safe(a.SetUtil);v=$.Safe($$.Array);w=$.Safe(a.HashSetUtil);x=$.Safe(a.HashSetProxy);y=$.Safe(a.LinkedList);z=$.Safe(y.E);A=$.Safe(y.T);B=$.Safe(a.ResizeArray);return C=$.Safe(B.ResizeArrayProxy);});$.OnLoad(function(){return;});}());

(function(){var $$=this,$=this.IntelliFactory.Runtime,a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s;$.Define($$,{WebSharper:{Json:{Internals:{Provider:$.Field(function(){return b.New();})},Provider:$.Class({DecodeArray:function(t){return this.EncodeArray(t);},DecodeDateTime:function(){return function(){return function(v){return(new c(v)).getTime();};};},DecodeList:function(w){return function(){return function(y){var z;z=w(null);return d.init(e.length(y),function(A){return z(e.get(y,A));});};};},DecodeRecord:function(B,C){return function(){return function(E){var F,G;F=B===undefined?{}:new B();G=function(H){var I,J,K;I=H[0];J=H[1];K=H[2];return f.Equals(K,0)?void(F[I]=(J(null))(E[I])):f.Equals(K,1)?void(F[I]=E.hasOwnProperty(I)?{$:1,$0:(J(null))(E[I])}:{$:0}):f.Equals(K,2)?E.hasOwnProperty(I)?void(F[I]=(J(null))(E[I])):null:g.FailWith("Invalid field option kind");};e.iter(G,C);return F;};};},DecodeSet:function(L){return function(){return function(N){var O;O=L(null);return i.New1(j.OfSeq(e.map(O,N)));};};},DecodeStringDictionary:function(P){return function(){return function(R){var S;S=k.New12();P(null);m.ForEach(R,function(T){S.set_Item(T,R[T]);return false;});return S;};};},DecodeStringMap:function(U){return function(){return function(W){var X;X=[n.New1([])];U(null);m.ForEach(W,function(Y){X[0]=X[0].Add(Y,W[Y]);return false;});return X[0];};};},DecodeTuple:function(Z){return this.EncodeTuple(Z);},DecodeUnion:function(_0,_1,_2){return function(){return function(_4){var _5,_6,_7,_8,_9,_,bc,bf,bg,bh;if(typeof _4==="object"){_6=_0===undefined?{}:new _0();if(f.Equals(typeof _1,"string")){_9=_4[_1];_=function(ba){var bb;bb=ba[0];ba[1];return bb===_9;};_8=e.findINdex(_,_2);}else{bc=[undefined];m.ForEach(_1,function(bd){var be;if(_4.hasOwnProperty(bd)){bc[0]=_1[bd];be=true;}else{be=false;}return be;});_8=bc[0];}_7=_8;_6.$=_7;bf=e.get(_2,_7);bg=bf[1];bh=function(bi){var bj,bk,bl,bm;bj=bi[0];bk=bi[1];bl=bi[2];bm=bi[3];return bj===null?void(_6.$0=(bl(null))(_4)):f.Equals(bm,0)?void(_6[bj]=(bl(null))(_4[bk])):f.Equals(bm,1)?void(_6[bj]=_4.hasOwnProperty(bk)?{$:1,$0:(bl(null))(_4[bk])}:{$:0}):g.FailWith("Invalid field option kind");};e.iter(bh,bg);_5=_6;}else{_5=_4;}return _5;};};},EncodeArray:function(bm){return function(){return function(bo){var bp;bp=bm(null);return e.map(bp,bo);};};},EncodeDateTime:function(){return function(){return function(br){return(new c(br)).toISOString();};};},EncodeList:function(bs){return function(){return function(bu){var bv,bw,bx;bv=[];bw=bs(null);bx=function(by){var bz;bz=bv.push(bw(by));return;};o.iter(bx,bu);return bv;};};},EncodeRecord:function(bA,bB){return function(){return function(bD){var bE,bF;bE={};bF=function(bG){var bH,bI,bJ,bK,bL,bM,bN;bH=bG[0];bI=bG[1];bJ=bG[2];if(f.Equals(bJ,0)){bK=void(bE[bH]=(bI(null))(bD[bH]));}else{if(f.Equals(bJ,1)){bL=bD[bH];if(bL.$==0){bM=null;}else{bN=bL.$0;bM=void(bE[bH]=(bI(null))(bN));}bK=bM;}else{bK=f.Equals(bJ,2)?bD.hasOwnProperty(bH)?void(bE[bH]=(bI(null))(bD[bH])):null:g.FailWith("Invalid field option kind");}}return bK;};e.iter(bF,bB);return bE;};};},EncodeSet:function(bO){return function(){return function(bQ){var bR,bS,bT;bR=[];bS=bO(null);bT=function(bU){var bV;bV=bR.push(bS(bU));return;};o.iter(bT,bQ);return bR;};};},EncodeStringDictionary:function(bW){return function(){return function(bY){var bZ,b0,b1,b2,b3,b4,b5,b6;bZ={};b0=bW(null);b1=p.Get(bY);try{while(b1.MoveNext()){b3=b1.get_Current();b4=g.KeyValue(b3);b5=b4[1];b6=b4[0];bZ[b6]=b0(b5);}}finally{b1.Dispose!=undefined?b1.Dispose():null;}return bZ;};};},EncodeStringMap:function(b7){return function(){return function(b9){var b_,b$,ca;b_={};b$=b7(null);ca=function(cb){return function(cc){b_[cb]=b$(cc);};};q.Iterate(ca,b9);return b_;};};},EncodeTuple:function(cd){return function(){return function(cf){return e.map2(function(cg){return function(ch){return(cg(null))(ch);};},cd,cf);};};},EncodeUnion:function(ci,cj,ck){return function(){return function(cm){var cn,co,cp,cq,cr,cs,ct;if(typeof cm==="object"){co={};cp=cm.$;cq=e.get(ck,cp);cr=cq[0];cs=cq[1];f.Equals(typeof cj,"string")?void(co[cj]=cr):null;ct=function(cu){var cv,cw,cx,cy,cz,cA,cC,cD,cE,cF;cv=cu[0];cw=cu[1];cx=cu[2];cy=cu[3];if(cv===null){cA=(cx(null))(cm.$0);cz=m.ForEach(cA,function(cB){co[cB]=cA[cB];return false;});}else{if(f.Equals(cy,0)){cC=void(co[cw]=(cx(null))(cm[cv]));}else{if(f.Equals(cy,1)){cD=cm[cv];if(cD.$==0){cE=null;}else{cF=cD.$0;cE=void(co[cw]=(cx(null))(cF));}cC=cE;}else{cC=g.FailWith("Invalid field option kind");}}cz=cC;}return cz;};e.iter(ct,cs);cn=co;}else{cn=cm;}return cn;};};}},{Id:function(){return function(cG){return cG;};},New:function(){return $.New(this,{});},get_Default:function(){return r.Provider();}})},Web:{InlineControl:$.Class({get_Body:function(){var cH;cH=e.fold(function(cI){return function(cJ){return cI[cJ];};},s,this.funcName);return cH.apply(null,this.args);}})}}});$.OnInit(function(){a=$.Safe($$.WebSharper.Json);b=$.Safe(a.Provider);c=$.Safe($$.Date);d=$.Safe($$.WebSharper.List);e=$.Safe($$.WebSharper.Arrays);f=$.Safe($$.WebSharper.Unchecked);g=$.Safe($$.WebSharper.Operators);h=$.Safe($$.WebSharper.Collections);i=$.Safe(h.FSharpSet);j=$.Safe(h.BalancedTree);k=$.Safe(h.Dictionary);l=$.Safe($$.WebSharper.JavaScript);m=$.Safe(l.JSModule);n=$.Safe(h.FSharpMap);o=$.Safe($$.WebSharper.Seq);p=$.Safe($$.WebSharper.Enumerator);q=$.Safe(h.MapModule);r=$.Safe(a.Internals);return s=$.Safe($$.window);});$.OnLoad(function(){r.Provider();return;});}());

/*! H5F
* https://github.com/ryanseddon/H5F/
* Copyright (c) Ryan Seddon | Licensed MIT */
(function (e, t) { "function" == typeof define && define.amd ? define(t) : "object" == typeof module && module.exports ? module.exports = t() : e.H5F = t() })(this, function () { var e, t, a, i, n, r, l, s, o, u, d, c, v, p, f, m, b, h, g, y, w, C, N, A, E, $, x = document, k = x.createElement("input"), q = /^[a-zA-Z0-9.!#$%&'*+-\/=?\^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/, M = /[a-z][\-\.+a-z]*:\/\//i, L = /^(input|select|textarea)$/i; return r = function (e, t) { var a = !e.nodeType || !1, i = { validClass: "valid", invalidClass: "error", requiredClass: "required", placeholderClass: "placeholder", onSubmit: Function.prototype, onInvalid: Function.prototype }; if ("object" == typeof t) for (var r in i) t[r] === void 0 && (t[r] = i[r]); if (n = t || i, a) for (var s = 0, o = e.length; o > s; s++) l(e[s]); else l(e) }, l = function (a) { var i, r = a.elements, l = r.length, c = !!a.attributes.novalidate; if (g(a, "invalid", o, !0), g(a, "blur", o, !0), g(a, "input", o, !0), g(a, "keyup", o, !0), g(a, "focus", o, !0), g(a, "change", o, !0), g(a, "click", u, !0), g(a, "submit", function (i) { return e = !0, t || c || a.checkValidity() ? (n.onSubmit.call(a, i), void 0) : (w(i), void 0) }, !1), !v()) for (a.checkValidity = function () { return d(a) }; l--;) i = !!r[l].attributes.required, "fieldset" !== r[l].nodeName.toLowerCase() && s(r[l]) }, s = function (e) { var t = e, a = h(t), n = { type: t.getAttribute("type"), pattern: t.getAttribute("pattern"), placeholder: t.getAttribute("placeholder") }, r = /^(email|url)$/i, l = /^(input|keyup)$/i, s = r.test(n.type) ? n.type : n.pattern ? n.pattern : !1, o = p(t, s), u = m(t, "step"), v = m(t, "min"), b = m(t, "max"), g = !("" === t.validationMessage || void 0 === t.validationMessage); t.checkValidity = function () { return d.call(this, t) }, t.setCustomValidity = function (e) { c.call(t, e) }, t.validity = { valueMissing: a, patternMismatch: o, rangeUnderflow: v, rangeOverflow: b, stepMismatch: u, customError: g, valid: !(a || o || u || v || b || g) }, n.placeholder && !l.test(i) && f(t) }, o = function (e) { var t = C(e) || e, a = /^(input|keyup|focusin|focus|change)$/i, r = /^(submit|image|button|reset)$/i, l = /^(checkbox|radio)$/i, u = !0; !L.test(t.nodeName) || r.test(t.type) || r.test(t.nodeName) || (i = e.type, v() || s(t), t.validity.valid && ("" !== t.value || l.test(t.type)) || t.value !== t.getAttribute("placeholder") && t.validity.valid ? (A(t, [n.invalidClass, n.requiredClass]), N(t, n.validClass)) : a.test(i) ? t.validity.valueMissing && A(t, [n.requiredClass, n.invalidClass, n.validClass]) : t.validity.valueMissing ? (A(t, [n.invalidClass, n.validClass]), N(t, n.requiredClass)) : t.validity.valid || (A(t, [n.validClass, n.requiredClass]), N(t, n.invalidClass)), "input" === i && u && (y(t.form, "keyup", o, !0), u = !1)) }, d = function (t) { var a, i, r, l, s, u = !1; if ("form" === t.nodeName.toLowerCase()) { a = t.elements; for (var d = 0, c = a.length; c > d; d++) i = a[d], r = !!i.attributes.disabled, l = !!i.attributes.required, s = !!i.attributes.pattern, "fieldset" !== i.nodeName.toLowerCase() && !r && (l || s && l) && (o(i), i.validity.valid || u || (e && i.focus(), u = !0, n.onInvalid.call(t, i))); return !u } return o(t), t.validity.valid }, c = function (e) { var t = this; t.validationMessage = e }, u = function (e) { var a = C(e); a.attributes.formnovalidate && "submit" === a.type && (t = !0) }, v = function () { return E(k, "validity") && E(k, "checkValidity") }, p = function (e, t) { if ("email" === t) return !q.test(e.value); if ("url" === t) return !M.test(e.value); if (t) { var i = e.getAttribute("placeholder"), n = e.value; return a = RegExp("^(?:" + t + ")$"), n === i ? !1 : "" === n ? !1 : !a.test(e.value) } return !1 }, f = function (e) { var t = { placeholder: e.getAttribute("placeholder") }, a = /^(focus|focusin|submit)$/i, r = /^(input|textarea)$/i, l = /^password$/i, s = !!("placeholder" in k); s || !r.test(e.nodeName) || l.test(e.type) || ("" !== e.value || a.test(i) ? e.value === t.placeholder && a.test(i) && (e.value = "", A(e, n.placeholderClass)) : (e.value = t.placeholder, g(e.form, "submit", function () { i = "submit", f(e) }, !0), N(e, n.placeholderClass))) }, m = function (e, t) { var a = parseInt(e.getAttribute("min"), 10) || 0, i = parseInt(e.getAttribute("max"), 10) || !1, n = parseInt(e.getAttribute("step"), 10) || 1, r = parseInt(e.value, 10), l = (r - a) % n; return h(e) || isNaN(r) ? "number" === e.getAttribute("type") ? !0 : !1 : "step" === t ? e.getAttribute("step") ? 0 !== l : !1 : "min" === t ? e.getAttribute("min") ? a > r : !1 : "max" === t ? e.getAttribute("max") ? r > i : !1 : void 0 }, b = function (e) { var t = !!e.attributes.required; return t ? h(e) : !1 }, h = function (e) { var t = e.getAttribute("placeholder"), a = /^(checkbox|radio)$/i, i = !!e.attributes.required; return !(!i || "" !== e.value && e.value !== t && (!a.test(e.type) || $(e))) }, g = function (e, t, a, i) { E(window, "addEventListener") ? e.addEventListener(t, a, i) : E(window, "attachEvent") && window.event !== void 0 && ("blur" === t ? t = "focusout" : "focus" === t && (t = "focusin"), e.attachEvent("on" + t, a)) }, y = function (e, t, a, i) { E(window, "removeEventListener") ? e.removeEventListener(t, a, i) : E(window, "detachEvent") && window.event !== void 0 && e.detachEvent("on" + t, a) }, w = function (e) { e = e || window.event, e.stopPropagation && e.preventDefault ? (e.stopPropagation(), e.preventDefault()) : (e.cancelBubble = !0, e.returnValue = !1) }, C = function (e) { return e = e || window.event, e.target || e.srcElement }, N = function (e, t) { var a; e.className ? (a = RegExp("(^|\\s)" + t + "(\\s|$)"), a.test(e.className) || (e.className += " " + t)) : e.className = t }, A = function (e, t) { var a, i, n = "object" == typeof t ? t.length : 1, r = n; if (e.className) if (e.className === t) e.className = ""; else for (; n--;) a = RegExp("(^|\\s)" + (r > 1 ? t[n] : t) + "(\\s|$)"), i = e.className.match(a), i && 3 === i.length && (e.className = e.className.replace(a, i[1] && i[2] ? " " : "")) }, E = function (e, t) { var a = typeof e[t], i = RegExp("^function|object$", "i"); return !!(i.test(a) && e[t] || "unknown" === a) }, $ = function (e) { for (var t = document.getElementsByName(e.name), a = 0; t.length > a; a++) if (t[a].checked) return !0; return !1 }, { setup: r } });;
(function(){var $$=this,$=this.IntelliFactory.Runtime,a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,_0,_1,_2,_3,_4,_5,_6,_7,_8,_9,_,ba,bb,bc,bd,be,bf,bg,bh,bi,bj,bk,bl,bm,bn,bo,bp,bq,br,bs,bt,bu;$.Define($$,{WebSharper:{UI:{Next:{Abbrev:{Async:{Schedule:function(bv){return a.Start(a.Delay(function(){return a.Return(bv(null));}),{$:0});},StartTo:function(bw,bx){return a.StartWithContinuations(bw,bx,function(){},function(){},{$:0});}},Dict:{ToKeyArray:function(bA){var bB;bB=b(bA.count);c.iteri(function(bC){return function(bD){return d.set(bB,bC,bD.K);};},bA);return bB;},ToValueArray:function(bE){var bF;bF=b(bE.count);c.iteri(function(bG){return function(bH){return d.set(bF,bG,bH.V);};},bE);return bF;}},Fresh:{Id:function(){var bI;bI=h.counter()+1;h.counter=function(){return bI;};return"uid"+$$.String(h.counter());},Int:function(){var bJ;bJ=h.counter()+1;h.counter=function(){return bJ;};return h.counter();},counter:$.Field(function(){return 0;})},HashSet:{Except:function(bK,bL){var bM;bM=j.New(k.ToArray(bL));bM.ExceptWith(k.ToArray(bK));return bM;},Filter:function(bN,bO){return j.New(d.filter(bN,k.ToArray(bO)));},Intersect:function(bP,bQ){var bR;bR=j.New(k.ToArray(bP));bR.IntersectWith(k.ToArray(bQ));return bR;},ToArray:function(bS){var bT;bT=b(bS.get_Count());bS.CopyTo(bT);return bT;}},JQueue:{Add:function($x,$q){var $0=this,$this=this;return $q.push($x);},Count:function(bU){return bU.length;},Dequeue:function($q){var $0=this,$this=this;return $q.shift();},Iter:function(bV,bW){return d.iter(bV,l.ToArray(bW));},ToArray:function(bX){return bX.slice();}},Mailbox:{StartProcessor:function(bY){var bZ,b0,b1;bZ=[];b0=[false];b1=a.Delay(function(){return a.Combine(a.While(function(){return l.Count(bZ)>0;},a.Delay(function(){return a.Bind(bY(l.Dequeue(bZ)),function(){return a.Return(null);});})),a.Delay(function(){return a.Return(void(b0[0]=false));}));});return function(b7){l.Add(b7,bZ);if(!b0[0]){b0[0]=true;return a.Start(b1,{$:0});}else{return null;}};}},Slot1:$.Class({Equals:function(b8){return m.Equals(this.key.call(null,this.value),this.key.call(null,b8.get_Value()));},GetHashCode:function(){return m.Hash(this.key.call(null,this.value));},get_Value:function(){return this.value;}},{Create:function(b9,b_){return n.New(b9,b_);},New:function(b$,ca){var cb;cb=$.New(this,{});cb.key=b$;cb.value=ca;return cb;}}),U:function(){return;}},An:$.Class({},{Append:function(cc,cd){return $.New(o,{$:0,$0:p.Append(cc.$0,cd.$0)});},Concat:function(ce){return $.New(o,{$:0,$0:p.Concat(c.map(function(cf){return q.List(cf);},ce))});},Const:function(cg){return q.Const(cg);},Delayed:function(ch,ci,cj,ck,cl,cm){return{Compute:function(cn){return cn<=ck?cl:ch.Interpolate(ci.TransformTime.call(null,(cn-ck)/cj),cl,cm);},Duration:cj+ck};},Map:function(co,cp){var cq;cq=cp.Compute;return q.Def(cp.Duration,function(cr){return co(cq(cr));});},Pack:function(cs){return $.New(o,{$:0,$0:p.Single({$:1,$0:cs})});},Play:function(ct){return a.Delay(function(){return a.Bind(o.Run(function(){},q.Actions(ct)),function(){return a.Return(q.Finalize(ct));});});},Run:function(cx,cy){var cz;cz=cy.Duration;return a.FromContinuations(function(cA){var cB,cC;cB=cA[0];cC=function(cD,cE){var cF;cF=cE-cD;cx(cy.Compute.call(null,cF));return cF<=cz?void r(function(cG){return cC(cD,cG);}):cB(null);};r(function(cH){return cC(cH,cH);});return;});},Simple:function(cI,cJ,cK,cL,cM){return{Compute:function(cN){return cI.Interpolate(cJ.TransformTime.call(null,cN/cK),cL,cM);},Duration:cK};},WhenDone:function(cO,cP){return o.Append($.New(o,{$:0,$0:p.Single({$:0,$0:cO})}),cP);},get_Empty:function(){return $.New(o,{$:0,$0:p.Empty()});}}),AnimatedAttrNode:$.Class({GetChangeAnim:function(cQ){var cR,cT=this;cR=[this.visible,this.logical];return o.WhenDone(function(){return cT.sync(cQ);},cR[0].$==1?cR[1].$==1?cT.dirty?o.Pack(o.Map(function(cU){return cT.pushVisible(cQ,cU);},s.AnimateChange(cT.tr,cR[0].$0,cR[1].$0))):o.get_Empty():o.get_Empty():o.get_Empty());},GetEnterAnim:function(cV){var cW,cY=this;cW=[this.visible,this.logical];return o.WhenDone(function(){return cY.sync(cV);},cW[0].$==1?cW[1].$==1?cY.dirty?o.Pack(o.Map(function(cZ){return cY.pushVisible(cV,cZ);},s.AnimateChange(cY.tr,cW[0].$0,cW[1].$0))):cW[0].$==0?cW[1].$==1?o.Pack(o.Map(function(c0){return cY.pushVisible(cV,c0);},s.AnimateEnter(cY.tr,cW[1].$0))):o.get_Empty():o.get_Empty():cW[0].$==0?cW[1].$==1?o.Pack(o.Map(function(c1){return cY.pushVisible(cV,c1);},s.AnimateEnter(cY.tr,cW[1].$0))):o.get_Empty():o.get_Empty():cW[0].$==0?cW[1].$==1?o.Pack(o.Map(function(c2){return cY.pushVisible(cV,c2);},s.AnimateEnter(cY.tr,cW[1].$0))):o.get_Empty():o.get_Empty());},GetExitAnim:function(c3){var c4,c6=this;c4=this.visible;return o.WhenDone(function(){c6.dirty=true;c6.visible={$:0};return;},c4.$==1?o.Pack(o.Map(function(c7){return c6.pushVisible(c3,c7);},t.AnimateExit(c6.tr,c4.$0))):o.get_Empty());},Init:function(){return null;},Sync:function(){return null;},get_Changed:function(){return this.updates;},pushVisible:function(c_,c$){this.visible={$:1,$0:c$};this.dirty=true;return(this.push.call(null,c_))(c$);},sync:function(da){if(this.dirty){u.iter(this.push.call(null,da),this.logical);this.visible=this.logical;this.dirty=false;return;}else{return null;}}},{New:function(db,dc,dd){var de;de=$.New(this,{});de.tr=db;de.push=dd;de.logical={$:0};de.visible={$:0};de.dirty=true;de.updates=v.Map(function(df){de.logical={$:1,$0:df};de.dirty=true;return;},dc);return de;}}),Anims:{Actions:function(dg){return q.ConcatActions(d.choose(function(dh){return dh.$==1?{$:1,$0:dh.$0}:{$:0};},p.ToArray(dg.$0)));},ConcatActions:function(di){var dj,dk,dl,dn;dj=c.toArray(di);dk=d.length(dj);if(dk===0){return q.Const(null);}else{if(dk===1){return d.get(dj,0);}else{dl=c.max(c.map(function(dm){return dm.Duration;},dj));dn=d.map(function(_do){return q.Prolong(dl,_do);},dj);return q.Def(dl,function(dp){return d.iter(function(dq){return dq.Compute.call(null,dp);},dn);});}}},Const:function(dr){return q.Def(0,function(){return dr;});},Def:function(dt,du){return{Compute:du,Duration:dt};},Finalize:function(dv){return d.iter(function(dw){return dw.$==0?dw.$0.call(null,null):null;},p.ToArray(dv.$0));},List:function(dx){return dx.$0;},Prolong:function(dy,dz){var dA,dB,dC;dA=dz.Compute;dB=dz.Duration;dC=w.Create(function(){return dz.Compute.call(null,dz.Duration);});return{Compute:function(dE){return dE>=dB?dC.eval():dA(dE);},Duration:dy};}},AppendList1:{Append:function(dF,dG){var dH;dH=[dF,dG];return dH[0].$==0?dH[1]:dH[1].$==0?dH[0]:{$:2,$0:dF,$1:dG};},Concat:function(dI){var dJ;dJ=c.toArray(dI);return x.MapReduce(function(dK){return dK;},p.Empty(),function(dL){return function(dM){return p.Append(dL,dM);};},dJ);},Empty:function(){return{$:0};},FromArray:function(dN){var dO;dO=dN.length;return dO===0?{$:0}:dO===1?{$:1,$0:d.get(dN,0)}:{$:3,$0:dN.slice()};},Single:function(dP){return{$:1,$0:dP};},ToArray:function(dQ){var dR,dS;dR=[];dS=function(dT){var dU;if(dT.$==1){return l.Add(dT.$0,dR);}else{if(dT.$==2){dU=dT.$1;dS(dT.$0);return dS(dU);}else{return dT.$==3?d.iter(function(dV){return l.Add(dV,dR);},dT.$0):null;}}};dS(dQ);return l.ToArray(dR);}},Array:{MapReduce:function(dW,dX,dY,dZ){var d0;d0=function(d1,d2){var d3,d4,d5,d6,d7,d8;if(d2<=0){return dX;}else{if(d2===1){if(d1>=0?d1<d.length(dZ):false){return dW(d.get(dZ,d1));}else{d3=d2/2>>0;d4=d0(d1,d3);d5=d0(d1+d3,d2-d3);return(dY(d4))(d5);}}else{d6=d2/2>>0;d7=d0(d1,d6);d8=d0(d1+d6,d2-d6);return(dY(d7))(d8);}}};return d0(0,d.length(dZ));}},AttrModule:{Animated:function(d9,d_,d$,ea){return y.Animated(d_,d$,function(eb){return function(ec){return z.SetAttr(eb,d9,ea(ec));};});},AnimatedStyle:function(ed,ee,ef,eg){return y.Animated(ee,ef,function(eh){return function(ei){return z.SetStyle(eh,ed,eg(ei));};});},Class:function(ej){return y.Static(function(ek){return z.AddClass(ek,ej);});},ContentEditableHtml:function(el){var em;em=A.CustomVar(el,function(en){return function(eo){en.innerHTML=eo;};},function(ep){return{$:1,$0:ep.innerHTML};});return B.Append(B.Create("contenteditable","true"),em);},ContentEditableText:function(eq){var er;er=A.CustomVar(eq,function(es){return function(et){es.textContent=et;};},function(eu){return{$:1,$0:eu.textContent};});return B.Append(B.Create("contenteditable","true"),er);},CustomValue:function(ev,ew,ex){return A.CustomVar(ev,function(ey){return function(ez){ey.value=ew(ez);};},function(eA){return ex(eA.value);});},CustomVar:function(eB,eC,eD){var eE,eJ;eE=function(eF){return function(){return eB.UpdateMaybe(function(eH){var eI;eI=eD(eF);return eI.$==1?!m.Equals(eI.$0,eH)?eI:{$:0}:{$:0};});};};eJ=function(eK){return function(eL){var eM;eM=eD(eK);return eM.$==1?m.Equals(eM.$0,eL)?null:(eC(eK))(eL):(eC(eK))(eL);};};return B.Concat(C.ofArray([A.Handler("change",eE),A.Handler("input",eE),A.Handler("keypress",eE),A.DynamicCustom(eJ,eB.get_View())]));},Dynamic:function(eN,eO){return y.Dynamic(eO,function(){},function(eQ){return function(eR){return z.SetAttr(eQ,eN,eR);};});},DynamicClass:function(eS,eT,eU){return y.Dynamic(eT,function(){},function(eW){return function(eX){return eU(eX)?z.AddClass(eW,eS):z.RemoveClass(eW,eS);};});},DynamicCustom:function(eY,eZ){return y.Dynamic(eZ,function(){},eY);},DynamicPred:function(e1,e2,e3){var e4;e4=function(e5){return function(e6){var e7;e7=e6[1];return e6[0]?z.SetAttr(e5,e1,e7):z.RemoveAttr(e5,e1);};};return y.Dynamic(v.Map2(function(e8){return function(e9){return[e8,e9];};},e2,e3),function(){},e4);},DynamicProp:function(e$,fa){return y.Dynamic(fa,function(){},function(fc){return function(fd){fc[e$]=fd;};});},DynamicStyle:function(fe,ff){return y.Dynamic(ff,function(){},function(fh){return function(fi){return z.SetStyle(fh,fe,fi);};});},Handler:function(fj,fk){return y.Static(function(fl){return fl.addEventListener(fj,fk(fl),false);});},HandlerView:function(fm,fn,fo){var fp;fp=h.Id();return y.Dynamic(fn,function(fq){var fr;fr=fo(fq);return fq.addEventListener(fm,function(fs){return(fr(fs))(fq[fp]);},false);},function(ft){return function(fu){ft[fp]=fu;};});},OnAfterRender:function(fv){return y.Mk(0,{$:4,$0:fv});},Style:function(fw,fx){return y.Static(function(fy){return z.SetStyle(fy,fw,fx);});},ValidateForm:$.Field(function(){return A.OnAfterRender(function(fz){return $$.H5F?$$.H5F.setup(fz):undefined;});}),Value:function(fA){return A.CustomValue(fA,function(fB){return fB;},function(fC){return{$:1,$0:fC};});}},AttrProxy:$.Class({},{Append:function(fD,fE){return y.Mk(fD.Flags|fE.Flags,y.AppendTree(fD.Tree,fE.Tree));},Concat:function(fF){var fG;fG=c.toArray(fF);return x.MapReduce(function(fH){return fH;},B.get_Empty(),function(fI){return function(fJ){return B.Append(fI,fJ);};},fG);},Create:function(fK,fL){return y.Static(function(fM){return z.SetAttr(fM,fK,fL);});},Handler:function(fN,fO){return y.Static(function(fP){return fP.addEventListener(fN,fO(fP),false);});},get_Empty:function(){return y.EmptyAttr();}}),Attrs:{Animated:function(fQ,fR,fS){var fT,fU;fT=D.New(fQ,fR,fS);fU=4;if(t.CanAnimateEnter(fQ)){fU=fU|1;}if(t.CanAnimateExit(fQ)){fU=fU|2;}return y.Mk(fU,{$:1,$0:fT});},AppendTree:function(fV,fW){var fX;fX=[fV,fW];return fX[0].$==0?fX[1]:fX[1].$==0?fX[0]:{$:2,$0:fV,$1:fW};},Dynamic:function(fY,fZ,f0){return y.Mk(0,{$:1,$0:E.New(fY,fZ,f0)});},EmptyAttr:$.Field(function(){return y.Mk(0,{$:0});}),GetAnim:function(f1,f2){return o.Concat(d.map(function(f3){return(f2(f3))(f1.DynElem);},f1.DynNodes));},GetChangeAnim:function(f4){return y.GetAnim(f4,function(f5){return function(f6){return f5.GetChangeAnim(f6);};});},GetEnterAnim:function(f7){return y.GetAnim(f7,function(f8){return function(f9){return f8.GetEnterAnim(f9);};});},GetExitAnim:function(f_){return y.GetAnim(f_,function(f$){return function(ga){return f$.GetExitAnim(ga);};});},HasChangeAnim:function(gb){return(gb.DynFlags&4)!==0;},HasEnterAnim:function(gc){return(gc.DynFlags&1)!==0;},HasExitAnim:function(gd){return(gd.DynFlags&2)!==0;},Insert:function(ge,gf){var gg,gh,gi;gg=[];gh=[];gi=function(gj){var gk,gl;if(gj.$==1){gk=gj.$0;gk.Init(ge);return l.Add(gk,gg);}else{if(gj.$==2){gl=gj.$1;gi(gj.$0);return gi(gl);}else{return gj.$==3?gj.$0.call(null,ge):gj.$==4?l.Add(gj.$0,gh):null;}}};gi(gf.Tree);return $.DeleteEmptyFields({DynElem:ge,DynFlags:gf.Flags,DynNodes:l.ToArray(gg),OnAfterRender:(l.Count(gh)===0?{$:0}:{$:1,$0:function(gm){return l.Iter(function(gn){return gn(gm);},gh);}}).$0},["OnAfterRender"]);},Mk:function(go,gp){return $.New(B,{Flags:go,Tree:gp});},Static:function(gq){return y.Mk(0,{$:3,$0:gq});},Sync:function(gr,gs){return d.iter(function(gt){return gt.Sync(gr);},gs.DynNodes);},Updates:function(gu){var gv,gA;gv=function(gw){return function(gx){return v.Map2(function(){return function(){return null;};},gw,gx);};};gA=gu.DynNodes;return x.MapReduce(function(gB){return gB.get_Changed();},F.Const(null),gv,gA);}},CheckedInput:$.Class({get_Input:function(){return this.$==1?this.$0:this.$==2?this.$0:this.$1;}}),Doc:$.Class({ReplaceInDom:function(gC){var gD;gD=G.createTextNode("");gC.parentNode.replaceChild(gD,gC);return H.RunBefore(gD,this);},get_DocNode:function(){return this.docNode;},get_Updates:function(){return this.updates;}},{Append:function(gE,gF){var gG;gG=v.Map2(function(){return function(){return null;};},gE.get_Updates(),gF.get_Updates());return H.Mk({$:0,$0:gE.get_DocNode(),$1:gF.get_DocNode()},gG);},Async:function(gJ){return H.EmbedView(v.MapAsync(function(gK){return gK;},F.Const(gJ)));},BindView:function(gL,gM){return H.EmbedView(v.Map(gL,gM));},Button:function(gN,gO,gP){var gQ;gQ=B.Concat(gO);return I.New(H.Clickable("button",gP),gQ,H.TextNode(gN));},ButtonView:function(gR,gS,gT,gU){var gV;gV=B.Concat(c.append([A.HandlerView("click",gT,function(){return function(){return gU;};})],gS));return I.New(z.CreateElement("button"),gV,H.TextNode(gR));},CheckBox:function(gY,gZ){var g0;g0=z.CreateElement("input");g0.addEventListener("click",function(){return gZ.Set(g0.checked);},false);return I.New(g0,B.Concat(c.toList(c.delay(function(){return c.append(gY,c.delay(function(){return c.append([B.Create("type","checkbox")],c.delay(function(){return[A.DynamicProp("checked",gZ.get_View())];}));}));}))),H.get_Empty());},CheckBoxGroup:function(g5,g6,g7){var g8,g9,g$,hb,hc;g8=g7.get_View();g9=function(g_){return m.Equals(g_,g6);};g$=v.Map(function(ha){return c.exists(g9,ha);},g8);hb=B.Concat(C.append(C.ofArray([B.Create("type","checkbox"),B.Create("name",g7.get_Id()),B.Create("value",h.Id()),A.DynamicProp("checked",g$)]),C.ofSeq(g5)));hc=z.CreateElement("input");hc.addEventListener("click",function(){var he;he=hc.checked;return g7.Update(function(hf){return c.toList(J.distinct(he?C.append(hf,C.ofArray([g6])):C.filter(function(hg){return!m.Equals(hg,g6);},hf)));});},false);return I.New(hc,hb,H.get_Empty());},Clickable:function(hh,hi){var hj;hj=z.CreateElement(hh);hj.addEventListener("click",function(hk){hk.preventDefault();return hi(null);},false);return hj;},Concat:function(hl){var hm;hm=c.toArray(hl);return x.MapReduce(function(hn){return hn;},H.get_Empty(),function(ho){return function(hp){return H.Append(ho,hp);};},hm);},Convert:function(hq,hr){return H.Flatten(v.MapSeqCached(hq,hr));},ConvertBy:function(hs,ht,hu){return H.Flatten(v.MapSeqCachedBy(hs,ht,hu));},ConvertSeq:function(hv,hw){return H.Flatten(v.MapSeqCachedView(hv,hw));},ConvertSeqBy:function(hx,hy,hz){return H.Flatten(v.MapSeqCachedViewBy(hx,hy,hz));},Element:function(hA,hB,hC){var hD,hE;hD=B.Concat(hB);hE=H.Concat(hC);return I.New(z.CreateElement(hA),hD,hE);},EmbedView:function(hF){var hG,hH;hG=K.CreateEmbedNode();hH=v.Map(function(){},F.Bind(function(hJ){K.UpdateEmbedNode(hG,hJ.get_DocNode());return hJ.get_Updates();},hF));return H.Mk({$:2,$0:hG},hH);},Flatten:function(hK){return H.EmbedView(v.Map(function(hL){return H.Concat(hL);},hK));},FloatInput:function(hM,hN){return H.InputInternal("input",function(hO){return c.append(hM,[A.CustomValue(hN,function(hP){return hP.get_Input();},function(hQ){var hR,hS;if(L.isBlank(hQ)){hR=(hO.checkValidity?hO.checkValidity():true)?$.New(M,{$:2,$0:hQ}):$.New(M,{$:1,$0:hQ});}else{hS=+hQ;hR=$$.isNaN(hS)?$.New(M,{$:1,$0:hQ}):$.New(M,{$:0,$0:hS,$1:hQ});}return{$:1,$0:hR};}),B.Create("type","number")]);});},FloatInputUnchecked:function(hT,hU){var hV;hV=function(hW){var hX;if(L.isBlank(hW)){return{$:1,$0:0};}else{hX=+hW;return $$.isNaN(hX)?{$:0}:{$:1,$0:hX};}};return H.InputInternal("input",function(){return c.append(hT,[hU.Get()===0?B.Create("value","0"):B.get_Empty(),A.CustomValue(hU,function(hZ){return $$.String(hZ);},hV),B.Create("type","number")]);});},Input:function(h0,h1){return H.InputInternal("input",function(){return c.append(h0,[A.Value(h1)]);});},InputArea:function(h3,h4){return H.InputInternal("textarea",function(){return c.append(h3,[A.Value(h4)]);});},InputInternal:function(h6,h7){var h8;h8=z.CreateElement(h6);return I.New(h8,B.Concat(h7(h8)),H.get_Empty());},IntInput:function(h9,h_){return H.InputInternal("input",function(h$){return c.append(h9,[A.CustomValue(h_,function(ia){return ia.get_Input();},function(ib){var ic,id;if(L.isBlank(ib)){ic=(h$.checkValidity?h$.checkValidity():true)?$.New(M,{$:2,$0:ib}):$.New(M,{$:1,$0:ib});}else{id=+ib;ic=$$.isNaN(id)?$.New(M,{$:1,$0:ib}):$.New(M,{$:0,$0:id,$1:ib});}return{$:1,$0:ic};}),B.Create("type","number"),B.Create("step","1")]);});},IntInputUnchecked:function(ie,_if){var ig;ig=function(ih){var ii;if(L.isBlank(ih)){return{$:1,$0:0};}else{ii=+ih;return ii!==ii>>0?{$:0}:{$:1,$0:ii};}};return H.InputInternal("input",function(){return c.append(ie,[_if.Get()===0?B.Create("value","0"):B.get_Empty(),A.CustomValue(_if,function(ik){return $$.String(ik);},ig),B.Create("type","number"),B.Create("step","1")]);});},Link:function(il,im,_in){var io,ip;io=B.Concat(im);ip=B.Append(B.Create("href","#"),io);return I.New(H.Clickable("a",_in),ip,H.TextNode(il));},LinkView:function(iq,ir,is,it){var iu;iu=B.Concat(c.append([A.HandlerView("click",is,function(){return function(){return it;};}),B.Create("href","#")],ir));return I.New(z.CreateElement("a"),iu,H.TextNode(iq));},Mk:function(ix,iy){return H.New(ix,iy);},New:function(iz,iA){var iB;iB=$.New(this,{});iB.docNode=iz;iB.updates=iA;return iB;},PasswordBox:function(iC,iD){return H.InputInternal("input",function(){return c.append(iC,[A.Value(iD),B.Create("type","password")]);});},Radio:function(iF,iG,iH){var iI,iK,iM;iI=z.CreateElement("input");iI.addEventListener("click",function(){return iH.Set(iG);},false);iK=A.DynamicProp("checked",v.Map(function(iL){return m.Equals(iL,iG);},iH.get_View()));iM=function(iN,iO){return B.Create(iN,iO);};return I.New(iI,B.Concat(C.append(C.ofArray([iM("type","radio"),iM("name",iH.get_Id()),iK]),C.ofSeq(iF))),H.get_Empty());},Run:function(iP,iQ){var iR,iS;iR=iQ.get_DocNode();K.LinkElement(iP,iR);iS=K.CreateRunState(iP,iR);return F.Sink(N.StartProcessor(function(){return K.PerformAnimatedUpdate(iS,iR);}),iQ.get_Updates());},RunAfter:function(iU,iV){var iW;iW=G.createTextNode("");iU.parentNode.insertBefore(iW,iU.nextSibling);return H.RunBetween(iU,iW,iV);},RunAfterById:function(iX,iY){var iZ;iZ=z.Doc().getElementById(iX);return m.Equals(iZ,null)?O.FailWith("invalid id: "+iX):H.RunAfter(iZ,iY);},RunAppend:function(i0,i1){var i2;i2=G.createTextNode("");i0.appendChild(i2);return H.RunBefore(i2,i1);},RunAppendById:function(i3,i4){var i5;i5=z.Doc().getElementById(i3);return m.Equals(i5,null)?O.FailWith("invalid id: "+i3):H.RunAppend(i5,i4);},RunBefore:function(i6,i7){var i8;i8=G.createTextNode("");i6.parentNode.insertBefore(i8,i6);return H.RunBetween(i8,i6,i7);},RunBeforeById:function(i9,i_){var i$;i$=z.Doc().getElementById(i9);return m.Equals(i$,null)?O.FailWith("invalid id: "+i9):H.RunBefore(i$,i_);},RunBetween:function(ja,jb,jc){var jd;K.LinkPrevElement(jb,jc.get_DocNode());jd=K.CreateDelimitedRunState(ja,jb,jc.get_DocNode());return F.Sink(N.StartProcessor(function(){return K.PerformAnimatedUpdate(jd,jc.get_DocNode());}),jc.get_Updates());},RunById:function(jf,jg){var jh;jh=z.Doc().getElementById(jf);return m.Equals(jh,null)?O.FailWith("invalid id: "+jf):H.Run(jh,jg);},RunPrepend:function(ji,jj){var jk;jk=G.createTextNode("");ji.insertBefore(jk,ji.firstChild);return H.RunBefore(jk,jj);},RunPrependById:function(jl,jm){var jn;jn=z.Doc().getElementById(jl);return m.Equals(jn,null)?O.FailWith("invalid id: "+jl):H.RunPrepend(jn,jm);},Select:function(jo,jp,jq,jr){return H.SelectDyn(jo,jp,F.Const(jq),jr);},SelectDyn:function(js,jt,ju,jv){var jw,jx,jB,jC,jD,jH;jw=[$.New(P,{$:0})];jx=function(jy){return function(jz){jy.selectedIndex=c.findIndex(function(jA){return m.Equals(jz,jA);},jw[0]);};};jB=z.CreateElement("select");jC=jv.get_View();jD=A.DynamicCustom(jx,jC);jB.addEventListener("change",function(){return jv.UpdateMaybe(function(jF){var jG;jG=jw[0].get_Item(jB.selectedIndex);return m.Equals(jF,jG)?{$:0}:{$:1,$0:jG};});},false);jH=H.Convert(function(jI){var jJ,jK;jJ=jI[0];jK=H.TextNode(jt(jI[1]));return H.Element("option",C.ofArray([B.Create("value",$$.String(jJ))]),C.ofArray([jK]));},v.Map(function(jL){jw[0]=jL;return c.mapi(function(jM){return function(jN){return[jM,jN];};},jL);},ju));return I.New(jB,B.Append(jD,B.Concat(js)),jH);},SelectDynOptional:function(jO,jP,jQ,jR,jS){return H.SelectDyn(jO,function(jT){return jT.$==1?jQ(jT.$0):jP;},v.Map(function(jU){return $.New(P,{$:1,$0:{$:0},$1:C.map(function(jV){return{$:1,$0:jV};},jU)});},jR),jS);},SelectOptional:function(jW,jX,jY,jZ,j0){return H.Select(jW,function(j1){return j1.$==1?jY(j1.$0):jX;},$.New(P,{$:1,$0:{$:0},$1:C.map(function(j2){return{$:1,$0:j2};},jZ)}),j0);},Static:function(j3){return I.New(j3,B.get_Empty(),H.get_Empty());},SvgElement:function(j4,j5,j6){var j7,j8;j7=B.Concat(j5);j8=H.Concat(j6);return I.New(z.CreateSvgElement(j4),j7,j8);},TextNode:function(j9){return H.Mk({$:5,$0:z.CreateText(j9)},F.Const(null));},TextView:function(j_){var j$,ka;j$=K.CreateTextNode();ka=v.Map(function(kb){return K.UpdateTextNode(j$,kb);},j_);return H.Mk({$:4,$0:j$},ka);},Verbatim:function(kc){var kd,ke,kf;kd=Q.parseHTML(kc);ke=m.Equals(kd,null)?[]:kd;kf=function(kg){return function(kh){return{$:0,$0:kg,$1:kh};};};return H.Mk(x.MapReduce(function(ki){return{$:1,$0:K.CreateElemNode(ki,B.get_Empty(),{$:3})};},{$:3},kf,ke),F.Const(null));},get_Empty:function(){return H.Mk({$:3},F.Const(null));}}),DocElemNode:$.Class({Equals:function(kj){return this.ElKey===kj.ElKey;},GetHashCode:function(){return this.ElKey;}}),Docs:{ComputeChangeAnim:function(kk,kl){var km,ko;km=function(kn){return y.HasChangeAnim(kn.Attr);};ko=function(kp){return R.Filter(km,kp);};return o.Concat(d.map(function(kq){return y.GetChangeAnim(kq.Attr);},R.ToArray(R.Intersect(ko(kk.PreviousNodes),ko(kl)))));},ComputeEnterAnim:function(kr,ks){return o.Concat(d.map(function(kt){return y.GetEnterAnim(kt.Attr);},R.ToArray(R.Except(kr.PreviousNodes,R.Filter(function(ku){return y.HasEnterAnim(ku.Attr);},ks)))));},ComputeExitAnim:function(kv,kw){return o.Concat(d.map(function(kx){return y.GetExitAnim(kx.Attr);},R.ToArray(R.Except(kw,R.Filter(function(ky){return y.HasExitAnim(ky.Attr);},kv.PreviousNodes)))));},CreateDelimitedElemNode:function(kz,kA,kB,kC){var kD,kE;kD=kz.parentNode;K.LinkPrevElement(kA,kC);kE=y.Insert(kD,kB);return $.New(S,$.DeleteEmptyFields({Attr:kE,Children:kC,Delimiters:[kz,kA],El:kD,ElKey:h.Int(),Render:$.GetOptional(kE.OnAfterRender).$0},["Render"]));},CreateDelimitedRunState:function(kF,kG,kH){return{PreviousNodes:R.get_Empty(),Top:K.CreateDelimitedElemNode(kF,kG,B.get_Empty(),kH)};},CreateElemNode:function(kI,kJ,kK){var kL;K.LinkElement(kI,kK);kL=y.Insert(kI,kJ);return $.New(S,$.DeleteEmptyFields({Attr:kL,Children:kK,El:kI,ElKey:h.Int(),Render:$.GetOptional(kL.OnAfterRender).$0},["Render"]));},CreateEmbedNode:function(){return{Current:{$:3},Dirty:false};},CreateRunState:function(kM,kN){return{PreviousNodes:R.get_Empty(),Top:K.CreateElemNode(kM,B.get_Empty(),kN)};},CreateTextNode:function(){return{Text:z.CreateText(""),Dirty:false,Value:""};},DoSyncElement:function(kO){var kP,kQ,kU,kW;kP=kO.El;kQ=function(kR,kS){var kT;if(kR.$==1){return{$:1,$0:kR.$0.El};}else{if(kR.$==2){kT=kR.$0;if(kT.Dirty){kT.Dirty=false;return K.InsertDoc(kP,kT.Current,kS);}else{return kQ(kT.Current,kS);}}else{return kR.$==3?kS:kR.$==4?{$:1,$0:kR.$0.Text}:kR.$==5?{$:1,$0:kR.$0}:kQ(kR.$0,kQ(kR.$1,kS));}}};kU=kO.El;T.Iter(function(kV){return z.RemoveNode(kU,kV);},T.Except(T.DocChildren(kO),T.Children(kO.El,$.GetOptional(kO.Delimiters))));kW=$.GetOptional(kO.Delimiters);kQ(kO.Children,kW.$==1?{$:1,$0:kW.$0[1]}:{$:0});return;},DomNodes:$.Class({},{Children:function(kX,kY){var kZ,k0,k1,k2,k3;if(kY.$==1){kZ=kY.$0[1];k0=kY.$0[0];k1=b.prototype.constructor.apply(b,[]);k2=k0.nextSibling;while(k2!==kZ){k1.push(k2);k2=k2.nextSibling;}return $.New(T,{$:0,$0:k1});}else{k3=kX.childNodes;return $.New(T,{$:0,$0:d.init(kX.childNodes.length,function(k4){return k3[k4];})});}},DocChildren:function(k5){var k6,k7;k6=[];k7=function(k8){var k9;if(k8.$==2){return k7(k8.$0.Current);}else{if(k8.$==1){return l.Add(k8.$0.El,k6);}else{if(k8.$==3){return null;}else{if(k8.$==5){return null;}else{if(k8.$==4){return l.Add(k8.$0.Text,k6);}else{k9=k8.$1;k7(k8.$0);return k7(k9);}}}}}};k7(k5.Children);return $.New(T,{$:0,$0:l.ToArray(k6)});},Except:function(k_,k$){var la;la=k_.$0;return $.New(T,{$:0,$0:d.filter(function(lb){return c.forall(function(lc){return!(lb===lc);},la);},k$.$0)});},FoldBack:function(ld,le,lf){return d.foldBack(ld,le.$0,lf);},Iter:function(lg,lh){return d.iter(lg,lh.$0);}}),InsertDoc:function(li,lj,lk){var ll;if(lj.$==1){return K.InsertNode(li,lj.$0.El,lk);}else{if(lj.$==2){ll=lj.$0;ll.Dirty=false;return K.InsertDoc(li,ll.Current,lk);}else{return lj.$==3?lk:lj.$==4?K.InsertNode(li,lj.$0.Text,lk):lj.$==5?K.InsertNode(li,lj.$0,lk):K.InsertDoc(li,lj.$0,K.InsertDoc(li,lj.$1,lk));}}},InsertNode:function(lm,ln,lo){z.InsertAt(lm,lo,ln);return{$:1,$0:ln};},LinkElement:function(lp,lq){K.InsertDoc(lp,lq,{$:0});},LinkPrevElement:function(lr,ls){K.InsertDoc(lr.parentNode,ls,{$:1,$0:lr});},NodeSet:$.Class({},{Except:function(lt,lu){return $.New(R,{$:0,$0:k.Except(lt.$0,lu.$0)});},Filter:function(lv,lw){return $.New(R,{$:0,$0:k.Filter(lv,lw.$0)});},FindAll:function(lx){var ly,lz;ly=[];lz=function(lA){var lB,lC;if(lA.$==0){lB=lA.$1;lz(lA.$0);return lz(lB);}else{if(lA.$==1){lC=lA.$0;l.Add(lC,ly);return lz(lC.Children);}else{return lA.$==2?lz(lA.$0.Current):null;}}};lz(lx);return $.New(R,{$:0,$0:j.New(l.ToArray(ly))});},Intersect:function(lD,lE){return $.New(R,{$:0,$0:k.Intersect(lD.$0,lE.$0)});},IsEmpty:function(lF){return lF.$0.get_Count()===0;},ToArray:function(lG){return k.ToArray(lG.$0);},get_Empty:function(){return $.New(R,{$:0,$0:j.New11()});}}),PerformAnimatedUpdate:function(lH,lI){return a.Delay(function(){var lK,lL,lM;lK=R.FindAll(lI);lL=K.ComputeChangeAnim(lH,lK);lM=K.ComputeEnterAnim(lH,lK);return a.Bind(o.Play(o.Append(lL,K.ComputeExitAnim(lH,lK))),function(){K.SyncElemNode(lH.Top);return a.Bind(o.Play(lM),function(){return a.Return(void(lH.PreviousNodes=lK));});});});},Sync:function(lP){var lQ;lQ=function(lR){var lS,lT,lU;if(lR.$==1){lS=lR.$0;K.SyncElement(lS);return lQ(lS.Children);}else{if(lR.$==2){return lQ(lR.$0.Current);}else{if(lR.$==3){return null;}else{if(lR.$==5){return null;}else{if(lR.$==4){lT=lR.$0;if(lT.Dirty){lT.Text.nodeValue=lT.Value;lT.Dirty=false;return;}else{return null;}}else{lU=lR.$1;lQ(lR.$0);return lQ(lU);}}}}}};return lQ(lP);},SyncElemNode:function(lV){K.SyncElement(lV);return K.Sync(lV.Children);},SyncElement:function(lW){var lX,l1;y.Sync(lW.El,lW.Attr);lX=function(lY){var lZ,l0;if(lY.$==0){lZ=lY.$1;return lX(lY.$0)?true:lX(lZ);}else{if(lY.$==2){l0=lY.$0;return l0.Dirty?true:lX(l0.Current);}else{return false;}}};if(lX(lW.Children)){K.DoSyncElement(lW);}l1=$.GetOptional(lW.Render);if(l1.$==1){l1.$0.call(null,lW.El);delete lW.Render;return;}else{return null;}},UpdateEmbedNode:function(l2,l3){l2.Current=l3;l2.Dirty=true;return;},UpdateTextNode:function(l4,l5){l4.Value=l5;l4.Dirty=true;return;}},DomUtility:{AddClass:function(l6,l7){Q(l6).addClass(l7);},AppendTo:function(l8,l9){l8.appendChild(l9);},Clear:function(l_){while(l_.hasChildNodes()){l_.removeChild(l_.firstChild);}return;},ClearAttrs:function(l$){while(l$.hasAttributes()){l$.removeAttributeNode(l$.attributes.item(0));}return;},CreateAttr:function(ma,mb){var mc;mc=z.Doc().createAttribute(ma);mc.value=mb;return mc;},CreateElement:function(md){return z.Doc().createElement(md);},CreateSvgElement:function(me){return z.Doc().createElementNS("http://www.w3.org/2000/svg",me);},CreateText:function(mf){return z.Doc().createTextNode(mf);},Doc:$.Field(function(){return G;}),InsertAt:function(mg,mh,mi){var mj,mk,ml;if(mi.parentNode===mg){mk=mi.nextSibling;ml=[mh,m.Equals(mk,null)?{$:0}:{$:1,$0:mk}];mj=ml[0].$==1?ml[1].$==1?ml[0].$0===ml[1].$0:false:ml[1].$==0?true:false;}else{mj=false;}return!mj?mh.$==1?void mg.insertBefore(mi,mh.$0):void mg.appendChild(mi):null;},RemoveAttr:function(mm,mn){return mm.removeAttribute(mn);},RemoveClass:function(mo,mp){Q(mo).removeClass(mp);},RemoveNode:function(mq,mr){return mr.parentNode===mq?void mq.removeChild(mr):null;},SetAttr:function(ms,mt,mu){return ms.setAttribute(mt,mu);},SetProperty:function($target,$name,$value){var $0=this,$this=this;return $target.setProperty($name,$value);},SetStyle:function(mv,mw,mx){return z.SetProperty(mv.style,mw,mx);}},DoubleInterpolation:$.Class({Interpolate:function(my,mz,mA){return mz+my*(mA-mz);}}),DynamicAttrNode:$.Class({GetChangeAnim:function(){return o.get_Empty();},GetEnterAnim:function(){return o.get_Empty();},GetExitAnim:function(){return o.get_Empty();},Init:function(mE){return this.init.call(null,mE);},Sync:function(mF){if(this.dirty){(this.push.call(null,mF))(this.value);this.dirty=false;return;}else{return null;}},get_Changed:function(){return this.updates;}},{New:function(mG,mH,mI){var mJ;mJ=$.New(this,{});mJ.init=mH;mJ.push=mI;mJ.value=g.U();mJ.dirty=true;mJ.updates=v.Map(function(mK){mJ.value=mK;mJ.dirty=true;return;},mG);return mJ;}}),Easing:$.Class({},{Custom:function(mL){return $.New(U,{TransformTime:mL});},get_CubicInOut:function(){return V.CubicInOut();}}),Easings:{CubicInOut:$.Field(function(){return $.New(U,{TransformTime:function(mM){var mN;mN=mM*mM;return 3*mN-2*(mN*mM);}});})},Elt:$.Class({AddClass:function($cls){var $this=this;return $this.elt.className+=" "+$cls;},Append:function(mO){var mP;mP=this.get_DocElemNode();mP.Children={$:0,$0:mP.Children,$1:mO.get_DocNode()};W.Set(this.rvUpdates,v.Map2(function(){return function(){return null;};},W.Get(this.rvUpdates),mO.get_Updates()));K.InsertDoc(this.elt,mO.get_DocNode(),{$:0});return;},Clear:function(){this.get_DocElemNode().Children={$:3};W.Set(this.rvUpdates,F.Const(null));while(this.elt.hasChildNodes()){this.elt.removeChild(this.elt.firstChild);}return;},GetAttribute:function(mS){return this.elt.getAttribute(mS);},GetProperty:function(mT){return this.elt[mT];},GetText:function(){return this.elt.textContent;},GetValue:function(){return this.elt.value;},HasAttribute:function(mU){return this.elt.hasAttribute(mU);},HasClass:function(mV){return(new X("(\\s|^)"+mV+"(\\s|$)")).test(this.elt.className);},Html:function(){return this.elt.outerHTML;},Id:function(){return this.elt.id;},OnAfterRender:function(mW){var mX,mY,mZ;mX=$.GetOptional(this.get_DocElemNode().Render);if(mX.$==1){mZ=mX.$0;mY={$:1,$0:function(m0){mZ(m0);return mW(m0);}};}else{mY={$:1,$0:mW};}$.SetOptional(this.get_DocElemNode(),"Render",mY);return this;},Prepend:function(m1){var m2,m5,m6;m2=this.get_DocElemNode();m2.Children={$:0,$0:m1.get_DocNode(),$1:m2.Children};W.Set(this.rvUpdates,v.Map2(function(){return function(){return null;};},W.Get(this.rvUpdates),m1.get_Updates()));m5=this.elt.firstChild;m6=m.Equals(m5,null)?{$:0}:{$:1,$0:m5};K.InsertDoc(this.elt,m1.get_DocNode(),m6);return;},RemoveAttribute:function(m7){return this.elt.removeAttribute(m7);},RemoveClass:function(m8){this.elt.className=this.elt.className.replace(new X("(\\s|^)"+m8+"(\\s|$)")," ");},SetAttribute:function(m9,m_){return this.elt.setAttribute(m9,m_);},SetProperty:function(m$,na){this.elt[m$]=na;},SetStyle:function(nb,nc){this.elt.style[nb]=nc;},SetText:function(nd){this.get_DocElemNode().Children={$:3};W.Set(this.rvUpdates,F.Const(null));this.elt.textContent=nd;return;},SetValue:function(ne){this.elt.value=ne;},get_DocElemNode:function(){var nf;nf=this.docNode1;return nf.$==1?nf.$0:O.FailWith("Elt: Invalid docNode");},get_Element:function(){return this.elt;},on:function(ng,nh){this.elt.addEventListener(ng,nh(this.elt),false);return this;}},{New:function(ni,nj,nk){var nl,nm,nn,no,nr;nl=K.CreateElemNode(ni,nj,nk.get_DocNode());nm=Y.Create(nk.get_Updates());nn=y.Updates(nl.Attr);no=function(){return function(){return null;};};nr=F.Bind(function(ns){return v.Map2(no,nn,ns);},nm.get_View());return I.New1({$:1,$0:nl},nr,ni,nm,nn);},New1:function(nt,nu,nv,nw){var ny;ny=$.New(this,H.New(nt,nu));ny.docNode1=nt;ny.elt=nv;ny.rvUpdates=nw;return ny;}}),Flow:$.Class({},{Bind:function(nz,nA){return{Render:function(nB){return function(nC){return(nz.Render.call(null,nB))(function(nD){return(nA(nD).Render.call(null,nB))(nC);});};}};},Define:function(nE){return{Render:function(nF){return function(nG){return W.Set(nF,nE(nG));};}};},Embed:function(nH){var nI;nI=Y.Create(H.get_Empty());(nH.Render.call(null,nI))(function(){});return H.EmbedView(nI.get_View());},Map:function(nK,nL){return{Render:function(nM){return function(nN){return(nL.Render.call(null,nM))(function(nO){return nN(nK(nO));});};}};},Return:function(nP){return{Render:function(){return function(nR){return nR(nP);};}};},get_Do:function(){return Z.New();}}),Flow1:$.Class({},{Static:function(nS){return{Render:function(nT){return function(nU){W.Set(nT,nS);return nU(null);};}};}}),FlowBuilder:$.Class({Bind:function(nV,nW){return _0.Bind(nV,nW);},Return:function(nX){return _0.Return(nX);},ReturnFrom:function(nY){return nY;}},{New:function(){return $.New(this,{});}}),Html:{attr:$.Class({},{New:function(){return $.New(this,{});}})},Input:{ActivateButtonListener:$.Field(function(){var nZ,n3;nZ=function(n0,n1){var n2;n2=n0.button;return n2===0?W.Set(_1.MouseBtnSt1().Left,n1):n2===1?W.Set(_1.MouseBtnSt1().Middle,n1):n2===2?W.Set(_1.MouseBtnSt1().Right,n1):null;};if(!_1.MouseBtnSt1().Active){_1.MouseBtnSt1().Active=true;G.addEventListener("mousedown",function(n4){return nZ(n4,true);},false);n3=G.addEventListener("mouseup",function(n5){return nZ(n5,false);},false);}else{n3=null;}return n3;}),ActivateKeyListener:$.Field(function(){var n6;if(!_1.KeyListenerState().KeyListenerActive){Q(G).keydown(function(n7){var n8,n9;n8=n7.which;W.Set(_1.KeyListenerState().LastPressed,n8);n9=W.Get(_1.KeyListenerState().KeysPressed);return!c.exists(function(n_){return n_===n8;},n9)?W.Set(_1.KeyListenerState().KeysPressed,C.append(n9,C.ofArray([n8]))):null;});n6=void Q(G).keyup(function(n$){var oa,ob,od;oa=n$.which;ob=function(oc){return oc!==oa;};od=function(oe){return C.filter(ob,oe);};return W.Update(_1.KeyListenerState().KeysPressed,od);});}else{n6=null;}return n6;}),KeyListenerState:$.Field(function(){return{KeysPressed:Y.Create($.New(P,{$:0})),KeyListenerActive:false,LastPressed:Y.Create(-1)};}),Keyboard:$.Class({},{IsPressed:function(of){var og;_1.ActivateKeyListener();og=function(oh){return oh===of;};return v.Map(function(oi){return c.exists(og,oi);},_1.KeyListenerState().KeysPressed.get_View());},get_KeysPressed:function(){_1.ActivateKeyListener();return _1.KeyListenerState().KeysPressed.get_View();},get_LastPressed:function(){_1.ActivateKeyListener();return _1.KeyListenerState().LastPressed.get_View();}}),Mouse:$.Class({},{get_LeftPressed:function(){_1.ActivateButtonListener();return _1.MouseBtnSt1().Left.get_View();},get_MiddlePressed:function(){_1.ActivateButtonListener();return _1.MouseBtnSt1().Middle.get_View();},get_MousePressed:function(){_1.ActivateButtonListener();return F.Apply(F.Apply(F.Apply(F.Const(function(oj){return function(ok){return function(ol){return(oj?true:ok)?true:ol;};};}),_1.MouseBtnSt1().Left.get_View()),_1.MouseBtnSt1().Middle.get_View()),_1.MouseBtnSt1().Right.get_View());},get_Position:function(){var om;om=function(on){return W.Set(_1.MousePosSt1().PosV,[on.clientX,on.clientY]);};if(!_1.MousePosSt1().Active){G.addEventListener("mousemove",om,false);_1.MousePosSt1().Active=true;}return _1.MousePosSt1().PosV.get_View();},get_RightPressed:function(){_1.ActivateButtonListener();return _1.MouseBtnSt1().Right.get_View();}}),MouseBtnSt1:$.Field(function(){return{Active:false,Left:Y.Create(false),Middle:Y.Create(false),Right:Y.Create(false)};}),MousePosSt1:$.Field(function(){return{Active:false,PosV:Y.Create([0,0])};})},Interpolation1:$.Class({},{get_Double:function(){return $.New(_2,{$:0});}}),Key:$.Class({},{Fresh:function(){return $.New(_3,{$:0,$0:h.Int()});}}),ListModel:$.Class({Add:function(oo){var op,or=this;op=W.Get(this.Var);return!_4.Contains(this.get_Key(),oo,op)?W.Set(this.Var,this.Storage.Add(oo,op)):W.Set(this.Var,this.Storage.SetAt(d.findINdex(function(oq){return m.Equals((or.get_Key())(oq),(or.get_Key())(oo));},op),oo,op));},Clear:function(){return W.Set(this.Var,this.Storage.Set(c.empty()));},ContainsKey:function(os){var ou=this;return c.exists(function(ot){return m.Equals(ou.key.call(null,ot),os);},W.Get(ou.Var));},ContainsKeyAsView:function(ov){var ow,oy=this;ow=function(ox){return m.Equals(oy.key.call(null,ox),ov);};return v.Map(function(oz){return c.exists(ow,oz);},oy.Var.get_View());},Find:function(oA){return d.find(oA,W.Get(this.Var));},FindAsView:function(oB){return v.Map(function(oC){return d.find(oB,oC);},this.Var.get_View());},FindByKey:function(oD){var oF=this;return d.find(function(oE){return m.Equals(oF.key.call(null,oE),oD);},W.Get(oF.Var));},FindByKeyAsView:function(oG){var oH,oJ=this;oH=function(oI){return m.Equals(oJ.key.call(null,oI),oG);};return v.Map(function(oK){return d.find(oH,oK);},oJ.Var.get_View());},Iter:function(oL){return d.iter(oL,W.Get(this.Var));},Lens:function(oM){return this.LensInto(function(oN){return oN;},function(){return function(oP){return oP;};},oM);},LensInto:function(oQ,oR,oS){return _5.New(this,oS,oQ,oR);},Remove:function(oT){var oU,oV,oW;oU=W.Get(this.Var);if(_4.Contains(this.key,oT,oU)){oV=this.key;oW=oV(oT);return W.Set(this.Var,this.Storage.RemoveIf(function(oX){return!m.Equals(oV(oX),oW);},oU));}else{return null;}},RemoveBy:function(oY){return W.Set(this.Var,this.Storage.RemoveIf(function(oZ){return!oY(oZ);},W.Get(this.Var)));},RemoveByKey:function(o0){var o2=this;return W.Set(this.Var,this.Storage.RemoveIf(function(o1){return!m.Equals((o2.get_Key())(o1),o0);},W.Get(o2.Var)));},Set:function(o3){return W.Set(this.Var,this.Storage.Set(o3));},TryFind:function(o4){return d.tryFind(o4,W.Get(this.Var));},TryFindAsView:function(o5){return v.Map(function(o6){return d.tryFind(o5,o6);},this.Var.get_View());},TryFindByKey:function(o7){var o9=this;return d.tryFind(function(o8){return m.Equals(o9.key.call(null,o8),o7);},W.Get(o9.Var));},TryFindByKeyAsView:function(o_){var o$,pb=this;o$=function(pa){return m.Equals(pb.key.call(null,pa),o_);};return v.Map(function(pc){return d.tryFind(o$,pc);},pb.Var.get_View());},UpdateAll:function(pd){var pi=this;return W.Update(this.Var,function(pe){d.iteri(function(pf){return function(pg){return u.iter(function(ph){return d.set(pe,pf,ph);},pd(pg));};},pe);return pi.Storage.Set(pe);});},UpdateBy:function(pj,pk){var pl,pm,po=this,pp,pq;pl=W.Get(this.Var);pm=d.tryFindIndex(function(pn){return m.Equals(po.key.call(null,pn),pk);},pl);if(pm.$==1){pp=pm.$0;pq=pj(d.get(pl,pp));return pq.$==1?W.Set(po.Var,po.Storage.SetAt(pp,pq.$0,pl)):null;}else{return null;}},get_Key:function(){return this.key;},get_Length:function(){return d.length(W.Get(this.Var));},get_LengthAsView:function(){return v.Map(function(pr){return d.length(pr);},this.Var.get_View());},get_View:function(){return this.view;}},{Create:function(ps,pt){return _6.CreateWithStorage(ps,_7.InMemory(c.toArray(pt)));},CreateWithStorage:function(pu,pv){var pw;pw=Y.Create(c.toArray(J.distinctBy(pu,pv.Init())));return $.New(_6,{key:pu,Var:pw,Storage:pv,view:v.Map(function(px){pv.Set(px);return px.slice();},pw.get_View())});}}),ListModel1:$.Class({},{FromSeq:function(py){return _6.Create(function(pz){return pz;},py);},Key:function(pA){return pA.key;},View:function(pB){return pB.view;}}),ListModels:{Contains:function(pC,pD,pE){var pF;pF=pC(pD);return c.exists(function(pG){return m.Equals(pC(pG),pF);},pE);}},Model:$.Class({get_View:function(){return _8.View(this);}},{Create:function(pH,pI){var pJ;pJ=Y.Create(pI);return $.New(_9,{$:0,$0:pJ,$1:v.Map(pH,pJ.get_View())});},Update:function(pK,pL){return W.Update(pL.$0,function(pM){pK(pM);return pM;});}}),Model1:$.Class({},{View:function(pN){return pN.$1;}}),ReactiveExtensions:$.Class({},{New:function(){return $.New(this,{});}}),RefImpl:$.Class({Get:function(){return this.get.call(null,this.baseRef.Get());},Set:function(pO){var pQ=this;return this.baseRef.Update(function(pP){return(pQ.update.call(null,pP))(pO);});},Update:function(pR){var pT=this;return this.baseRef.Update(function(pS){return(pT.update.call(null,pS))(pR(pT.get.call(null,pS)));});},UpdateMaybe:function(pU){var pW=this;return this.baseRef.UpdateMaybe(function(pV){return u.map(pW.update.call(null,pV),pU(pW.get.call(null,pV)));});},get_Id:function(){return this.id;},get_View:function(){return v.Map(this.get,this.baseRef.get_View());}},{New:function(pX,pY,pZ){var p0;p0=$.New(this,{});p0.baseRef=pX;p0.get=pY;p0.update=pZ;p0.id=h.Id();return p0;}}),RefImpl1:$.Class({Get:function(){return this.get.call(null,this.m.FindByKey(this.key));},Set:function(p1){var p3=this;return this.m.UpdateBy(function(p2){return{$:1,$0:(p3.update.call(null,p2))(p1)};},p3.key);},Update:function(p4){var p6=this;return this.m.UpdateBy(function(p5){return{$:1,$0:(p6.update.call(null,p5))(p4(p6.get.call(null,p5)))};},p6.key);},UpdateMaybe:function(p7){var p9=this;return this.m.UpdateBy(function(p8){return u.map(p9.update.call(null,p8),p7(p9.get.call(null,p8)));},p9.key);},get_Id:function(){return this.id;},get_View:function(){return v.Map(this.get,this.m.FindByKeyAsView(this.key));}},{New:function(p_,p$,qa,qb){var qc;qc=$.New(this,{});qc.m=p_;qc.key=p$;qc.get=qa;qc.update=qb;qc.id=h.Id();return qc;}}),Route:{Append:function(qd,qe){return{$:0,$0:p.Append(qd.$0,qe.$0)};},FromList:function(qf){return{$:0,$0:p.FromArray(d.ofSeq(qf))};},MakeHash:function(qg){return _.concat("/",d.map(function(qh){return ba(qh);},p.ToArray(qg.$0)));},NoHash:function(qi){return _.StartsWith(qi,"#")?qi.substring(1):qi;},ParseHash:function(qj){return{$:0,$0:p.FromArray(d.map(function(qk){return bb(qk);},_.SplitChars(bc.NoHash(qj),[47],1)))};},SameHash:function(ql,qm){return bc.NoHash(ql)===bc.NoHash(qm);},ToList:function(qn){return C.ofArray(p.ToArray(qn.$0));}},RouteMap1:$.Class({},{Create:function(qo,qp){return{Des:qp,Ser:qo};},Install:function(qq){return bd.InstallMap(qq);}}),Router:$.Class({},{Dir:function(qr,qs){return be.Prefix(qr,be.Merge(qs));},Install:function(qt,qu){return bd.Install(qt,qu);},Merge:function(qv){return bd.MergeRouters(qv);},Prefix:function(qw,qx){return{$:0,$0:qx.$0,$1:bf.Prefix(qw,qx.$1)};},Route:function(qy,qz,qA){return bd.DefineRoute(qy,qz,qA);}}),Routing:{ComputeBodies:function(qB){var qC;qC=bg.New12();d.iter(function(qD){return qC.set_Item(qD.RouteId,qD);},bf.ToArray(qB));return qC;},DefineRoute:function(qE,qF,qG){var qH,qI,qJ,qK;qH=Y.Create(qF);qI=h.Int();qJ=(qG({$:0,$0:qI}))(qH);qK=bf.Leaf({$:0,$0:qI,$1:function(qL){F.Sink(function(qM){return qL.UpdateRoute.call(null,bd.DoLink(qE,qM));},qH.get_View());return{OnRouteChanged:function(qN){return W.Set(qH,bd.DoRoute(qE,qN));},OnSelect:function(){return qL.UpdateRoute.call(null,bd.DoLink(qE,W.Get(qH)));},RouteId:qI,RouteValue:qJ};}});return{$:0,$0:{$:1,$0:qJ},$1:qK};},DoLink:function(qP,qQ){return bc.FromList(qP.Ser.call(null,qQ));},DoRoute:function(qR,qS){return qR.Des.call(null,bc.ToList(qS));},Install:function(qT,qU){var qV,qW,qX,q0,q1,q6,q8,q9,q_,ra;qV=qU.$0;qW=qU.$1;qX=bd.InstallMap({Des:function(qY){return bc.FromList(qY);},Ser:function(qZ){return bc.ToList(qZ);}});q0={Bodies:g.U(),CurrentRoute:qX,CurrentSite:0,Selection:g.U()};q1=bf.Map(function(q2){return function(q3){var q4;q4=q3.$0;return q3.$1.call(null,{UpdateRoute:function(q5){return bd.OnInternalSiteUpdate(q0,q4,q2,q5);}});};},qW);q0.Bodies=bd.ComputeBodies(q1);q6=function(q7){return bf.Lookup(q1,bc.ToList(q7));};q8=q6(W.Get(qX));if(q8.$==0){q_=q8.$0;q0.CurrentSite=q_.RouteId;q9=Y.Create(q_.RouteValue);}else{q9=Y.Create(qV.$==1?qV.$0:O.FailWith("Site.Install fails on empty site"));}q0.Selection=q9;F.Sink(function(q$){return bd.OnSelectSite(q0,qT(q$));},q9.get_View());ra=function(rb){var rc;rc=q6(rb);return rc.$==1?null:bd.OnGlobalRouteChange(q0,rc.$0,bc.FromList(rc.$1));};ra(W.Get(qX));F.Sink(ra,qX.get_View());return q9;},InstallMap:function(rd){var re,rg,rh;re=function(){return rd.Des.call(null,bc.ToList(bc.ParseHash(bh.location.hash)));};rg=Y.Create(re(null));rh=function(){var rj;rj=re(null);return!m.Equals(rd.Ser.call(null,W.Get(rg)),rd.Ser.call(null,rj))?W.Set(rg,rj):null;};bh.onpopstate=rh;bh.onhashchange=rh;F.Sink(function(rk){var rl;rl=bc.MakeHash(bc.FromList(rd.Ser.call(null,rk)));return!bc.SameHash(bh.location.hash,rl)?void(bh.location.hash=rl):null;},rg.get_View());return rg;},MergeRouters:function(rm){var rn,ro,rq;rn=c.toArray(rm);ro=bf.Merge(c.map(function(rp){return rp.$1;},rn));rq=c.tryPick(function(rr){return rr.$0;},rn);return ro.$==1?{$:0,$0:rq,$1:ro.$0}:O.FailWith("Invalid Site.Merge: need more prefix disambiguation");},OnGlobalRouteChange:function(rs,rt,ru){if(rs.CurrentSite!==rt.RouteId){rs.CurrentSite=rt.RouteId;W.Set(rs.Selection,rt.RouteValue);}return rt.OnRouteChanged.call(null,ru);},OnInternalSiteUpdate:function(rv,rw,rx,ry){return rv.CurrentSite===rw?bd.SetCurrentRoute(rv,bc.Append(bc.FromList(rx),ry)):null;},OnSelectSite:function(rz,rA){var rB;rB=rA.$0;if(rz.CurrentSite!==rB){rz.CurrentSite=rB;return rz.Bodies.get_Item(rB).OnSelect.call(null,null);}else{return null;}},SetCurrentRoute:function(rC,rD){return!m.Equals(W.Get(rC.CurrentRoute),rD)?W.Set(rC.CurrentRoute,rD):null;}},Snap1:{Bind:function(rE,rF){var rG,rH;rG=bi.Create();rH=function(){return bi.MarkObsolete(rG);};bi.When(rF,function(rJ){var rK;rK=rE(rJ);return bi.When(rK,function(rL){return(bi.IsForever(rK)?bi.IsForever(rF):false)?bi.MarkForever(rG,rL):bi.MarkReady(rG,rL);},rH);},rH);return rG;},Create:function(){return bi.Make({$:3,$0:[],$1:[]});},CreateForever:function(rM){return bi.Make({$:0,$0:rM});},CreateWithValue:function(rN){return bi.Make({$:2,$0:rN,$1:[]});},IsForever:function(rO){return rO.State.$==0?true:false;},IsObsolete:function(rP){return rP.State.$==1?true:false;},Make:function(rQ){return{State:rQ};},Map:function(rR,rS){var rT,rU;rT=rS.State;if(rT.$==0){return bi.CreateForever(rR(rT.$0));}else{rU=bi.Create();bi.When(rS,function(rV){return bi.MarkDone(rU,rS,rR(rV));},function(){return bi.MarkObsolete(rU);});return rU;}},Map2:function(rX,rY,rZ){var r0,r1,r2,r4,r5,r6,r7,r9;r0=[rY.State,rZ.State];if(r0[0].$==0){if(r0[1].$==0){r1=r0[1].$0;return bi.CreateForever((rX(r0[0].$0))(r1));}else{return bi.Map(rX(r0[0].$0),rZ);}}else{if(r0[1].$==0){r2=r0[1].$0;return bi.Map(function(r3){return(rX(r3))(r2);},rY);}else{r4=bi.Create();r5=[{$:0}];r6=[{$:0}];r7=function(){r5[0]={$:0};r6[0]={$:0};return bi.MarkObsolete(r4);};r9=function(){var r$,sa,sb;r$=[r5[0],r6[0]];if(r$[0].$==1){if(r$[1].$==1){sa=r$[0].$0;sb=r$[1].$0;return(bi.IsForever(rY)?bi.IsForever(rZ):false)?bi.MarkForever(r4,(rX(sa))(sb)):bi.MarkReady(r4,(rX(sa))(sb));}else{return null;}}else{return null;}};bi.When(rY,function(sc){r5[0]={$:1,$0:sc};return r9(null);},r7);bi.When(rZ,function(sd){r6[0]={$:1,$0:sd};return r9(null);},r7);return r4;}}},Map3:function(se,sf,sg,sh){var si,sj,sk,sl,sm,so,sp,sr,su,sv,sx,sA,sD,sE,sF,sG,sH,sJ;si=[sf.State,sg.State,sh.State];if(si[0].$==0){if(si[1].$==0){if(si[2].$==0){sj=si[1].$0;sk=si[2].$0;return bi.CreateForever(((se(si[0].$0))(sj))(sk));}else{sl=si[0].$0;sm=si[1].$0;return bi.Map(function(sn){return((se(sl))(sm))(sn);},sh);}}else{if(si[2].$==0){so=si[0].$0;sp=si[2].$0;return bi.Map(function(sq){return((se(so))(sq))(sp);},sg);}else{sr=si[0].$0;return bi.Map2(function(ss){return function(st){return((se(sr))(ss))(st);};},sg,sh);}}}else{if(si[1].$==0){if(si[2].$==0){su=si[1].$0;sv=si[2].$0;return bi.Map(function(sw){return((se(sw))(su))(sv);},sf);}else{sx=si[1].$0;return bi.Map2(function(sy){return function(sz){return((se(sy))(sx))(sz);};},sf,sh);}}else{if(si[2].$==0){sA=si[2].$0;return bi.Map2(function(sB){return function(sC){return((se(sB))(sC))(sA);};},sf,sg);}else{sD=bi.Create();sE=[{$:0}];sF=[{$:0}];sG=[{$:0}];sH=function(){sE[0]={$:0};sF[0]={$:0};sG[0]={$:0};return bi.MarkObsolete(sD);};sJ=function(){var sL,sM,sN,sO;sL=[sE[0],sF[0],sG[0]];if(sL[0].$==1){if(sL[1].$==1){if(sL[2].$==1){sM=sL[0].$0;sN=sL[1].$0;sO=sL[2].$0;return((bi.IsForever(sf)?bi.IsForever(sg):false)?bi.IsForever(sh):false)?bi.MarkForever(sD,((se(sM))(sN))(sO)):bi.MarkReady(sD,((se(sM))(sN))(sO));}else{return null;}}else{return null;}}else{return null;}};bi.When(sf,function(sP){sE[0]={$:1,$0:sP};return sJ(null);},sH);bi.When(sg,function(sQ){sF[0]={$:1,$0:sQ};return sJ(null);},sH);bi.When(sh,function(sR){sG[0]={$:1,$0:sR};return sJ(null);},sH);return sD;}}}},MapAsync:function(sS,sT){var sU;sU=bi.Create();bi.When(sT,function(sV){return bj.StartTo(sS(sV),function(sW){return bi.MarkDone(sU,sT,sW);});},function(){return bi.MarkObsolete(sU);});return sU;},MapCached:function(sY,sZ,s0){return bi.Map(function(s1){var s2,s3,s4;s2=sY[0];if(s2.$==1){if(m.Equals(s1,s2.$0[0])){return s2.$0[1];}else{s3=sZ(s1);sY[0]={$:1,$0:[s1,s3]};return s3;}}else{s4=sZ(s1);sY[0]={$:1,$0:[s1,s4]};return s4;}},s0);},MarkDone:function(s5,s6,s7){return bi.IsForever(s6)?bi.MarkForever(s5,s7):bi.MarkReady(s5,s7);},MarkForever:function(s8,s9){var s_,s$;s_=s8.State;if(s_.$==3){s$=s_.$0;s8.State={$:0,$0:s9};return l.Iter(function(ta){return ta(s9);},s$);}else{return null;}},MarkObsolete:function(tb){var tc,td,tf;tc=tb.State;if(tc.$==1){return null;}else{if(tc.$==2){td=tc.$1;tb.State={$:1};return l.Iter(function(te){return te(null);},td);}else{if(tc.$==3){tf=tc.$1;tb.State={$:1};return l.Iter(function(tg){return tg(null);},tf);}else{return null;}}}},MarkReady:function(th,ti){var tj,tk;tj=th.State;if(tj.$==3){tk=tj.$0;th.State={$:2,$0:ti,$1:tj.$1};return l.Iter(function(tl){return tl(ti);},tk);}else{return null;}},SnapshotOn:function(tm,tn){var to,tp,tq,tr,ts;to=[tm.State,tn.State];if(to[1].$==0){return bi.CreateForever(to[1].$0);}else{tp=bi.Create();tq=[{$:0}];tr=[false];ts=function(){var tu;if(tr[0]){tu=tq[0];return tu.$==1?bi.IsForever(tn)?bi.MarkForever(tp,tu.$0):tu.$==1?bi.MarkReady(tp,tu.$0):null:tu.$==1?bi.MarkReady(tp,tu.$0):null;}else{return null;}};bi.When(tm,function(){tr[0]=true;return ts(null);},function(){tq[0]={$:0};return bi.MarkObsolete(tp);});bi.When(tn,function(tx){tq[0]={$:1,$0:tx};return ts(null);},function(){});return tp;}},When:function(tz,tA,tB){var tC,tD,tE;tC=tz.State;if(tC.$==1){return tB(null);}else{if(tC.$==2){tD=tC.$0;l.Add(tB,tC.$1);return tA(tD);}else{if(tC.$==3){tE=tC.$1;l.Add(tA,tC.$0);return l.Add(tB,tE);}else{return tA(tC.$0);}}}}},Storage1:{ArrayStorage:$.Class({Add:function(tF,tG){tG.push(tF);return tG;},Init:function(){return this.init;},RemoveIf:function(tH,tI){return d.filter(tH,tI);},Set:function(tJ){return c.toArray(tJ);},SetAt:function(tK,tL,tM){d.set(tM,tK,tL);return tM;}},{New:function(tN){var tO;tO=$.New(this,{});tO.init=tN;return tO;}}),InMemory:function(tP){return bk.New(tP);},LocalStorage:function(tQ,tR){return bl.New(tQ,tR);},LocalStorageBackend:$.Class({Add:function(tS,tT){tT.push(tS);return this.set(tT);},Init:function(){var tU,tV;tU=this.storage.getItem(this.id);if(tU===null){return[];}else{try{return d.map(this.serializer.Decode,bm.parse(tU));}catch(tV){return[];}}},RemoveIf:function(tW,tX){return this.set(d.filter(tW,tX));},Set:function(tY){return this.set(c.toArray(tY));},SetAt:function(tZ,t0,t1){d.set(t1,tZ,t0);return this.set(t1);},clear:function(){return this.storage.removeItem(this.id);},set:function(t2){this.storage.setItem(this.id,bm.stringify(d.map(this.serializer.Encode,t2)));return t2;}},{New:function(t3,t4){var t5;t5=$.New(this,{});t5.id=t3;t5.serializer=t4;t5.storage=bh.localStorage;return t5;}})},String:{isBlank:function(t6){return _.forall(function(t7){return bn.IsWhiteSpace(t7);},t6);}},Submitter:$.Class({Trigger:function(){return W.Set(this["var"],null);},get_Input:function(){return this.input;},get_View:function(){return this.view;}},{Create:function(t8,t9){return bo.New(t8,t9);},CreateOption:function(t_){return bo.New(v.Map(function(t$){return{$:1,$0:t$};},t_),{$:0});},New:function(ua,ub){var uc,ud;uc=$.New(this,{});uc.input=ua;uc["var"]=Y.Create(null);ud=uc.input;uc.view=v.SnapshotOn(ub,uc["var"].get_View(),ud);return uc;},View:function(ue){return ue.get_View();}}),Submitter1:$.Class({},{Input:function(uf){return uf.get_Input();},Trigger:function(ug){return ug.Trigger();}}),Trans:$.Class({},{AnimateChange:function(uh,ui,uj){return(uh.TChange.call(null,ui))(uj);},AnimateEnter:function(uk,ul){return uk.TEnter.call(null,ul);}}),Trans1:$.Class({},{AnimateExit:function(um,un){return um.TExit.call(null,un);},CanAnimateChange:function(uo){return(uo.TFlags&1)!==0;},CanAnimateEnter:function(up){return(up.TFlags&2)!==0;},CanAnimateExit:function(uq){return(uq.TFlags&4)!==0;},Change:function(ur,us){return{TChange:ur,TEnter:us.TEnter,TExit:us.TExit,TFlags:us.TFlags|1};},Create:function(ut){return{TChange:ut,TEnter:function(uu){return o.Const(uu);},TExit:function(uv){return o.Const(uv);},TFlags:1};},Enter:function(uw,ux){return{TChange:ux.TChange,TEnter:uw,TExit:ux.TExit,TFlags:ux.TFlags|2};},Exit:function(uy,uz){return{TChange:uz.TChange,TEnter:uz.TEnter,TExit:uy,TFlags:uz.TFlags|4};},Trivial:function(){return{TChange:function(){return function(uB){return o.Const(uB);};},TEnter:function(uC){return o.Const(uC);},TExit:function(uD){return o.Const(uD);},TFlags:0};}}),Trie1:{AllSome:function(uE){var uF,uG,uH,uI;uF=bp.Get(uE);uG=br.New2();uH=true;while(uH?uF.MoveNext():false){uI=uF.get_Current();if(uI.$==1){uG.Add(uI.$0);}else{uH=false;}}return uH?{$:1,$0:uG.ToArray()}:{$:0};},Empty:function(){return{$:1};},IsLeaf:function(uJ){return uJ.$==2?true:false;},Leaf:function(uK){return{$:2,$0:uK};},Look:function(uL,uM){var uN,uO,uP;uN=[uM,uL];if(uN[0].$==2){return{$:0,$0:uN[0].$0,$1:uL};}else{if(uN[0].$==0){if(uN[1].$==1){uO=uN[1].$1;uP=bs.TryFind(uN[1].$0,uN[0].$0);return uP.$==0?{$:1}:bf.Look(uO,uP.$0);}else{return{$:1};}}else{return{$:1};}}},Lookup:function(uQ,uR){return bf.Look(c.toList(uR),uQ);},Map:function(uS,uT){return bf.MapLoop($.New(P,{$:0}),uS,uT);},MapLoop:function(uU,uV,uW){var uX;if(uW.$==1){return{$:1};}else{if(uW.$==2){uX=uW.$0;return{$:2,$0:(uV(uU))(uX)};}else{return bf.TrieBranch(bs.Map(function(uY){return function(uZ){return bf.MapLoop(C.append(uU,C.ofArray([uY])),uV,uZ);};},uW.$0));}}},Mapi:function(u0,u1){var u2;u2=[0];return bf.Map(function(u3){var u4;u4=u2[0];u2[0]=u4+1;return(u0(u4))(u3);},u1);},Merge:function(u5){var u6,u7;u6=c.toArray(u5);u7=d.length(u6);return u7===0?{$:1,$0:{$:1}}:u7===1?{$:1,$0:d.get(u6,0)}:c.exists(function(u8){return bf.IsLeaf(u8);},u6)?{$:0}:u.map(function(u9){return bf.TrieBranch(u9);},bf.MergeMaps(function(u_){return bf.Merge(u_);},c.choose(function(u$){return u$.$==0?{$:1,$0:u$.$0}:{$:0};},u6)));},MergeMaps:function(va,vb){var vc;vc=c.collect(function(vd){return bs.ToSeq(vd);},vb);return u.map(function(ve){return bs.OfArray(c.toArray(ve));},bf.AllSome(c.map(function(vf){var vg;vg=vf[0];return u.map(function(vh){return[vg,vh];},va(vf[1]));},bs.ToSeq(c.fold(function(vi){return function(vj){return bf.MultiAdd(vj[0],vj[1],vi);};},bt.New1([]),vc)))));},MultiAdd:function(vk,vl,vm){return vm.Add(vk,$.New(P,{$:1,$0:vl,$1:bf.MultiFind(vk,vm)}));},MultiFind:function(vn,vo){return O.DefaultArg(bs.TryFind(vn,vo),$.New(P,{$:0}));},Prefix:function(vp,vq){return bf.TrieBranch(bt.New1(C.ofArray([[vp,vq]])));},ToArray:function(vr){var vs;vs=[];bf.Map(function(){return function(vu){return l.Add(vu,vs);};},vr);return l.ToArray(vs);},TrieBranch:function(vv){return vv.get_IsEmpty()?{$:1}:{$:0,$0:vv};}},Var:$.Class({Get:function(){return W.Get(this);},Set:function(vw){return W.Set(this,vw);},Update:function(vx){return W.Update(this,vx);},UpdateMaybe:function(vy){var vz;vz=vy(W.Get(this));return vz.$==1?W.Set(this,vz.$0):null;},get_Id:function(){return"uinref"+$$.String(W.GetId(this));},get_View:function(){var vB=this;return{$:0,$0:function(){return W.Observe(vB);}};},get_View1:function(){return this.get_View();}},{Create:function(vC){return $.New(Y,{Const:false,Current:vC,Snap:bi.CreateWithValue(vC),Id:h.Int()});}}),Var1:$.Class({},{Get:function(vD){return vD.Current;},GetId:function(vE){return vE.Id;},Lens:function(vF,vG,vH){return bu.New(vF,vG,vH);},Observe:function(vI){return vI.Snap;},Set:function(vJ,vK){if(vJ.Const){return null;}else{bi.MarkObsolete(vJ.Snap);vJ.Current=vK;vJ.Snap=bi.CreateWithValue(vK);return;}},SetFinal:function(vL,vM){if(vL.Const){return null;}else{vL.Const=true;vL.Current=vM;vL.Snap=bi.CreateForever(vM);return;}},Update:function(vN,vO){return W.Set(vN,vO(W.Get(vN)));}}),View:$.Class({},{ConvertSeqNode:function(vP,vQ){var vR,vS;vR=Y.Create(vQ);vS=vR.get_View();return{NValue:vP(vS),NVar:vR,NView:vS};},CreateLazy:function(vT){var vU;vU=[{$:0}];return{$:0,$0:function(){var vW,vX,vY;vW=vU[0];if(vW.$==1){if(!bi.IsObsolete(vW.$0)){return vW.$0;}else{vX=vT(null);vU[0]={$:1,$0:vX};return vX;}}else{vY=vT(null);vU[0]={$:1,$0:vY};return vY;}}};},CreateLazy2:function(vZ,v0,v1){var v2,v3;v2=v0.$0;v3=v1.$0;return v.CreateLazy(function(){var v5,v6;v5=v2(null);v6=v3(null);return(vZ(v5))(v6);});},Map:function(v7,v8){var v9;v9=v8.$0;return v.CreateLazy(function(){return bi.Map(v7,v9(null));});},Map2:function(v$,wa,wb){return v.CreateLazy2(function(wc){return function(wd){return bi.Map2(v$,wc,wd);};},wa,wb);},MapAsync:function(we,wf){var wg;wg=wf.$0;return v.CreateLazy(function(){return bi.MapAsync(we,wg(null));});},MapCached:function(wi,wj){var wk,wl;wk=wj.$0;wl=[{$:0}];return v.CreateLazy(function(){return bi.MapCached(wl,wi,wk(null));});},MapSeqCached:function(wn,wo){return v.MapSeqCachedBy(function(wp){return wp;},wn,wo);},MapSeqCachedBy:function(wq,wr,ws){var wt;wt=[bg.New12()];return v.Map(function(wu){var wv,ww,wx;wv=wt[0];ww=bg.New12();wx=d.map(function(wy){var wz,wA;wz=wq(wy);wA=wv.ContainsKey(wz)?wv.get_Item(wz):wr(wy);ww.set_Item(wz,wA);return wA;},c.toArray(wu));wt[0]=ww;return wx;},ws);},MapSeqCachedView:function(wB,wC){return v.MapSeqCachedViewBy(function(wD){return wD;},function(){return function(wF){return wB(wF);};},wC);},MapSeqCachedViewBy:function(wG,wH,wI){var wJ;wJ=[bg.New12()];return v.Map(function(wK){var wL,wM,wN;wL=wJ[0];wM=bg.New12();wN=d.map(function(wO){var wP,wQ,wR;wP=wG(wO);if(wL.ContainsKey(wP)){wR=wL.get_Item(wP);W.Set(wR.NVar,wO);wQ=wR;}else{wQ=v.ConvertSeqNode(function(wS){return(wH(wP))(wS);},wO);}wM.set_Item(wP,wQ);return wQ.NValue;},c.toArray(wK));wJ[0]=wM;return wN;},wI);},SnapshotOn:function(wT,wU,wV){var wW,wX,wY,wZ;wW=wU.$0;wX=wV.$0;wY=bi.CreateWithValue(wT);wZ=[false];return v.CreateLazy(function(){var w1,w2;w1=wW(null);w2=wX(null);if(wZ[0]){return bi.SnapshotOn(w1,w2);}else{bi.When(bi.SnapshotOn(w1,w2),function(){return null;},function(){if(!wZ[0]){wZ[0]=true;return bi.MarkObsolete(wY);}else{return null;}});return wY;}});},UpdateWhile:function(w5,w6,w7){var w8;w8=[w5];return v.Map2(function(w9){return function(w_){if(w9){w8[0]=w_;}return w8[0];};},w6,w7);},get_Do:function(){return{$:0};}}),View1:$.Class({},{Apply:function(w$,xa){return v.Map2(function(xb){return function(xc){return xb(xc);};},w$,xa);},Bind:function(xd,xe){return F.Join(v.Map(xd,xe));},Const:function(xf){var xg;xg=bi.CreateForever(xf);return{$:0,$0:function(){return xg;}};},Join:function(xi){var xj;xj=xi.$0;return v.CreateLazy(function(){return bi.Bind(function(xl){return xl.$0.call(null,null);},xj(null));});},Sink:function(xm,xn){var xo,xp;xo=xn.$0;xp=function(){return bi.When(xo(null),xm,function(){return bj.Schedule(xp);});};return bj.Schedule(xp);}})}}}});$.OnInit(function(){a=$.Safe($$.WebSharper.Concurrency);b=$.Safe($$.Array);c=$.Safe($$.WebSharper.Seq);d=$.Safe($$.WebSharper.Arrays);e=$.Safe($$.WebSharper.UI);f=$.Safe(e.Next);g=$.Safe(f.Abbrev);h=$.Safe(g.Fresh);i=$.Safe($$.WebSharper.Collections);j=$.Safe(i.HashSetProxy);k=$.Safe(g.HashSet);l=$.Safe(g.JQueue);m=$.Safe($$.WebSharper.Unchecked);n=$.Safe(g.Slot1);o=$.Safe(f.An);p=$.Safe(f.AppendList1);q=$.Safe(f.Anims);r=$.Safe($$.requestAnimationFrame);s=$.Safe(f.Trans);t=$.Safe(f.Trans1);u=$.Safe($$.WebSharper.Option);v=$.Safe(f.View);w=$.Safe($$.WebSharper.Lazy);x=$.Safe(f.Array);y=$.Safe(f.Attrs);z=$.Safe(f.DomUtility);A=$.Safe(f.AttrModule);B=$.Safe(f.AttrProxy);C=$.Safe($$.WebSharper.List);D=$.Safe(f.AnimatedAttrNode);E=$.Safe(f.DynamicAttrNode);F=$.Safe(f.View1);G=$.Safe($$.document);H=$.Safe(f.Doc);I=$.Safe(f.Elt);J=$.Safe($$.Seq);K=$.Safe(f.Docs);L=$.Safe(f.String);M=$.Safe(f.CheckedInput);N=$.Safe(g.Mailbox);O=$.Safe($$.WebSharper.Operators);P=$.Safe(C.T);Q=$.Safe($$.jQuery);R=$.Safe(K.NodeSet);S=$.Safe(f.DocElemNode);T=$.Safe(K.DomNodes);U=$.Safe(f.Easing);V=$.Safe(f.Easings);W=$.Safe(f.Var1);X=$.Safe($$.RegExp);Y=$.Safe(f.Var);Z=$.Safe(f.FlowBuilder);_0=$.Safe(f.Flow);_1=$.Safe(f.Input);_2=$.Safe(f.DoubleInterpolation);_3=$.Safe(f.Key);_4=$.Safe(f.ListModels);_5=$.Safe(f.RefImpl1);_6=$.Safe(f.ListModel);_7=$.Safe(f.Storage1);_8=$.Safe(f.Model1);_9=$.Safe(f.Model);_=$.Safe($$.WebSharper.Strings);ba=$.Safe($$.encodeURIComponent);bb=$.Safe($$.decodeURIComponent);bc=$.Safe(f.Route);bd=$.Safe(f.Routing);be=$.Safe(f.Router);bf=$.Safe(f.Trie1);bg=$.Safe(i.Dictionary);bh=$.Safe($$.window);bi=$.Safe(f.Snap1);bj=$.Safe(g.Async);bk=$.Safe(_7.ArrayStorage);bl=$.Safe(_7.LocalStorageBackend);bm=$.Safe($$.JSON);bn=$.Safe($$.WebSharper.Char);bo=$.Safe(f.Submitter);bp=$.Safe($$.WebSharper.Enumerator);bq=$.Safe(i.ResizeArray);br=$.Safe(bq.ResizeArrayProxy);bs=$.Safe(i.MapModule);bt=$.Safe(i.FSharpMap);return bu=$.Safe(f.RefImpl);});$.OnLoad(function(){$.Inherit(I,H);_1.MousePosSt1();_1.MouseBtnSt1();_1.KeyListenerState();_1.ActivateKeyListener();_1.ActivateButtonListener();V.CubicInOut();z.Doc();y.EmptyAttr();A.ValidateForm();h.counter();return;});}());

(function(){var $$=this,$=this.IntelliFactory.Runtime,a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v;$.Define($$,{WebSharper:{Testing:{Pervasives:{Do:$.Field(function(){return c.New();}),PropertyWith:function(w,x,y){var z;z=b.Test(w);return z.Run(z.PropertyWithSample(z.Yield(null),function(){return e.Make(x,100);},function(){return y;}));},PropertyWithSample:function(C,D,E){var F;F=b.Test(C);return F.Run(F.PropertyWithSample(F.Yield(null),function(){return D;},function(){return E;}));},Runner:{AddTest:function(I,J,K){var L,N;L=function(M){(I(K))(M);return M;};N=J(K);return f.Map(L,N);},AddTestAsync:function(O,P,Q){var R,V;R=function(S){return g.Delay(function(){return g.Bind((O(Q))(S),function(){return g.Return(S);});});};V=P(Q);return f.MapAsync(R,V);},Bind:function(W,X){var Y,Z,_2;if(X.$==1){Z=X.$0;Y={$:1,$0:g.Delay(function(){return g.Bind(Z,function(_1){return f.ToAsync(W(_1));});})};}else{_2=X.$0;Y=W(_2);}return Y;},Map:function(_3,_4){var _5,_6,_9;if(_4.$==1){_6=_4.$0;_5={$:1,$0:g.Delay(function(){return g.Bind(_6,function(_8){return g.Return(_3(_8));});})};}else{_9=_4.$0;_5={$:0,$0:_3(_9)};}return _5;},MapAsync:function(_,ba){var bb,bc,bf;if(ba.$==1){bc=ba.$0;bb={$:1,$0:g.Delay(function(){return g.Bind(bc,function(be){return _(be);});})};}else{bf=ba.$0;bb={$:1,$0:_(bf)};}return bb;},ToAsync:function(bf){var bg,bh,bi;if(bf.$==1){bh=bf.$0;bg=bh;}else{bi=bf.$0;bg=g.Delay(function(){return g.Return(bi);});}return bg;}},SubtestBuilder:$.Class({ApproxEqual:function(bk,bl,bm){var bn;bn=function(bo){return function(bp){var bq,br;bq=bl(bp);br=bm(bp);return bo.push(h.abs(bq-br)<0.0001,bq,br);};};return function(bs){return f.AddTest(bn,bk,bs);};},ApproxEqualAsync:function(bt,bu,bv){var bw;bw=function(bx){return function(by){return g.Delay(function(){var bA;bA=bv(by);return g.Bind(bu(by),function(bB){return g.Return(bx.push(h.abs(bB-bA)<0.0001,bB,bA));});});};};return function(bC){return f.AddTestAsync(bw,bt,bC);};},ApproxEqualMsg:function(bD,bE,bF,bG){var bH;bH=function(bI){return function(bJ){var bK,bL;bK=bE(bJ);bL=bF(bJ);return bI.push(h.abs(bK-bL)<0.0001,bK,bL,bG);};};return function(bM){return f.AddTest(bH,bD,bM);};},ApproxEqualMsgAsync:function(bN,bO,bP,bQ){var bR;bR=function(bS){return function(bT){return g.Delay(function(){var bV;bV=bP(bT);return g.Bind(bO(bT),function(bW){return g.Return(bS.push(h.abs(bW-bV)<0.0001,bW,bV,bQ));});});};};return function(bX){return f.AddTestAsync(bR,bN,bX);};},Bind:function(bY,bZ){return function(b0){return{$:1,$0:g.Delay(function(){return g.Bind(bY,function(b2){var b3,b4,b5,b6;b3=(bZ(b2))(b0);if(b3.$==1){b5=b3.$0;b4=b5;}else{b6=b3.$0;b4=g.Return(b6);}return b4;});})};};},DeepEqual:function(b7,b8,b9){var b_;b_=function(b$){return function(ca){return b$.deepEqual(b8(ca),b9(ca));};};return function(cb){return f.AddTest(b_,b7,cb);};},DeepEqualAsync:function(cc,cd,ce){var cf;cf=function(cg){return function(ch){return g.Delay(function(){var cj;cj=ce(ch);return g.Bind(cd(ch),function(ck){return g.Return(cg.deepEqual(ck,cj));});});};};return function(cl){return f.AddTestAsync(cf,cc,cl);};},DeepEqualMsg:function(cm,cn,co,cp){var cq;cq=function(cr){return function(cs){return cr.deepEqual(cn(cs),co(cs),cp);};};return function(ct){return f.AddTest(cq,cm,ct);};},DeepEqualMsgAsync:function(cu,cv,cw,cx){var cy;cy=function(cz){return function(cA){return g.Delay(function(){var cC;cC=cw(cA);return g.Bind(cv(cA),function(cD){return g.Return(cz.deepEqual(cD,cC,cx));});});};};return function(cE){return f.AddTestAsync(cy,cu,cE);};},Equal:function(cF,cG,cH){var cI;cI=function(cJ){return function(cK){var cL,cM;cL=cG(cK);cM=cH(cK);return cJ.push(i.Equals(cL,cM),cL,cM);};};return function(cN){return f.AddTest(cI,cF,cN);};},EqualAsync:function(cO,cP,cQ){var cR;cR=function(cS){return function(cT){return g.Delay(function(){var cV;cV=cQ(cT);return g.Bind(cP(cT),function(cW){return g.Return(cS.push(i.Equals(cW,cV),cW,cV));});});};};return function(cX){return f.AddTestAsync(cR,cO,cX);};},EqualMsg:function(cY,cZ,c0,c1){var c2;c2=function(c3){return function(c4){var c5,c6;c5=cZ(c4);c6=c0(c4);return c3.push(i.Equals(c5,c6),c5,c6,c1);};};return function(c7){return f.AddTest(c2,cY,c7);};},EqualMsgAsync:function(c8,c9,c_,c$){var da;da=function(db){return function(dc){return g.Delay(function(){var de;de=c_(dc);return g.Bind(c9(dc),function(df){return g.Return(db.push(i.Equals(df,de),df,de,c$));});});};};return function(dg){return f.AddTestAsync(da,c8,dg);};},Expect:function(dh,di){var dj;dj=function(dk){return function(dl){return dk.expect(di(dl));};};return function(dm){return f.AddTest(dj,dh,dm);};},For:function(dn,_do){return function(dp){var dq,dr,ds,dt,du,dv,dw,dx,dz,dA;dq=[];dr=dn.get_Data();ds={$:0,$0:undefined};dq[2]=dr;dq[1]=ds;dq[0]=1;while(dq[0]){if(dq[2].$==1){du=dq[2].$1;dv=dq[2].$0;dw=_do(dv);dx=function(){return dw(dp);};dz=dq[1];dA=f.Bind(dx,dz);dq[2]=du;dq[1]=dA;dt=void(dq[0]=1);}else{dq[0]=0;dt=void(dq[1]=dq[1]);}}return dq[1];};},For1:function(dB,dC){return this.For(e.New(dB),dC);},For2:function(dD,dE){return function(dF){var dG,dH,dI,dP;dG=dD(dF);if(dG.$==1){dI=dG.$0;dH={$:1,$0:g.Delay(function(){return g.Bind(dI,function(dK){var dL,dM,dN,dO;dL=(dE(dK))(dF);if(dL.$==1){dN=dL.$0;dM=dN;}else{dO=dL.$0;dM=g.Return(dO);}return dM;});})};}else{dP=dG.$0;dH=(dE(dP))(dF);}return dH;};},ForEach:function(dQ,dR,dS){return function(dT){var dU,d7,d9;dU=function(dV,dW,dX){var dY,dZ,d0,d1,d2;if(dX.$==1){dZ=dX.$1;d0=dX.$0;d1=dV(d0);d2=function(d3){var d4,d6;d4=function(){return d3;};d6=d1(dT);return f.Map(d4,d6);};dY=dU(dV,f.Bind(d2,dW),dZ);}else{dY=dW;}return dY;};d7=function(d8){return dU(dS(d8),{$:0,$0:d8},j.ofSeq(dR(d8)));};d9=dQ(dT);return f.Bind(d7,d9);};},IsFalse:function(d_,d$){var ea;ea=function(eb){return function(ec){return eb.ok(!d$(ec));};};return function(ed){return f.AddTest(ea,d_,ed);};},IsFalseAsync:function(ee,ef){var eg;eg=function(eh){return function(ei){return g.Delay(function(){return g.Bind(ef(ei),function(ek){return g.Return(eh.ok(!ek));});});};};return function(el){return f.AddTestAsync(eg,ee,el);};},IsFalseAsync1:function(em,en,eo){var ep;ep=function(eq){return function(er){return g.Delay(function(){return g.Bind(en(er),function(et){return g.Return(eq.ok(!et,eo));});});};};return function(eu){return f.AddTestAsync(ep,em,eu);};},IsFalseMsg:function(ev,ew,ex){var ey;ey=function(ez){return function(eA){return ez.ok(!ew(eA),ex);};};return function(eB){return f.AddTest(ey,ev,eB);};},IsTrue:function(eC,eD){var eE;eE=function(eF){return function(eG){return eF.ok(eD(eG));};};return function(eH){return f.AddTest(eE,eC,eH);};},IsTrueAsync:function(eI,eJ){var eK;eK=function(eL){return function(eM){return g.Delay(function(){return g.Bind(eJ(eM),function(eO){return g.Return(eL.ok(eO));});});};};return function(eP){return f.AddTestAsync(eK,eI,eP);};},IsTrueMsg:function(eQ,eR,eS){var eT;eT=function(eU){return function(eV){return eU.ok(eR(eV),eS);};};return function(eW){return f.AddTest(eT,eQ,eW);};},IsTrueMsgAsync:function(eX,eY,eZ){var e0;e0=function(e1){return function(e2){return g.Delay(function(){return g.Bind(eY(e2),function(e4){return g.Return(e1.ok(e4,eZ));});});};};return function(e5){return f.AddTestAsync(e0,eX,e5);};},JsEqual:function(e6,e7,e8){var e9;e9=function(e_){return function(e$){return e_.equal(e7(e$),e8(e$));};};return function(fa){return f.AddTest(e9,e6,fa);};},JsEqualAsync:function(fb,fc,fd){var fe;fe=function(ff){return function(fg){return g.Delay(function(){var fi;fi=fd(fg);return g.Bind(fc(fg),function(fj){return g.Return(ff.equal(fj,fi));});});};};return function(fk){return f.AddTestAsync(fe,fb,fk);};},JsEqualMsg:function(fl,fm,fn,fo){var fp;fp=function(fq){return function(fr){return fq.equal(fm(fr),fn(fr),fo);};};return function(fs){return f.AddTest(fp,fl,fs);};},JsEqualMsgAsync:function(ft,fu,fv,fw){var fx;fx=function(fy){return function(fz){return g.Delay(function(){var fB;fB=fv(fz);return g.Bind(fu(fz),function(fC){return g.Return(fy.equal(fC,fB,fw));});});};};return function(fD){return f.AddTestAsync(fx,ft,fD);};},NotApproxEqual:function(fE,fF,fG){var fH;fH=function(fI){return function(fJ){var fK,fL;fK=fF(fJ);fL=fG(fJ);return fI.push(h.abs(fK-fL)>0.0001,fK,fL);};};return function(fM){return f.AddTest(fH,fE,fM);};},NotApproxEqualAsync:function(fN,fO,fP){var fQ;fQ=function(fR){return function(fS){return g.Delay(function(){var fU;fU=fP(fS);return g.Bind(fO(fS),function(fV){return g.Return(fR.push(h.abs(fV-fU)>0.0001,fV,fU));});});};};return function(fW){return f.AddTestAsync(fQ,fN,fW);};},NotApproxEqualMsg:function(fX,fY,fZ,f0){var f1;f1=function(f2){return function(f3){var f4,f5;f4=fY(f3);f5=fZ(f3);return f2.push(h.abs(f4-f5)>0.0001,f4,f5,f0);};};return function(f6){return f.AddTest(f1,fX,f6);};},NotApproxEqualMsgAsync:function(f7,f8,f9,f_){var f$;f$=function(ga){return function(gb){return g.Delay(function(){var gd;gd=f9(gb);return g.Bind(f8(gb),function(ge){return g.Return(ga.push(h.abs(ge-gd)>0.0001,ge,gd,f_));});});};};return function(gf){return f.AddTestAsync(f$,f7,gf);};},NotEqual:function(gg,gh,gi){var gj;gj=function(gk){return function(gl){var gm,gn;gm=gh(gl);gn=gi(gl);return gk.push(!i.Equals(gm,gn),gm,gn);};};return function(go){return f.AddTest(gj,gg,go);};},NotEqualAsync:function(gp,gq,gr){var gs;gs=function(gt){return function(gu){return g.Delay(function(){var gw;gw=gr(gu);return g.Bind(gq(gu),function(gx){return g.Return(gt.push(!i.Equals(gx,gw),gx,gw));});});};};return function(gy){return f.AddTestAsync(gs,gp,gy);};},NotEqualMsg:function(gz,gA,gB,gC){var gD;gD=function(gE){return function(gF){var gG,gH;gG=gA(gF);gH=gB(gF);return gE.push(!i.Equals(gG,gH),gG,gH,gC);};};return function(gI){return f.AddTest(gD,gz,gI);};},NotEqualMsgAsync:function(gJ,gK,gL,gM){var gN;gN=function(gO){return function(gP){return g.Delay(function(){var gR;gR=gL(gP);return g.Bind(gK(gP),function(gS){return g.Return(gO.push(!i.Equals(gS,gR),gS,gR,gM));});});};};return function(gT){return f.AddTestAsync(gN,gJ,gT);};},PropertyWithSample:function(gU,gV,gW){return function(gX){var gY,g$,hc;gY=function(gZ,g0,g1){var g2,g3,g4,g5,g6;if(g1.$==1){g3=g1.$1;g4=g1.$0;g5=gZ(g4);g6=function(g7){var g8,g_;g8=function(){return g7;};g_=g5(gX);return f.Map(g8,g_);};g2=gY(gZ,f.Bind(g6,g0),g3);}else{g2=g0;}return g2;};g$=function(ha){var hb;hb=gV(ha);return gY(gW(ha),{$:0,$0:ha},hb.get_Data());};hc=gU(gX);return f.Bind(g$,hc);};},Raises:function(hd,he){var hf;hf=function(hg){return function(hh){var hi,hj,hk;try{hj=he(hh);hi=hg.ok(false,"Expected raised exception");}catch(hk){hi=hg.ok(true);}return hi;};};return function(hl){return f.AddTest(hf,hd,hl);};},RaisesAsync:function(hm,hn){var ho;ho=function(hp){return function(hq){var hr;hr=hn(hq);return g.Delay(function(){return g.TryWith(g.Delay(function(){return g.Bind(hr,function(){return g.Return(hp.ok(false,"Expected raised exception"));});}),function(){return g.Return(hp.ok(true));});});};};return function(hw){return f.AddTestAsync(ho,hm,hw);};},RaisesMsg:function(hx,hy,hz){var hA;hA=function(hB){return function(hC){var hD,hE,hF;try{hE=hy(hC);hD=hB.ok(false,hz);}catch(hF){hD=hB.ok(true,hz);}return hD;};};return function(hG){return f.AddTest(hA,hx,hG);};},RaisesMsgAsync:function(hH,hI,hJ){var hK;hK=function(hL){return function(hM){var hN;hN=hI(hM);return g.Delay(function(){return g.TryWith(g.Delay(function(){return g.Bind(hN,function(){return g.Return(hL.ok(false,hJ));});}),function(){return g.Return(hL.ok(true,hJ));});});};};return function(hS){return f.AddTestAsync(hK,hH,hS);};},Return:function(hT){return function(){return{$:0,$0:hT};};},RunSubtest:function(hV,hW){return function(hX){var hY,h0;hY=function(hZ){return(hW(hZ))(hX);};h0=hV(hX);return f.Bind(hY,h0);};},Yield:function(h1){return function(){return{$:0,$0:h1};};},Zero:function(){return function(){return{$:0,$0:undefined};};}},{New:function(){return $.New(this,{});}}),Test:function(h4){return k.New(h4);},TestBuilder:$.Class({Run:function(h5){return l.test(this.name,function(h6){var h7,h8,h9,h_,h$,ia,ih;try{h8=h5(h6);if(h8.$==1){h_=h8.$0;h$=h6.async();ia=g.Delay(function(){return g.TryFinally(g.Delay(function(){return g.TryWith(g.Delay(function(){return g.Bind(h_,function(){return g.Return(null);});}),function(_if){return g.Return(h6.equal(_if,null,"Test threw an unexpected asynchronous exception"));});}),function(){return h$(null);});});h9=g.Start(ia,{$:0});}else{h9=null;}h7=h9;}catch(ih){h7=h6.equal(ih,null,"Test threw an unexpected synchronous exception");}return h7;});}},{New:function(ii){var ij;ij=$.New(this,c.New());ij.name=ii;return ij;}}),TestCategory:function(ik){return m.New(ik);},TestCategoryBuilder:$.Class({},{New:function(il){var im;im=$.New(this,{});im.name=il;return im;}})},Random:{Anything:$.Field(function(){return d.MixManyWithoutBases(d.allTypes());}),ArrayOf:function(_in){return{Base:[[]],Next:function(){var ip;ip=d.Natural().Next.call(null,null)%100;return n.init(ip,function(){return _in.Next.call(null,null);});}};},Boolean:$.Field(function(){return{Base:[true,false],Next:function(){return d.StandardUniform().Next.call(null,null)>0.5;}};}),Choose:function(is,it){var iu,iw,ix;iu=function(iv){return n.get(is,iv);};iw=d.Within(0,n.length(is)-1);ix=d.Map(iu,iw);return{Base:[],Next:function(){var iz;iz=ix.Next.call(null,null);return it(iz).Next.call(null,null);}};},Const:function(iA){return{Base:[iA],Next:function(){return iA;}};},Exponential:function(iC){return{Base:[],Next:function(){var iE;iE=d.StandardUniform().Next.call(null,null);return-h.log(1-iE)/iC;}};},Float:$.Field(function(){return{Base:[0],Next:function(){var iG;iG=d.Boolean().Next.call(null,null)?1:-1;return iG*d.Exponential(0.1).Next.call(null,null);}};}),FloatExhaustive:$.Field(function(){return{Base:[0,o,p,-p],Next:function(){return d.Float().Next.call(null,null);}};}),FloatWithin:function(iI,iJ){return{Base:[iI,iJ],Next:function(){return iI+(iJ-iI)*h.random();}};},Implies:function(iL,iM){return!iL?true:iM;},Imply:function(iN,iO){return d.Implies(iN,iO);},Int:$.Field(function(){return{Base:[0,1,-1],Next:function(){return h.round(d.Float().Next.call(null,null))<<0;}};}),ListOf:function(iQ){var iR,iT;iR=function(iS){return j.ofArray(iS);};iT=d.ArrayOf(iQ);return d.Map(iR,iT);},Map:function(iU,iV){var iW;iW=iV.Next;return{Base:n.map(iU,iV.Base),Next:function(iX){return iU(iW(iX));}};},Mix:function(iY,iZ){var i0;i0=[false];return{Base:iY.Base.concat(iZ.Base),Next:function(){i0[0]=!i0[0];return i0[0]?iY.Next.call(null,null):iZ.Next.call(null,null);}};},MixMany:function(i2){var i5;i5=[0];return{Base:n.concat(q.toArray(q.delay(function(){return q.map(function(i4){return i4.Base;},i2);}))),Next:function(){i5[0]=(i5[0]+1)%n.length(i2);return n.get(i2,i5[0]).Next.call(null,null);}};},MixManyWithoutBases:function(i7){var i8;i8=[0];return{Base:[],Next:function(){i8[0]=(i8[0]+1)%n.length(i7);return n.get(i7,i8[0]).Next.call(null,null);}};},Natural:$.Field(function(){var i_;i_=d.Int().Next;return{Base:[0,1],Next:function(i$){var ja;ja=i_(i$);return h.abs(ja);}};}),OneOf:function(jb){var jc;jc=d.Within(1,n.length(jb));return{Base:jb,Next:function(){return n.get(jb,jc.Next.call(null,null)-1);}};},OptionOf:function(je){return d.Mix(d.Const({$:0}),d.Map(function(jf){return{$:1,$0:jf};},je));},Sample:$.Class({get_Data:function(){return this.data;}},{Make:function(jg,jh){return e.New1(jg,jh);},New:function(ji){return $.New(this,e.New1(ji,100));},New1:function(jj,jk){var jl;jl=q.toList(q.delay(function(){return q.append(q.map(function(jn){return n.get(jj.Base,jn);},r.range(0,n.length(jj.Base)-1)),q.delay(function(){return q.map(function(){return jj.Next.call(null,null);},r.range(1,jk));}));}));return $.New(this,e.New4(jl));},New4:function(jq){var jr;jr=$.New(this,{});jr.data=jq;return jr;}}),StandardUniform:$.Field(function(){return{Base:[],Next:function(){return h.random();}};}),String:$.Field(function(){return{Base:[""],Next:function(){var ju,jv;ju=d.Natural().Next.call(null,null)%100;jv=n.init(ju,function(){return d.Int().Next.call(null,null)%256;});return s.fromCharCode.apply(undefined,jv);}};}),StringExhaustive:$.Field(function(){return{Base:[null,""],Next:d.String().Next};}),Tuple2Of:function(jx,jy){return{Base:q.toArray(q.delay(function(){return q.collect(function(jA){return q.map(function(jB){return[jA,jB];},jy.Base);},jx.Base);})),Next:function(){return[jx.Next.call(null,null),jy.Next.call(null,null)];}};},Tuple3Of:function(jD,jE,jF){return{Base:q.toArray(q.delay(function(){return q.collect(function(jH){return q.collect(function(jI){return q.map(function(jJ){return[jH,jI,jJ];},jF.Base);},jE.Base);},jD.Base);})),Next:function(){return[jD.Next.call(null,null),jE.Next.call(null,null),jF.Next.call(null,null)];}};},Within:function(jL,jM){return{Base:[jL,jM],Next:function(){return d.Natural().Next.call(null,null)%(jM-jL)+jL;}};},allTypes:$.Field(function(){var jO,jP,jY;jO=[d.Int(),d.Float(),d.Boolean(),d.String()];jP=function(jQ){return q.toArray(q.delay(function(){return q.collect(function(jS){return q.append(q.collect(function(jT){return q.append([d.Tuple2Of(jS,jT)],q.delay(function(){return q.map(function(jV){return d.Tuple3Of(jS,jT,jV);},jQ);}));},jQ),q.delay(function(){return q.append([d.ListOf(jS)],q.delay(function(){return[d.ArrayOf(jS)];}));}));},jQ);}));};jY=jP(jO);return jO.concat(jY);})},Runner:{RunnerControl:$.Class({get_Body:function(){return u.New();}}),RunnerControlBody:$.Class({ReplaceInDom:function(jZ){var j0,j1,j2,j3,j4;j0=v.createElement("div");j0.setAttribute("id","qunit-fixture");j1=v.createElement("div");j1.setAttribute("id","qunit");j2=jZ.parentNode;j3=j2.replaceChild(j0,jZ);j4=j2.insertBefore(j1,j0);return;}},{New:function(){return $.New(this,{});}})}}}});$.OnInit(function(){a=$.Safe($$.WebSharper.Testing);b=$.Safe(a.Pervasives);c=$.Safe(b.SubtestBuilder);d=$.Safe(a.Random);e=$.Safe(d.Sample);f=$.Safe(b.Runner);g=$.Safe($$.WebSharper.Concurrency);h=$.Safe($$.Math);i=$.Safe($$.WebSharper.Unchecked);j=$.Safe($$.WebSharper.List);k=$.Safe(b.TestBuilder);l=$.Safe($$.QUnit);m=$.Safe(b.TestCategoryBuilder);n=$.Safe($$.WebSharper.Arrays);o=$.Safe($$.NaN);p=$.Safe($$.Infinity);q=$.Safe($$.WebSharper.Seq);r=$.Safe($$.WebSharper.Operators);s=$.Safe($$.String);t=$.Safe(a.Runner);u=$.Safe(t.RunnerControlBody);return v=$.Safe($$.document);});$.OnLoad(function(){$.Inherit(k,c);d.allTypes();d.StringExhaustive();d.String();d.StandardUniform();d.Natural();d.Int();d.FloatExhaustive();d.Float();d.Boolean();d.Anything();b.Do();return;});}());

(function(){var $$=this,$=this.IntelliFactory.Runtime,a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E;$.Define($$,{WebSharper:{Control:{Disposable:{Of:function(F){return{Dispose:F};}},Event:{Event:$.Class({AddHandler:function(G){return this.Handlers.Add(G);},RemoveHandler:function(H){var I,K,L,N,O;I=function(J){return a.Equals(H,J);};K=this.Handlers;L=function(M){return K.RemoveAt(M);};N=this.Handlers;O=b.tryFindIndex(I,N);return c.iter(L,O);},Subscribe:function(P){var Q,T=this;Q=function(R){return P.OnNext(R);};this.AddHandler(Q);return e.Of(function(){return T.RemoveHandler(Q);});},Trigger:function(U){var V,W,X;V=this.Handlers.ToArray();for(W=0;W<=V.length-1;W++){X=f.get(V,W);X(U);}return;}})},EventModule:{Choose:function(Y,Z){var _0;_0=g.New();h.addListener(Z,function(_1){var _2,_3,_4;_2=Y(_1);if(_2.$==0){_3=null;}else{_4=_2.$0;_3=_0.event.Trigger(_4);}return _3;});return _0.event;},Filter:function(_5,_6){var _7;_7=$.New(j,{Handlers:m.New2()});h.addListener(_6,function(_8){return _5(_8)?_7.Trigger(_8):null;});return _7;},Map:function(_9,_){var ba;ba=$.New(j,{Handlers:m.New2()});h.addListener(_,function(bb){return ba.Trigger(_9(bb));});return ba;},Merge:function(bb,bc){var bd;bd=$.New(j,{Handlers:m.New2()});h.addListener(bb,function(be){return bd.Trigger(be);});h.addListener(bc,function(bf){return bd.Trigger(bf);});return bd;},Pairwise:function(bg){var bh,bi;bh=[{$:0}];bi=$.New(j,{Handlers:m.New2()});h.addListener(bg,function(bj){var bk,bl,bm;bk=bh[0];if(bk.$==1){bm=bk.$0;bh[0]={$:1,$0:bj};bl=bi.Trigger([bm,bj]);}else{bl=void(bh[0]={$:1,$0:bj});}return bl;});return bi;},Partition:function(bn,bo){return[n.Filter(bn,bo),n.Filter(function(bp){var bq;bq=bn(bp);return!bq;},bo)];},Scan:function(br,bs,bt){var bu,bv;bu=[bs];bv=function(bw){bu[0]=(br(bu[0]))(bw);return bu[0];};return n.Map(bv,bt);},Split:function(bx,by){var bz,bE;bz=function(bA){var bB,bC,bD;bB=bx(bA);if(bB.$==0){bD=bB.$0;bC={$:1,$0:bD};}else{bC={$:0};}return bC;};bE=function(bF){var bG,bH,bI;bG=bx(bF);if(bG.$==1){bI=bG.$0;bH={$:1,$0:bI};}else{bH={$:0};}return bH;};return[n.Choose(bz,by),n.Choose(bE,by)];}},FSharpEvent:$.Class({},{New:function(){var bJ;bJ=$.New(this,{});bJ.event=$.New(j,{Handlers:m.New2()});return bJ;}}),HotStream:{HotStream:$.Class({Subscribe:function(bK){var bL;this.Latest[0].$==1?bK.OnNext(this.Latest[0].$0):null;bL=h.subscribeTo(this.Event.event,function(bM){return bK.OnNext(bM);});return bL;},Trigger:function(bN){this.Latest[0]={$:1,$0:bN};return this.Event.event.Trigger(bN);}},{New:function(){return $.New(p,{Latest:[{$:0}],Event:g.New()});}})},MailboxProcessor:$.Class({PostAndAsyncReply:function(bO,bP){var bR=this;return q.Delay(function(){return q.Bind(bR.PostAndTryAsyncReply(bO,bP),function(bS){var bT,bU;if(bS.$==1){bU=bS.$0;bT=bU;}else{bT=r.Raise(new s("TimeoutException"));}return q.Return(bT);});});},PostAndTryAsyncReply:function(bV,bW){var bX,bY,b6=this;bX=r.DefaultArg(bW,this.get_DefaultTimeout());bY=function(bZ){var b0,b1,b2,b3,b4,b7,b8,b$;b0=bZ[0];b1=bZ[1];b2=bZ[2];if(bX<0){b4=bV(function(b5){return b0({$:1,$0:b5});});b6.mailbox.AddLast(b4);b3=b6.resume();}else{b7=[true];b8=bV(function(b9){var b_;if(b7[0]){b7[0]=false;b_=b0({$:1,$0:b9});}else{b_=null;}return b_;});b6.mailbox.AddLast(b8);b6.resume();b$=t(function(){var cb;if(b7[0]){b7[0]=false;cb=b0({$:0});}else{cb=null;}return cb;},bX);b3=void b$;}return b3;};return q.FromContinuations(bY);},Receive:function(cc){var ce=this;return q.Delay(function(){return q.Bind(ce.TryReceive(cc),function(cf){var cg,ch;if(cf.$==1){ch=cf.$0;cg=ch;}else{cg=r.Raise(new s("TimeoutException"));}return q.Return(cg);});});},Scan:function(ci,cj){var cl=this;return q.Delay(function(){return q.Bind(cl.TryScan(ci,cj),function(cm){var cn,co;if(cm.$==1){co=cm.$0;cn=co;}else{cn=r.Raise(new s("TimeoutException"));}return q.Return(cn);});});},Start:function(){var cp,cq,ct=this;if(this.started){cp=r.FailWith("The MailboxProcessor has already been started.");}else{this.started=true;cq=q.Delay(function(){return q.TryWith(q.Delay(function(){return q.Bind(ct.initial.call(null,ct),function(){return q.Return(null);});}),function(cv){ct.errorEvent.event.Trigger(cv);return q.Return(null);});});cp=ct.startAsync(cq);}return cp;},TryReceive:function(cw){var cx,cy,cD=this;cx=r.DefaultArg(cw,this.get_DefaultTimeout());cy=function(cz){var cA,cB,cC,cE,cF,cG,cJ,cK,cN,cR;cA=cz[0];cB=cz[1];cC=cz[2];if(a.Equals(cD.mailbox.get_First(),null)){if(cx<0){cG=q.Delay(function(){var cI;cI=cD.dequeue();cA({$:1,$0:cI});return q.Return(null);});cF=void(cD.savedCont={$:1,$0:cG});}else{cJ=[true];cK=t(function(){var cM;if(cJ[0]){cJ[0]=false;cD.savedCont={$:0};cM=cA({$:0});}else{cM=null;}return cM;},cx);cN=q.Delay(function(){var cP,cQ;if(cJ[0]){cJ[0]=false;u(cK);cQ=cD.dequeue();cA({$:1,$0:cQ});cP=q.Return(null);}else{cP=q.Return(null);}return cP;});cF=void(cD.savedCont={$:1,$0:cN});}cE=cF;}else{cR=cD.dequeue();cE=cA({$:1,$0:cR});}return cE;};return q.FromContinuations(cy);},TryScan:function(cS,cT){var cU,cZ=this;cU=r.DefaultArg(cT,this.get_DefaultTimeout());return q.Delay(function(){var cW,c3,c4,c5,c7;cW=function(){var cY,c0,c1,c2;cY=cZ.mailbox.get_First();c0={$:0};while(!a.Equals(cY,null)){c1=cS(cY.v);if(c1.$==0){c2=cY=cY.n;}else{cZ.mailbox.Remove(cY);cY=null;c2=c0=c1;}}return c0;};c3=cW(null);if(c3.$==1){c5=c3.$0;c4=q.Bind(c5,function(c6){return q.Return({$:1,$0:c6});});}else{c7=function(c8){var c9,c_,c$,da,db,dj,dk,dn;c9=c8[0];c_=c8[1];c$=c8[2];if(cU<0){db=function(){var dd;dd=q.Delay(function(){var df,dg,dh;df=cS(cZ.mailbox.get_First().v);if(df.$==1){dh=df.$0;cZ.mailbox.RemoveFirst();dg=q.Bind(dh,function(di){c9({$:1,$0:di});return q.Return(null);});}else{db(null);dg=q.Return(null);}return dg;});cZ.savedCont={$:1,$0:dd};return;};da=db(null);}else{dj=[true];dk=t(function(){var dm;if(dj[0]){dj[0]=false;cZ.savedCont={$:0};dm=c9({$:0});}else{dm=null;}return dm;},cU);dn=function(){var dp;dp=q.Delay(function(){var dr,ds,dt;dr=cS(cZ.mailbox.get_First().v);if(dr.$==1){dt=dr.$0;cZ.mailbox.RemoveFirst();ds=q.Bind(dt,function(du){var dv;if(dj[0]){dj[0]=false;u(dk);c9({$:1,$0:du});dv=q.Return(null);}else{dv=q.Return(null);}return dv;});}else{dn(null);ds=q.Return(null);}return ds;});cZ.savedCont={$:1,$0:dp};return;};da=dn(null);}return da;};c4=q.FromContinuations(c7);}return c4;});},dequeue:function(){var dw;dw=this.mailbox.get_First().v;this.mailbox.RemoveFirst();return dw;},get_CurrentQueueLength:function(){return this.mailbox.get_Count();},get_DefaultTimeout:function(){return this["DefaultTimeout@"];},get_Error:function(){return this.errorEvent.event;},resume:function(){var dx,dy,dz;dx=this.savedCont;if(dx.$==1){dz=dx.$0;this.savedCont={$:0};dy=this.startAsync(dz);}else{dy=null;}return dy;},set_DefaultTimeout:function(dA){this["DefaultTimeout@"]=dA;return;},startAsync:function(dB){return q.Start(dB,this.token);}},{New:function(dC,dD){var dE,dF,dG,dH,dI;dE=$.New(this,{});dE.initial=dC;dE.token=dD;dE.started=false;dE.errorEvent=g.New();dE.mailbox=w.New();dE.savedCont={$:0};dF=dE.token;if(dF.$==0){dG=null;}else{dH=dF.$0;dI=q.Register(dH,function(){return function(){return dE.resume();}();});dG=void dI;}dE["DefaultTimeout@"]=-1;return dE;},Start:function(dL,dM){var dN;dN=x.New(dL,dM);dN.Start();return dN;}}),Observable:{Aggregate:function(dO,dP,dQ){var dR;dR=function(dS){var dT,dU,dZ;dT=[dP];dU=function(dV){return y.Protect(function(){return(dQ(dT[0]))(dV);},function(dX){dT[0]=dX;return dS.OnNext(dX);},function(dY){return dS.OnError(dY);});};dZ=z.New(dU,function(d0){return dS.OnError(d0);},function(){return dS.OnCompleted();});return dO.Subscribe(dZ);};return y.New(dR);},Choose:function(d2,d3){var d4;d4=function(d5){var d6,eb;d6=function(d7){var d9;d9=function(d_){return d5.OnNext(d_);};return y.Protect(function(){return d2(d7);},function(d$){return c.iter(d9,d$);},function(ea){return d5.OnError(ea);});};eb=z.New(d6,function(ec){return d5.OnError(ec);},function(){return d5.OnCompleted();});return d3.Subscribe(eb);};return y.New(d4);},CombineLatest:function(ee,ef,eg){var eh;eh=function(ei){var ej,ek,el,ev,ex,eA,eC,eF,eG;ej=[{$:0}];ek=[{$:0}];el=function(){var en,eo,ep,eq,er;en=[ej[0],ek[0]];if(en[0].$==1){if(en[1].$==1){eq=en[0].$0;er=en[1].$0;ep=y.Protect(function(){return(eg(eq))(er);},function(et){return ei.OnNext(et);},function(eu){return ei.OnError(eu);});}else{ep=null;}eo=ep;}else{eo=null;}return eo;};ev=function(ew){ej[0]={$:1,$0:ew};return el(null);};ex=z.New(ev,function(){},function(){});eA=function(eB){ek[0]={$:1,$0:eB};return el(null);};eC=z.New(eA,function(){},function(){});eF=ee.Subscribe(ex);eG=ef.Subscribe(eC);return e.Of(function(){eF.Dispose();return eG.Dispose();});};return y.New(eh);},Concat:function(eI,eJ){var eK;eK=function(eL){var eM,eN,eS;eM=[{$:0}];eN=eI.Subscribe(z.New(function(eO){return eL.OnNext(eO);},function(){},function(){var eR;eR=eJ.Subscribe(eL);eM[0]={$:1,$0:eR};}));eS=function(){eM[0].$==1?eM[0].$0.Dispose():null;return eN.Dispose();};return e.Of(eS);};return y.New(eK);},Drop:function(eU,eV){var eW;eW=function(eX){var eY,eZ,e1;eY=[0];eZ=function(e0){A.incr(eY);return eY[0]>eU?eX.OnNext(e0):null;};e1=z.New(eZ,function(e2){return eX.OnError(e2);},function(){return eX.OnCompleted();});return eV.Subscribe(e1);};return y.New(eW);},Filter:function(e4,e5){var e6;e6=function(e7){var e8,fd;e8=function(e9){var e$;e$=function(fa){return e7.OnNext(fa);};return y.Protect(function(){return e4(e9)?{$:1,$0:e9}:{$:0};},function(fb){return c.iter(e$,fb);},function(fc){return e7.OnError(fc);});};fd=z.New(e8,function(fe){return e7.OnError(fe);},function(){return e7.OnCompleted();});return e5.Subscribe(fd);};return y.New(e6);},Map:function(fg,fh){var fi;fi=function(fj){var fk,fp;fk=function(fl){return y.Protect(function(){return fg(fl);},function(fn){return fj.OnNext(fn);},function(fo){return fj.OnError(fo);});};fp=z.New(fk,function(fq){return fj.OnError(fq);},function(){return fj.OnCompleted();});return fh.Subscribe(fp);};return y.New(fi);},Merge:function(fs,ft){var fu;fu=function(fv){var fw,fx,fy,fC,fD,fH;fw=[false];fx=[false];fy=z.New(function(fz){return fv.OnNext(fz);},function(){},function(){fw[0]=true;return(fw[0]?fx[0]:false)?fv.OnCompleted():null;});fC=fs.Subscribe(fy);fD=z.New(function(fE){return fv.OnNext(fE);},function(){},function(){fx[0]=true;return(fw[0]?fx[0]:false)?fv.OnCompleted():null;});fH=ft.Subscribe(fD);return e.Of(function(){fC.Dispose();return fH.Dispose();});};return y.New(fu);},Never:function(){return y.New(function(){return e.Of(function(){});});},New:function(fL){return $.New(B,{Subscribe1:fL});},Observable:$.Class({Subscribe:function(fM){return this.Subscribe1.call(null,fM);}}),Of:function(fN){return y.New(function(fO){return e.Of(fN(function(fP){return fO.OnNext(fP);}));});},Protect:function(fQ,fR,fS){var fT,fU,fV,fW,fX,fY;try{fU={$:0,$0:fQ(null)};}catch(fV){fU={$:1,$0:fV};}fT=fU;if(fT.$==1){fX=fT.$0;fW=fS(fX);}else{fY=fT.$0;fW=fR(fY);}return fW;},Range:function(fZ,f0){var f1;f1=function(f2){var f3;for(f3=fZ;f3<=fZ+f0;f3++){f2.OnNext(f3);}return e.Of(function(){});};return y.New(f1);},Return:function(f5){var f6;f6=function(f7){f7.OnNext(f5);f7.OnCompleted();return e.Of(function(){});};return y.New(f6);},SelectMany:function(f9){return y.New(function(f_){var f$,gb;f$=[function(){}];gb=h.subscribeTo(f9,function(gc){var gd;gd=h.subscribeTo(gc,function(ge){return f_.OnNext(ge);});f$[0]=function(){f$[0].call(null,null);return gd.Dispose();};return;});return e.Of(function(){f$[0].call(null,null);return gb.Dispose();});});},Sequence:function(gh){var gi;gi=function(gj){var gk,gl,gm,gn;if(gj.$==1){gl=gj.$1;gm=gj.$0;gn=gi(gl);gk=y.CombineLatest(gm,gn,function(go){return function(gp){return $.New(D,{$:1,$0:go,$1:gp});};});}else{gk=y.Return($.New(D,{$:0}));}return gk;};return gi(C.ofSeq(gh));},Switch:function(gq){return y.New(function(gr){var gs,gt,gu;gs=[0];gt=[{$:0}];gu=h.subscribeTo(gq,function(gv){var gw,gx,gz;A.incr(gs);gt[0].$==1?gt[0].$0.Dispose():null;gw=gs[0];gx=h.subscribeTo(gv,function(gy){return gw===gs[0]?gr.OnNext(gy):null;});gz={$:1,$0:gx};gt[0]=gz;return;});return gu;});}},ObservableModule:{Pairwise:function(gA){var gB;gB=function(gC){var gD,gE,gJ;gD=[{$:0}];gE=function(gF){var gG,gH,gI;gG=gD[0];if(gG.$==1){gI=gG.$0;gH=gC.OnNext([gI,gF]);}else{gH=null;}gD[0]={$:1,$0:gF};return;};gJ=z.New(gE,function(gK){return gC.OnError(gK);},function(){return gC.OnCompleted();});return gA.Subscribe(gJ);};return y.New(gB);},Partition:function(gM,gN){return[y.Filter(gM,gN),y.Filter(function(gO){var gP;gP=gM(gO);return!gP;},gN)];},Scan:function(gQ,gR,gS){var gT;gT=function(gU){var gV,gW,g1;gV=[gR];gW=function(gX){return y.Protect(function(){return(gQ(gV[0]))(gX);},function(gZ){gV[0]=gZ;return gU.OnNext(gZ);},function(g0){return gU.OnError(g0);});};g1=z.New(gW,function(g2){return gU.OnError(g2);},function(){return gU.OnCompleted();});return gS.Subscribe(g1);};return y.New(gT);},Split:function(g4,g5){var g6,g$,ha,hf;g6=function(g7){var g8,g9,g_;g8=g4(g7);if(g8.$==0){g_=g8.$0;g9={$:1,$0:g_};}else{g9={$:0};}return g9;};g$=y.Choose(g6,g5);ha=function(hb){var hc,hd,he;hc=g4(hb);if(hc.$==1){he=hc.$0;hd={$:1,$0:he};}else{hd={$:0};}return hd;};hf=y.Choose(ha,g5);return[g$,hf];}},Observer:{New:function(hg,hh,hi){return $.New(E,{onNext:hg,onError:hh,onCompleted:hi});},Observer:$.Class({OnCompleted:function(){return this.onCompleted.call(null,null);},OnError:function(hj){return this.onError.call(null,hj);},OnNext:function(hk){return this.onNext.call(null,hk);}}),Of:function(hl){return $.New(E,{onNext:function(hm){return hl(hm);},onError:function(hn){return r.Raise(hn);},onCompleted:function(){return null;}});}}}}});$.OnInit(function(){a=$.Safe($$.WebSharper.Unchecked);b=$.Safe($$.WebSharper.Seq);c=$.Safe($$.WebSharper.Option);d=$.Safe($$.WebSharper.Control);e=$.Safe(d.Disposable);f=$.Safe($$.WebSharper.Arrays);g=$.Safe(d.FSharpEvent);h=$.Safe($$.WebSharper.Util);i=$.Safe(d.Event);j=$.Safe(i.Event);k=$.Safe($$.WebSharper.Collections);l=$.Safe(k.ResizeArray);m=$.Safe(l.ResizeArrayProxy);n=$.Safe(d.EventModule);o=$.Safe(d.HotStream);p=$.Safe(o.HotStream);q=$.Safe($$.WebSharper.Concurrency);r=$.Safe($$.WebSharper.Operators);s=$.Safe($$.Error);t=$.Safe($$.setTimeout);u=$.Safe($$.clearTimeout);v=$.Safe(k.LinkedList);w=$.Safe(v.T);x=$.Safe(d.MailboxProcessor);y=$.Safe(d.Observable);z=$.Safe(d.Observer);A=$.Safe($$.WebSharper.Ref);B=$.Safe(y.Observable);C=$.Safe($$.WebSharper.List);D=$.Safe(C.T);return E=$.Safe(z.Observer);});$.OnLoad(function(){return;});}());

(function(){for(var i=0,t=["webkit","moz"],n=0;n<t.length&&!window.requestAnimationFrame;++n)window.requestAnimationFrame=window[t[n]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[t[n]+"CancelAnimationFrame"]||window[t[n]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(n){var t=(new Date).getTime(),r=Math.max(0,16-(t-i)),u=window.setTimeout(function(){n(t+r)},r);return i=t+r,u});window.cancelAnimationFrame||(window.cancelAnimationFrame=function(n){clearTimeout(n)})})();
(function(){var $$=this,$=this.IntelliFactory.Runtime,a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,_0,_1,_2,_3,_4,_5,_6,_7,_8,_9,_,ba,bb,bc,bd,be,bf,bg,bh,bi,bj,bk;$.Define($$,{WebSharper:{UI:{Next:{AnimatedBobsleighSite:{Fade:$.Field(function(){var bl,bm,bn;bl=c.get_Double();bm=d.get_CubicInOut();bn=e.fadeTime();return function(bo){return function(bp){return f.Simple(bl,bm,bn,bo,bp);};};}),FadeTransition:$.Field(function(){var bp,br,bt,bu;bp=function(){return((e.Fade())(0))(1);};br=function(){return((e.Fade())(1))(0);};bt=g.Create(e.Fade());bu=g.Enter(bp,bt);return g.Exit(br,bu);}),GlobalGo:function(bv,bw){return h.Set(bv,bw);},Governance:function(){var by,bz,bA;bz=j.ofArray([i.TextNode("Governance")]);bA=j.ofArray([i.TextNode("The sport is overseen by the "),k.href("International Bobsleigh and Skeleton Federation","http://www.fibt.com/"),i.TextNode(", an organisation founded in 1923. The organisation governs all international competitions, acting as a body to regulate athletes' conduct, as well as providing funding for training and education.")]);by=j.ofArray([i.Element("h1",[],bz),i.Element("p",[],bA)]);return i.Concat(j.ofArray([i.Element("div",[],by)]));},History:function(){var bC,bD,bE,bF;bD=j.ofArray([i.TextNode("History")]);bE=j.ofArray([i.TextNode("According to "),k.href("Wikipedia","http://en.wikipedia.org/wiki/Bobsleigh"),i.TextNode(", the beginnings of bobsleigh came about due to a hotelier becoming increasingly frustrated about having entire seasons where he could not rent out his properties. In response, he got a few people interested, and the Swiss town of St Moritz became the home of the first bobsleigh races.")]);bF=j.ofArray([i.TextNode("Bobsleigh races have been a regular event at the Winter Olympics since the very first competition in 1924.")]);bC=j.ofArray([i.Element("h1",[],bD),i.Element("p",[],bE),i.Element("p",[],bF)]);return i.Concat(j.ofArray([i.Element("div",[],bC)]));},HomePage:function(bG){var bH,bI,bJ,bK,bL,bN,bP;bI=j.ofArray([i.TextNode("Welcome!")]);bJ=j.ofArray([i.TextNode("Welcome to the IntelliFactory Bobsleigh MiniSite!")]);bL=function(){return bG.Go.call(null,{$:1});};bN=function(){return bG.Go.call(null,{$:2});};bP=function(){return bG.Go.call(null,{$:3});};bK=j.ofArray([i.TextNode("Here you can find out about the "),i.Link("history",$.New(l,{$:0}),bL),i.TextNode(" of bobsleighs, the "),i.Link("International Bobsleigh and Skeleton Federation",$.New(l,{$:0}),bN),i.TextNode(", which serve as the governing body for the sport, and finally the world-famous "),i.Link("IntelliFactory Bobsleigh Team.",$.New(l,{$:0}),bP)]);bH=j.ofArray([i.Element("h1",[],bI),i.Element("p",[],bJ),i.Element("p",[],bK)]);return i.Concat(j.ofArray([i.Element("div",[],bH)]));},Main:function(){var bR,bS,bU,bV,bY;bR=m.Create({$:0});bS={Go:function(bT){return h.Set(bR,bT);}};bU=bR.get_View();bV=function(bW){var bX;bX=bW.$==1?e.History(bS):bW.$==2?e.Governance(bS):bW.$==3?e.Team(bS):e.HomePage(bS);return e.MakePage(bR,bX);};bY=n.Map(bV,bU);return i.EmbedView(bY);},MakePage:function(bZ,b0){return i.Concat(j.ofArray([e.NavBar(bZ),i.Element("div",j.ofArray([o.AnimatedStyle("opacity",e.FadeTransition(),p.Const(1),function(b1){return $$.String(b1);})]),j.ofArray([b0]))]));},NavBar:function(b2){var b3,b4,ca;b3=b2.get_View();b4=function(b5){var b6,b$;b6=function(b7){var b8,b9;b8=q.Equals(b7,b5)?k.cls("active"):r.get_Empty();b9=function(){return e.GlobalGo(b2,b7);};return i.Element("li",j.ofArray([b8]),j.ofArray([i.Link(e.showAct(b7),$.New(l,{$:0}),b9)]));};b$=j.map(b6,e.pages());return i.Element("nav",j.ofArray([k.cls("navbar navbar-default"),r.Create("role","navigation")]),j.ofArray([i.Element("ul",j.ofArray([k.cls("nav navbar-nav")]),j.ofArray([i.Concat(b$)]))]));};ca=n.Map(b4,b3);return i.EmbedView(ca);},Sample:$.Field(function(){return s.Build().Id("AnimatedBobsleighSite").FileName("AnimatedBobsleighSite.fs").Keywords(j.ofArray(["text"])).Render(function(){return e.Main();}).RenderDescription(function(){return e.description();}).Create();}),Team:function(){var ce,cf,cg,ch,ci,cj,co;ce=j.ofArray([["Adam","granicz"],["András","AndrasJanko"],["Anton (honourary member for life)","t0yv0"],["István","inchester23"],["Loic","tarmil_"],["Sándor","sandorrakonczai"],["Simon","Simon_JF"]]);cg=j.ofArray([i.TextNode("The IntelliFactory Bobsleigh Team")]);ch=j.ofArray([i.TextNode("The world-famous IntelliFactory Bobsleigh Team was founded in 2004, and currently consists of:")]);cj=function(ck){var cl,cm,cn;cl=ck[0];cm=ck[1];cn=j.ofArray([k.href(cl,"http://www.twitter.com/"+cm)]);return i.Element("li",[],cn);};co=j.map(cj,ce);ci=j.ofArray([i.Concat(co)]);cf=j.ofArray([i.Element("h1",[],cg),i.Element("p",[],ch),i.Element("ul",[],ci)]);return i.Concat(j.ofArray([i.Element("div",[],cf)]));},description:function(){var cp;cp=j.ofArray([i.TextNode("A small website about bobsleighs, demonstrating how UI.Next may be used to structure single-page applications.")]);return i.Element("div",[],cp);},fadeTime:$.Field(function(){return 300;}),pages:$.Field(function(){return j.ofArray([{$:0},{$:1},{$:2},{$:3}]);}),showAct:function(cq){return cq.$==1?"History":cq.$==2?"Governance":cq.$==3?"The IntelliFactory Bobsleigh Team":"Home";}},AnimatedContactFlow:{AnimateFlow:function(cr){return i.Element("div",j.ofArray([o.Style("position","relative"),o.AnimatedStyle("opacity",t.FadeTransition(),p.Const(1),function(cs){return $$.String(cs);}),o.AnimatedStyle("left",t.SwipeTransition(),p.Const(0),function(ct){return $$.String(ct)+"px";})]),j.ofArray([cr]));},Description:function(){var cu;cu=j.ofArray([i.TextNode("A WS.UI.Next flowlet implementation.")]);return i.Element("div",[],cu);},ExampleFlow:function(){var cv,cw;cv=u.get_Do();cw=cv.Bind(t.personFlowlet(),function(cx){return cv.Bind(t.contactTypeFlowlet(),function(cy){return cv.Bind(t.contactFlowlet(cy),function(cz){return cv.ReturnFrom(v.Static(t.finalPage(cx,cz)));});});});return u.Embed(cw);},Fade:$.Field(function(){var cA,cB,cC;cA=c.get_Double();cB=d.get_CubicInOut();cC=t.fadeTime();return function(cD){return function(cE){return f.Simple(cA,cB,cC,cD,cE);};};}),FadeTransition:$.Field(function(){var cF,cH,cJ,cK;cF=function(){return((t.Fade())(0))(1);};cH=function(){return((t.Fade())(1))(0);};cJ=g.Create(t.Fade());cK=g.Enter(cF,cJ);return g.Exit(cH,cK);}),Sample:$.Field(function(){return s.Build().Id("AnimatedContactFlow").FileName("AnimatedContactFlow.fs").Keywords(j.ofArray(["flowlet"])).Render(function(){return t.ExampleFlow();}).RenderDescription(function(){return t.Description();}).Create();}),Swipe:$.Field(function(){var cN,cO,cP;cN=c.get_Double();cO=d.get_CubicInOut();cP=t.swipeTime();return function(cQ){return function(cR){return f.Simple(cN,cO,cP,cQ,cR);};};}),SwipeTransition:$.Field(function(){var cS,cU;cS=function(){return((t.Swipe())(0))(400);};cU=g.Create(t.Swipe());return g.Exit(cS,cU);}),contactFlowlet:function(cV){var cW,cZ,c0;cW=cV.$==1?["Phone Number",function(cX){return{$:1,$0:cX};}]:["E-Mail Address",function(cY){return{$:0,$0:cY};}];cZ=cW[0];c0=cW[1];return u.Define(function(c1){var c2,c3,c4,c5;c2=m.Create("");c3=j.ofArray([k.cls("form-horizontal"),r.Create("role","form")]);c5=function(){return c1(c0(h.Get(c2)));};c4=i.Element("form",c3,j.ofArray([t.inputRow(c2,"contact",cZ),k.divc("form-group",j.ofArray([k.divc("col-sm-offset-2 col-sm-10",j.ofArray([i.Button("Finish",j.ofArray([k.cls("btn btn-default")]),c5)]))]))]));return t.AnimateFlow(c4);});},contactTypeFlowlet:$.Field(function(){return u.Define(function(c7){var c8,c9,c_,c$,db,dc;c8=j.ofArray([k.cls("form-horizontal"),r.Create("role","form")]);c$=function(){return c7({$:0});};c_=j.ofArray([i.Button("E-Mail Address",j.ofArray([k.cls("btn btn-default")]),c$)]);dc=function(){return c7({$:1});};db=j.ofArray([i.Button("Phone Number",j.ofArray([k.cls("btn btn-default")]),dc)]);c9=i.Element("form",c8,j.ofArray([k.divc("form-group",j.ofArray([i.Element("div",[],c_),i.Element("div",[],db)]))]));return t.AnimateFlow(c9);});}),fadeTime:$.Field(function(){return 300;}),finalPage:function(de,df){var dg,dh,di,dj,dk,dl,dm,dn;if(df.$==1){di=df.$0;dh="the phone number "+di;}else{dj=df.$0;dh="the e-mail address "+dj;}dg=dh;dl="You said your name was "+de.Name+", your address was "+de.Address+", ";dm=" and you provided "+dg+".";dk=j.ofArray([i.TextNode(dl),i.TextNode(dm)]);dn=i.Element("div",[],dk);return t.AnimateFlow(dn);},inputRow:function(_do,dp,dq){return k.divc("form-group",j.ofArray([i.Element("label",j.ofArray([r.Create("for",dp),k.cls("col-sm-2 control-label")]),j.ofArray([i.TextNode(dq)])),k.divc("col-sm-10",j.ofArray([i.Input(j.ofArray([r.Create("type","text"),k.cls("form-control"),r.Create("id",dp),r.Create("placeholder",dq)]),_do)]))]));},personFlowlet:$.Field(function(){return u.Define(function(dr){var ds,dt,du,dv,dw;ds=m.Create("");dt=m.Create("");du=j.ofArray([k.cls("form-horizontal"),r.Create("role","form")]);dw=function(){var dy,dz;dy=h.Get(ds);dz=h.Get(dt);return dr({Name:dy,Address:dz});};dv=i.Element("form",du,j.ofArray([t.inputRow(ds,"lblName","Name"),t.inputRow(dt,"lblAddr","Address"),k.divc("form-group",j.ofArray([k.divc("col-sm-offset-2 col-sm-10",j.ofArray([i.Button("Next",j.ofArray([k.cls("btn btn-default")]),dw)]))]))]));return t.AnimateFlow(dv);});}),swipeTime:$.Field(function(){return 300;})},BobsleighSite:{GlobalGo:function(dA,dB){return h.Set(dA,dB);},Governance:function(){var dD,dE,dF;dE=j.ofArray([i.TextNode("Governance")]);dF=j.ofArray([i.TextNode("The sport is overseen by the "),k.href("International Bobsleigh and Skeleton Federation","http://www.fibt.com/"),i.TextNode(", an organisation founded in 1923. The organisation governs all international competitions, acting as a body to regulate athletes' conduct, as well as providing funding for training and education.")]);dD=j.ofArray([i.Element("h1",[],dE),i.Element("p",[],dF)]);return i.Concat(j.ofArray([i.Element("div",[],dD)]));},History:function(){var dH,dI,dJ,dK;dI=j.ofArray([i.TextNode("History")]);dJ=j.ofArray([i.TextNode("According to "),k.href("Wikipedia","http://en.wikipedia.org/wiki/Bobsleigh"),i.TextNode(", the beginnings of bobsleigh came about due to a hotelier becoming increasingly frustrated about having entire seasons where he could not rent out his properties. In response, he got a few people interested, and the Swiss town of St Moritz became the home of the first bobsleigh races.")]);dK=j.ofArray([i.TextNode("Bobsleigh races have been a regular event at the Winter Olympics since the very first competition in 1924.")]);dH=j.ofArray([i.Element("h1",[],dI),i.Element("p",[],dJ),i.Element("p",[],dK)]);return i.Concat(j.ofArray([i.Element("div",[],dH)]));},HomePage:function(dL){var dM,dN,dO,dP,dQ,dS,dU;dN=j.ofArray([i.TextNode("Welcome!")]);dO=j.ofArray([i.TextNode("Welcome to the IntelliFactory Bobsleigh MiniSite!")]);dQ=function(){return dL.Go.call(null,{$:1});};dS=function(){return dL.Go.call(null,{$:2});};dU=function(){return dL.Go.call(null,{$:3});};dP=j.ofArray([i.TextNode("Here you can find out about the "),i.Link("history",$.New(l,{$:0}),dQ),i.TextNode(" of bobsleighs, the "),i.Link("International Bobsleigh and Skeleton Federation",$.New(l,{$:0}),dS),i.TextNode(", which serve as the governing body for the sport, and finally the world-famous "),i.Link("IntelliFactory Bobsleigh Team.",$.New(l,{$:0}),dU)]);dM=j.ofArray([i.Element("h1",[],dN),i.Element("p",[],dO),i.Element("p",[],dP)]);return i.Concat(j.ofArray([i.Element("div",[],dM)]));},Main:function(){var dW,dX,dY,d0,d2,d3,d5;dW=m.Create({$:0});dX=w.NavBar(dW);dY=function(dZ){return i.Append(dX,dZ);};d0={Go:function(d1){return h.Set(dW,d1);}};d2=dW.get_View();d3=function(d4){return d4.$==1?dY(w.History(d0)):d4.$==2?dY(w.Governance(d0)):d4.$==3?dY(w.Team(d0)):dY(w.HomePage(d0));};d5=n.Map(d3,d2);return i.EmbedView(d5);},NavBar:function(d6){var d7,d8,ee;d7=d6.get_View();d8=function(d9){var d_,ed;d_=function(d$){var ea,eb;ea=q.Equals(d$,d9)?k.cls("active"):r.get_Empty();eb=function(){return w.GlobalGo(d6,d$);};return i.Element("li",j.ofArray([ea]),j.ofArray([i.Link(w.showAct(d$),$.New(l,{$:0}),eb)]));};ed=j.map(d_,w.pages());return i.Element("nav",j.ofArray([k.cls("navbar navbar-default"),r.Create("role","navigation")]),j.ofArray([i.Element("ul",j.ofArray([k.cls("nav navbar-nav")]),j.ofArray([i.Concat(ed)]))]));};ee=n.Map(d8,d7);return i.EmbedView(ee);},Sample:$.Field(function(){return s.Build().Id("BobsleighSite").FileName("BobsleighSite.fs").Keywords(j.ofArray(["text"])).Render(function(){return w.Main();}).RenderDescription(function(){return w.description();}).Create();}),Team:function(){var ei,ej,ek,el,em,en,es;ei=j.ofArray([["Adam","granicz"],["András","AndrasJanko"],["Anton (honourary member for life)","t0yv0"],["István","inchester23"],["Loic","tarmil_"],["Sándor","sandorrakonczai"],["Simon","Simon_JF"]]);ek=j.ofArray([i.TextNode("The IntelliFactory Bobsleigh Team")]);el=j.ofArray([i.TextNode("The world-famous IntelliFactory Bobsleigh Team was founded in 2004, and currently consists of:")]);en=function(eo){var ep,eq,er;ep=eo[0];eq=eo[1];er=j.ofArray([k.href(ep,"http://www.twitter.com/"+eq)]);return i.Element("li",[],er);};es=j.map(en,ei);em=j.ofArray([i.Concat(es)]);ej=j.ofArray([i.Element("h1",[],ek),i.Element("p",[],el),i.Element("ul",[],em)]);return i.Concat(j.ofArray([i.Element("div",[],ej)]));},description:function(){var et;et=j.ofArray([i.TextNode("A small website about bobsleighs, demonstrating how UI.Next may be used to structure single-page applications.")]);return i.Element("div",[],et);},pages:$.Field(function(){return j.ofArray([{$:0},{$:1},{$:2},{$:3}]);}),showAct:function(eu){return eu.$==1?"History":eu.$==2?"Governance":eu.$==3?"The IntelliFactory Bobsleigh Team":"Home";}},Calculator:{Description:function(){var ev;ev=j.ofArray([i.TextNode("A calculator application")]);return i.Element("div",[],ev);},Main:function(){var ew;ew=m.Create(x.initCalc());return x.calcView(ew);},Sample:$.Field(function(){return s.Build().Id("Calculator").FileName("Calculator.fs").Keywords(j.ofArray(["calculator"])).Render(function(){return x.Main();}).RenderDescription(function(){return x.Description();}).Create();}),button:function(ez,eA){return i.Button(ez,j.ofArray([k.sty("width","25px")]),eA);},cBtn:function(eB){return x.button("C",function(){var eD;eD=x.initCalc();return h.Set(eB,eD);});},calcBtn:function(eE,eF){return x.button($$.String(eE),function(){return x.pushInt(eE,eF);});},calcView:function(eH){var eI,eJ,eL,eN,eO,eP,eQ,eR,eS,eT;eI=eH.get_View();eJ=function(eK){return x.calcBtn(eK,eH);};eL=function(eM){return x.opBtn(eM,eH);};eN=x.cBtn(eH);eO=x.eqBtn(eH);eQ=j.ofArray([eJ(1),eJ(2),eJ(3),eL({$:0})]);eR=j.ofArray([eJ(4),eJ(5),eJ(6),eL({$:1})]);eS=j.ofArray([eJ(7),eJ(8),eJ(9),eL({$:2})]);eT=j.ofArray([eJ(0),eN,eO,eL({$:3})]);eP=j.ofArray([i.Element("div",j.ofArray([k.sty("border","solid 1px #aaa"),k.sty("width","100px"),k.sty("text-align","right"),k.sty("padding","0 5px")]),j.ofArray([i.TextView(x.displayCalc(eH))])),i.Element("div",[],eQ),i.Element("div",[],eR),i.Element("div",[],eS),i.Element("div",[],eT)]);return i.Element("div",[],eP);},calculate:function(eU){var eV;eV=function(eW){var eX;eX=((x.opFn(eW.Operation))(eW.Memory))(eW.Operand);return{Memory:0,Operand:eX,Operation:{$:0}};};return h.Update(eU,eV);},displayCalc:function(eY){var eZ,e0;eZ=eY.get_View();e0=function(e1){return $$.String(e1.Operand);};return n.Map(e0,eZ);},eqBtn:function(e2){return x.button("=",function(){return x.calculate(e2);});},initCalc:$.Field(function(){return{Memory:0,Operand:0,Operation:{$:0}};}),opBtn:function(e4,e5){return x.button(x.showOp(e4),function(){return x.shiftToMem(e4,e5);});},opFn:function(e7){return e7.$==1?function(e8){return function(e9){return e8-e9;};}:e7.$==2?function(e_){return function(e$){return e_*e$;};}:e7.$==3?function(fa){return function(fb){return fa/fb>>0;};}:function(fc){return function(fd){return fc+fd;};};},pushInt:function(fe,ff){var fg;fg=function(fh){var fi;fi=fh.Operand*10+fe;return{Memory:fh.Memory,Operand:fi,Operation:fh.Operation};};return h.Update(ff,fg);},shiftToMem:function(fj,fk){var fl;fl=function(fm){return{Memory:fm.Operand,Operand:0,Operation:fj};};return h.Update(fk,fl);},showOp:function(fn){return fn.$==1?"-":fn.$==2?"*":fn.$==3?"/":"+";}},CheckBoxTest:{Description:function(){var fo;fo=j.ofArray([i.TextNode("An application which shows the selected values.")]);return i.Element("div",[],fo);},Main:function(){var fp,fq,ft,fu,fv,fw,fA,fB,fC,fD,fE,fF,fG,fH,fI,fM,fN,fO,fQ,fR,fS;fp=m.Create($.New(l,{$:0}));fq=function(fr){var fs;fs=j.ofArray([i.CheckBoxGroup($.New(l,{$:0}),fr,fp),i.TextNode(fr.Name)]);return i.Element("div",[],fs);};ft=j.map(fq,y.People());fu=[];fv=i.Element("div",fu,ft);fw=function(fx){return z.fold(function(fy){return function(fz){return fy+fz.Name+", ";};},"",fx);};fA=fp.get_View();fB=n.Map(fw,fA);fC=i.TextView(fB);fD=j.ofArray([fv,fC]);fE=[];fF=i.Element("div",fE,fD);fG=m.Create({$:0});fH=j.ofArray([{$:2},{$:1},{$:0},{$:3}]);fI=function(fJ){var fK,fL;fL=y.showRestaurant(fJ);fK=j.ofArray([i.Radio($.New(l,{$:0}),fJ,fG),i.TextNode(fL)]);return i.Element("div",[],fK);};fN=j.map(fI,fH);fO=function(fP){return y.showRestaurant(fP);};fQ=fG.get_View();fM=j.ofArray([i.Concat(fN),i.TextView(n.Map(fO,fQ))]);fR=i.Element("div",[],fM);fS=j.ofArray([fF,fR]);return i.Element("div",[],fS);},People:$.Field(function(){return j.ofArray([A.Create("Simon",22),A.Create("Peter",18),A.Create("Clare",50),A.Create("Andy",51)]);}),Person:$.Class({},{Create:function(fT,fU){return $.New(A,{Name:fT,Age:fU});}}),Sample:$.Field(function(){return s.Build().Id("CheckBoxTest").FileName("CheckBoxTest.fs").Keywords(j.ofArray(["todo"])).Render(function(){return y.Main();}).RenderDescription(function(){return y.Description();}).Create();}),showRestaurant:function(fX){return fX.$==1?"Suszterinas":fX.$==2?"Csiga":fX.$==3?"Stex":"Jelen";}},Client:{Main:$.Field(function(){return B.Main(j.ofArray([C.Sample(),D.Sample(),E.Sample(),F.Sample(),G.Sample(),H.Sample(),y.Sample(),x.Sample(),I.Sample(),t.Sample(),J.Sample(),w.Sample(),K.Sample(),e.Sample(),L.Sample(),M.Sample(),N.Sample()]));})},Common:{CreatePost:function(fY,fZ){return{PostId:P.Int(),PostAuthorName:fY.Name,Content:fZ};},CreateThread:function(f0,f1){var f2;f2=P.Int();return{ThreadId:f2,Title:f1,ThreadAuthorName:f0,Posts:m.Create($.New(l,{$:0}))};},Fresh:{Int:function(){var f3;f3=P.i()+1;P.i=function(){return f3;};return P.i();},i:$.Field(function(){return 0;})}},ContactFlow:{Description:function(){var f4;f4=j.ofArray([i.TextNode("A WS.UI.Next flowlet implementation.")]);return i.Element("div",[],f4);},ExampleFlow:function(){var f5,f6;f5=u.get_Do();f6=f5.Bind(I.personFlowlet(),function(f7){return f5.Bind(I.contactTypeFlowlet(),function(f8){return f5.Bind(I.contactFlowlet(f8),function(f9){return f5.ReturnFrom(v.Static(I.finalPage(f7,f9)));});});});return u.Embed(f6);},Sample:$.Field(function(){return s.Build().Id("ContactFlow").FileName("ContactFlow.fs").Keywords(j.ofArray(["flowlet"])).Render(function(){return I.ExampleFlow();}).RenderDescription(function(){return I.Description();}).Create();}),contactFlowlet:function(ga){var gb,ge,gf;gb=ga.$==1?["Phone Number",function(gc){return{$:1,$0:gc};}]:["E-Mail Address",function(gd){return{$:0,$0:gd};}];ge=gb[0];gf=gb[1];return u.Define(function(gg){var gh,gi,gj;gh=m.Create("");gi=j.ofArray([k.cls("form-horizontal"),r.Create("role","form")]);gj=function(){return gg(gf(h.Get(gh)));};return i.Element("form",gi,j.ofArray([I.inputRow(gh,"contact",ge,false),k.divc("form-group",j.ofArray([k.divc("col-sm-offset-2 col-sm-10",j.ofArray([i.Button("Finish",j.ofArray([k.cls("btn btn-default")]),gj)]))]))]));});},contactTypeFlowlet:$.Field(function(){return u.Define(function(gl){var gm,gn,go,gp,gr,gs;gm=j.ofArray([k.cls("form-horizontal"),r.Create("role","form")]);gn=j.ofArray([k.cls("form-group")]);gp=function(){return gl({$:0});};go=j.ofArray([i.Button("E-Mail Address",j.ofArray([k.cls("btn btn-default")]),gp)]);gs=function(){return gl({$:1});};gr=j.ofArray([i.Button("Phone Number",j.ofArray([k.cls("btn btn-default")]),gs)]);return i.Element("form",gm,j.ofArray([i.Element("form",gn,j.ofArray([i.Element("div",[],go),i.Element("div",[],gr)]))]));});}),finalPage:function(gu,gv){var gw,gx,gy,gz,gA,gB,gC;if(gv.$==1){gy=gv.$0;gx="the phone number "+gy;}else{gz=gv.$0;gx="the e-mail address "+gz;}gw=gx;gB="You said your name was "+gu.Name+", your address was "+gu.Address+", ";gC=" and you provided "+gw+".";gA=j.ofArray([i.TextNode(gB),i.TextNode(gC)]);return i.Element("div",[],gA);},inputRow:function(gD,gE,gF,gG){var gH;gH=gG?function(gI){return function(gJ){return i.InputArea(gI,gJ);};}:function(gK){return function(gL){return i.Input(gK,gL);};};return k.divc("row",j.ofArray([k.divc("form-group",j.ofArray([i.Element("label",j.ofArray([k.cls("col-sm-2 control-label"),r.Create("for",gE)]),j.ofArray([i.TextNode(gF)])),k.divc("col-sm-6",j.ofArray([(gH(j.ofArray([r.Create("type","text"),k.cls("form-control"),r.Create("id",gE),r.Create("placeholder",gF)])))(gD)])),k.divc("col-sm-4",$.New(l,{$:0}))]))]));},personFlowlet:$.Field(function(){return u.Define(function(gM){var gN,gO,gP,gQ;gN=m.Create("");gO=m.Create("");gP=j.ofArray([k.cls("form-horizontal"),r.Create("role","form")]);gQ=function(){var gS,gT;gS=h.Get(gN);gT=h.Get(gO);return gM({Name:gS,Address:gT});};return i.Element("form",gP,j.ofArray([I.inputRow(gN,"lblName","Name",false),I.inputRow(gO,"lblAddr","Address",true),k.divc("row",j.ofArray([k.divc("col-sm-2",$.New(l,{$:0})),k.divc("col-sm-6",j.ofArray([k.divc("form-group",j.ofArray([i.Button("Next",j.ofArray([k.cls("btn btn-default")]),gQ)]))])),k.divc("col-sm-4",$.New(l,{$:0}))]))]));});})},EditablePersonList:{Description:function(){var gU;gU=j.ofArray([i.TextNode("An example inspired by a "),k.href("SAP OpenUI sample","http://jsbin.com/openui5-HTML-templates/1/edit"),i.TextNode(".")]);return i.Element("div",[],gU);},Main:function(){var gV,gW,gX,gY,gZ;gX=j.ofArray([i.TextNode("Member List")]);gW=j.ofArray([i.Element("h1",[],gX),H.memberList()]);gZ=j.ofArray([i.TextNode("Change Member Details")]);gY=j.ofArray([i.Element("h1",[],gZ),H.peopleBoxes()]);gV=j.ofArray([i.Element("div",[],gW),i.Element("div",[],gY)]);return i.Element("div",[],gV);},Sample:$.Field(function(){return s.Build().Id("EditablePersonList").FileName("EditablePersonList.fs").Keywords(j.ofArray(["text"])).Render(function(){return H.Main();}).RenderDescription(function(){return H.Description();}).Create();}),createPerson:function(g2,g3){return{FirstName:m.Create(g2),LastName:m.Create(g3)};},memberList:$.Field(function(){var g4,hb,hc,hd;g4=function(g5){var g6,g7,g_,g$,ha;g7=function(g8){return function(g9){return i.TextNode(g8+" "+g9);};};g_=g5.FirstName.get_View();g$=g5.LastName.get_View();ha=n.Map2(g7,g_,g$);g6=j.ofArray([i.EmbedView(ha)]);return i.Element("li",[],g6);};hd=j.map(g4,H.peopleList());hc=j.ofArray([i.Concat(hd)]);hb=j.ofArray([i.Element("ul",[],hc)]);return i.Element("div",[],hb);}),peopleBoxes:$.Field(function(){var he,hj,hk,hl;he=function(hf){var hg,hh,hi;hh=hf.FirstName;hi=hf.LastName;hg=j.ofArray([i.Input($.New(l,{$:0}),hh),i.Input($.New(l,{$:0}),hi)]);return i.Element("li",[],hg);};hl=j.map(he,H.peopleList());hk=j.ofArray([i.Concat(hl)]);hj=j.ofArray([i.Element("ul",[],hk)]);return i.Element("div",[],hj);}),peopleList:$.Field(function(){return j.ofArray([H.createPerson("Alonzo","Church"),H.createPerson("Alan","Turing"),H.createPerson("Bertrand","Russell"),H.createPerson("Noam","Chomsky")]);})},InputTransform:{Description:function(){var hm;hm=j.ofArray([i.TextNode("Transforming the data provided by a single data source.")]);return i.Element("div",[],hm);},Main:function(){var hn,ho,hp,hq,hr,hs,ht,hu,hv,hx,hy,hB,hC,hE,hF,hH,hI,hK,hL,hM,hS,hT,hU,hV;hn=m.Create("");ho=j.ofArray([k.cls("panel"),k.cls("panel-default")]);hq=j.ofArray([k.cls("panel-body")]);hr=j.ofArray([k.cls("form-horizontal"),r.Create("role","form")]);hs=j.ofArray([k.cls("form-group")]);hp=j.ofArray([i.Element("div",j.ofArray([k.cls("panel-heading")]),j.ofArray([i.Element("h3",j.ofArray([k.cls("panel-title")]),j.ofArray([i.TextNode("Input")]))])),i.Element("div",hq,j.ofArray([i.Element("form",hr,j.ofArray([i.Element("div",hs,j.ofArray([i.Element("label",j.ofArray([k.cls("col-sm-2"),k.cls("control-label"),r.Create("for","inputBox")]),j.ofArray([i.TextNode("Write something: ")])),i.Element("div",j.ofArray([k.cls("col-sm-10")]),j.ofArray([i.Input(j.ofArray([r.Create("class","form-control"),r.Create("id","inputBox")]),hn)]))]))]))]))]);ht=i.Element("div",ho,hp);hu=hn.get_View();hv=function(hw){return hw.toUpperCase();};hx=n.Map(hv,hu);hy=function(hz){var hA;hA=R.ToCharArray(hz);return Q.fromCharCode.apply(undefined,hA.slice().reverse());};hB=n.Map(hy,hu);hC=function(hD){return S.length(R.SplitChars(hD,[32],1));};hE=n.Map(hC,hu);hF=function(hG){return $$.String(hG);};hH=n.Map(hF,hE);hI=function(hJ){return hJ%2===0?"Even":"Odd";};hK=n.Map(hI,hE);hL=j.ofArray([["Entered Text",hu],["Capitalised",hx],["Reversed",hB],["Word Count",hH],["Is the word count odd or even?",hK]]);hM=function(hN){var hO,hP,hQ,hR;hO=hN[0];hP=hN[1];hR=j.ofArray([i.TextNode(hO)]);hQ=j.ofArray([i.Element("td",[],hR),i.Element("td",j.ofArray([k.sty("width","70%")]),j.ofArray([i.TextView(hP)]))]);return i.Element("tr",[],hQ);};hU=j.map(hM,hL);hT=j.ofArray([i.Concat(hU)]);hS=k.divc("panel panel-default",j.ofArray([k.divc("panel-heading",j.ofArray([i.Element("h3",j.ofArray([k.cls("panel-title")]),j.ofArray([i.TextNode("Output")]))])),k.divc("panel-body",j.ofArray([i.Element("table",j.ofArray([k.cls("table")]),j.ofArray([i.Element("tbody",[],hT)]))]))]));hV=j.ofArray([ht,hS]);return i.Element("div",[],hV);},Sample:$.Field(function(){return s.Build().Id("InputTransform").FileName("InputTransform.fs").Keywords(j.ofArray(["text"])).Render(function(){return D.Main();}).RenderDescription(function(){return D.Description();}).Create();})},InputTransformHtml:{Description:function(){var hY;hY=j.ofArray([i.TextNode("Similar to InputTransform, but using a html file and the Template type provider.")]);return i.Element("div",[],hY);},Main:function(){var hZ,h0,h1,h3,h4,h7,h8,h_,h$,ib,ic,ie,_if,ig,iq,ir,is,it,iu,iv,iw,ix,iy,iz,iA,iB,iC,iD,iE,iF,iG,iH,iI,iJ,iK,iL,iM,iN,iO,iP,iQ,iR,iS,iT;hZ=m.Create("");h0=hZ.get_View();h1=function(h2){return h2.toUpperCase();};h3=n.Map(h1,h0);h4=function(h5){var h6;h6=R.ToCharArray(h5);return Q.fromCharCode.apply(undefined,h6.slice().reverse());};h7=n.Map(h4,h0);h8=function(h9){return S.length(R.SplitChars(h9,[32],1));};h_=n.Map(h8,h0);h$=function(ia){return $$.String(ia);};ib=n.Map(h$,h_);ic=function(id){return id%2===0?"Even":"Odd";};ie=n.Map(ic,h_);_if=j.ofArray([["Entered Text",h0],["Capitalised",h3],["Reversed",h7],["Word Count",ib],["Is the word count odd or even?",ie]]);ig=j.map(function(ih){var ii,ij,ik,il,im,_in,io,ip;ii=ih[0];ij=ih[1];ik=[];im=[];_in=[i.TextNode(ii)];io=[r.Create("style","width: 70%;")];ip=[i.TextView(ij)];il=[i.TextNode("\n                        "),i.Element("td",im,_in),i.TextNode("\n                        "),i.Element("td",io,ip),i.TextNode("\n                    ")];return i.Concat([i.Element("tr",ik,il)]);},_if);iq=[];is=[r.Create("class","panel panel-default")];iu=[r.Create("class","panel-heading")];iw=[r.Create("class","panel-title")];ix=[i.TextNode("Input")];iv=[i.TextNode("\n            "),i.Element("h3",iw,ix),i.TextNode("\n        ")];iy=[r.Create("class","panel-body")];iA=[r.Create("class","form-horizontal"),r.Create("role","form")];iC=[r.Create("class","form-group")];iE=[r.Create("class","col-sm-2 control-label"),r.Create("for","inputBox")];iF=[i.TextNode("Write something: ")];iG=[r.Create("class","col-sm-10")];iH=[i.TextNode("\n                        "),i.Input([r.Create("class","form-control"),r.Create("id","inputBox")],hZ),i.TextNode("\n                    ")];iD=[i.TextNode("\n                    "),i.Element("label",iE,iF),i.TextNode("\n                    "),i.Element("div",iG,iH),i.TextNode("\n                ")];iB=[i.TextNode("\n                "),i.Element("div",iC,iD),i.TextNode("\n            ")];iz=[i.TextNode("\n            "),i.Element("form",iA,iB),i.TextNode("\n        ")];it=[i.TextNode("\n        "),i.Element("div",iu,iv),i.TextNode("\n        "),i.Element("div",iy,iz),i.TextNode("\n    ")];iI=[r.Create("class","panel panel-default")];iK=[r.Create("class","panel-heading")];iM=[r.Create("class","panel-title")];iN=[i.TextNode("Output")];iL=[i.TextNode("\n            "),i.Element("h3",iM,iN),i.TextNode("\n        ")];iO=[r.Create("class","panel-body")];iQ=[r.Create("class","table")];iS=[];iT=S.ofSeq(ig);iR=[i.TextNode("\n                "),i.Element("tbody",iS,iT),i.TextNode("\n            ")];iP=[i.TextNode("\n            "),i.Element("table",iQ,iR),i.TextNode("\n        ")];iJ=[i.TextNode("\n        "),i.Element("div",iK,iL),i.TextNode("\n        "),i.Element("div",iO,iP),i.TextNode("\n    ")];ir=[i.TextNode("\n    "),i.Element("div",is,it),i.TextNode("\n    "),i.Element("div",iI,iJ),i.TextNode("\n")];return i.Concat([i.Element("div",iq,ir)]);},Sample:$.Field(function(){return s.Build().Id("InputTransformHtml").FileName("InputTransformHtml.fs").Keywords(j.ofArray(["text"])).Render(function(){return E.Main();}).RenderDescription(function(){return E.Description();}).Create();})},KeyboardInfo:{Description:function(){var iW;iW=j.ofArray([i.TextNode("Information about the current keyboard state")]);return i.Element("div",[],iW);},Main:function(){var iX,iY,iZ,i3,i4,i5,i9,i_,i$,jb,jc,jd,je,jg,jh;iZ=function(i0){var i1;i1=j.map(function(i2){return $$.String(i2);},i0);return N.commaList(i1);};i3=N.keys();iY=j.ofArray([i.TextNode("Keys pressed (key codes): "),i.TextView(n.Map(iZ,i3))]);i5=function(i6){var i7;i7=j.map(function(i8){return N.ToChar(i8);},i6);return N.commaList(i7);};i9=N.keys();i4=j.ofArray([i.TextNode("Keys pressed: "),i.TextView(n.Map(i5,i9))]);i$=function(ja){return $$.String(ja);};jb=U.get_LastPressed();jc=n.Map(i$,jb);i_=j.ofArray([i.TextNode("Last pressed key: "),i.TextView(jc)]);je=function(jf){return jf?"Yes":"No";};jg=U.IsPressed(N.ToKey("A"));jh=n.Map(je,jg);jd=j.ofArray([i.TextNode("Is 'A' pressed? "),i.TextView(jh)]);iX=j.ofArray([i.Element("p",[],iY),i.Element("p",[],i4),i.Element("p",[],i_),i.Element("p",[],jd)]);return i.Element("div",[],iX);},Sample:$.Field(function(){return s.Build().Id("KeyboardInfo").FileName("KeyboardInfo.fs").Keywords(j.ofArray(["text"])).Render(function(){return N.Main();}).RenderDescription(function(){return N.Description();}).Create();}),ToChar:function($c){var $0=this,$this=this;return $$.String.fromCharCode($c);},ToKey:function($c){var $0=this,$this=this;return $c.charCodeAt(0);},commaList:function(jk){var jl;jl=function(jm){var jn,jo,jp,jq,jr;if(jm.$==1){if(jm.$1.$==0){jp=jm.$0;jo=$$.String(jp);}else{jq=jm.$0;jr=jm.$1;jo=$$.String(jq)+", "+jl(jr);}jn=jo;}else{jn="";}return jn;};return"["+jl(jk)+"]";},keys:$.Field(function(){return U.get_KeysPressed();})},MessageBoard:{Auth:{Create:function(){var js,jt,ju,jw,jy,jA,jB,jC,jD,jF,jG,jI,jK;js=m.Create({$:0});jt=m.Create(true);ju=function(){return h.Set(jt,true);};jw=function(){return h.Set(jt,false);};jy=function(jz){return jz?"none":"block";};jA=jt.get_View();jB=n.Map(jy,jA);jC=j.ofArray([o.DynamicStyle("display",jB)]);jD=j.ofArray([V.LoginForm(function(jE){h.Set(js,{$:1,$0:jE});return ju(null);})]);jF=i.Element("div",jC,jD);jG=function(){return jw(null);};jI=function(){h.Set(js,{$:0});return ju(null);};jK=js.get_View();return{LoggedIn:jK,LoginForm:jF,StatusWidget:V.StatusWidget(jG,jI,js.get_View()),HideForm:ju,ShowForm:jw};},LoginForm:function(jL){var jM,jN,jO,jP,jQ,jR,jS,j2,j3,j4,j5;jM=m.Create("");jN=m.Create("");jO=m.Create("");jP=j.ofArray([i.Element("p",j.ofArray([k.cls("bg-danger")]),j.ofArray([i.TextView(jO.get_View())]))]);jQ=[];jR=i.Element("div",jQ,jP);jS=function(jT){return function(jU){return function(jV){return function(jW){var jX;jX=jW?function(jY){return function(jZ){return i.PasswordBox(jY,jZ);};}:function(j0){return function(j1){return i.Input(j0,j1);};};return k.divc("form-group",j.ofArray([i.Element("label",j.ofArray([r.Create("for",jU),k.cls("col-sm-2 control-label")]),j.ofArray([i.TextNode(jV)])),k.divc("col-sm-2",j.ofArray([(jX(j.ofArray([k.cls("form-control"),r.Create("id",jU),r.Create("placeholder",jV)])))(jT)]))]));};};};};j3=j.ofArray([i.TextNode("Hint: TestUser/TestPass")]);j4=j.ofArray([k.cls("form-horizontal"),r.Create("role","form")]);j5=j.ofArray([k.cls("btn btn-primary")]);j2=j.ofArray([i.Element("div",[],j3),jR,i.Element("form",j4,j.ofArray([(((jS(jM))("user"))("Username"))(false),(((jS(jN))("pass"))("Password"))(true),k.divc("form-group",j.ofArray([k.divc("col-sm-offset-2 col-sm-10",j.ofArray([i.Button("Log In",j5,function(){var j7;j7=W.Delay(function(){var j9;j9=X.CheckLogin(h.Get(jM),h.Get(jN));return W.Bind(j9,function(j_){var j$,ka;if(j_.$==0){h.Set(jO,"Invalid credentials.");j$=W.Return(null);}else{ka=j_.$0;h.Set(jM,"");h.Set(jN,"");jL(ka);j$=W.Return(null);}return j$;});});return W.Start(j7,{$:0});})]))]))]))]);return i.Element("div",[],j2);},StatusWidget:function(kb,kc,kd){var ke,kr;ke=function(kf){var kg,kh,ki,kk,kl,km,kn,ko,kq;if(kf.$==0){ki=function(){};kh=j.ofArray([i.Link("You are not logged in.",$.New(l,{$:0}),ki)]);kk=j.ofArray([i.Link("Login",$.New(l,{$:0}),kb)]);kg=i.Concat(j.ofArray([i.Element("li",[],kh),i.Element("li",[],kk)]));}else{kl=kf.$0;km="Welcome, "+kl.Name+"!";ko=function(){};kn=j.ofArray([i.Link(km,$.New(l,{$:0}),ko)]);kq=j.ofArray([i.Link("Logout",$.New(l,{$:0}),kc)]);kg=i.Concat(j.ofArray([i.Element("li",[],kn),i.Element("li",[],kq)]));}return kg;};kr=n.Map(ke,kd);return i.EmbedView(kr);}},Description:function(){var ks;ks=j.ofArray([i.TextNode("A message board application built using MiniSitelets.")]);return i.Element("div",[],ks);},Initialise:function(){var kt,ku,kv;kt=O.CreateThread("SimonJF","Hello, World! This is a topic.");ku=O.CreatePost({Name:"SimonJF",Password:""},"Hello, world! This is a post.");kv=W.Delay(function(){return W.Bind(X.AddThread(kt),function(){return W.Bind(X.AddPost(kt,ku),function(){return W.Return(null);});});});return W.Start(kv,{$:0});},Main:function(){var kz,kA,kB,kD,kE,kF,kH,kI,kM;J.Initialise();kz=m.Create({$:2});kA=V.Create();kB=function(kC){return h.Set(kz,kC);};kD={Auth:kA,Threads:m.Create($.New(l,{$:0})),Go:kB};kE=J.NavBar(kA,kz,kD);kF=function(kG){return i.Concat(j.ofArray([kE,kA.LoginForm,kG]));};kH=kz.get_View();kI=function(kJ){var kK,kL;kA.HideForm.call(null,null);if(kJ.$==2){kK=J.ThreadListPage(kD);}else{if(kJ.$==1){kL=kJ.$0;kK=J.ShowThreadPage(kD,kL);}else{kK=J.NewThreadPage(kD);}}return kF(kK);};kM=n.Map(kI,kH);return i.EmbedView(kM);},NavBar:function(kN,kO,kP){var kQ,kR,k1,k2;kQ=j.ofArray([{$:2},{$:0}]);kR=function(kS){var kT,kU,k0;kT=kO.get_View();kU=function(kV){var kW,kX,kY;kW=J.ShowAction(kS)===J.ShowAction(kV)?k.cls("active"):r.get_Empty();kX=J.ShowAction(kS);kY=function(){return kP.Go.call(null,kS);};return i.Element("li",j.ofArray([kW]),j.ofArray([i.Link(kX,$.New(l,{$:0}),kY)]));};k0=n.Map(kU,kT);return i.EmbedView(k0);};k1=j.ofArray([k.cls("navbar navbar-default"),r.Create("role","navigation")]);k2=j.map(kR,kQ);return i.Element("nav",k1,j.ofArray([k.divc("container-fluid",j.ofArray([i.Element("ul",j.ofArray([k.cls("nav navbar-nav")]),j.ofArray([i.Concat(k2)])),i.Element("ul",j.ofArray([k.cls("nav navbar-nav navbar-right")]),j.ofArray([kN.StatusWidget]))]))]));},NewThreadPage:function(k3){var k4,lf,lj,lk;k4=function(k5){var k6,k7,k8,le;k6=m.Create("");k7=m.Create("");k8=function(){var k_,k$,la;k_=O.CreateThread(k5.Name,h.Get(k6));k$=O.CreatePost(k5,h.Get(k7));la=W.Delay(function(){return W.Bind(X.AddThread(k_),function(){return W.Bind(X.AddPost(k_,k$),function(){return W.Return(null);});});});W.Start(la,{$:0});return k3.Go.call(null,{$:1,$0:k_});};le=j.ofArray([k.cls("form-horizontal"),r.Create("role","form")]);return k.divc("panel panel-default",j.ofArray([k.divc("panel-heading",j.ofArray([i.Element("h3",j.ofArray([k.cls("panel-title")]),j.ofArray([i.TextNode("New Thread")]))])),k.divc("panel-body",j.ofArray([i.Element("form",le,j.ofArray([k.divc("form-group",j.ofArray([i.Element("label",j.ofArray([r.Create("for","threadTitle"),k.cls("col-sm-2 control-label")]),j.ofArray([i.TextNode("Title")])),k.divc("col-sm-10",j.ofArray([i.Input(j.ofArray([r.Create("id","threadTitle"),k.sty("width","100%"),k.cls("form-control")]),k6)]))])),k.divc("form-group",j.ofArray([i.Element("label",j.ofArray([r.Create("for","postContent"),k.cls("col-sm-2 control-label")]),j.ofArray([i.TextNode("Content")])),k.divc("col-sm-10",j.ofArray([i.InputArea(j.ofArray([r.Create("id","postContent"),r.Create("rows","5"),k.cls("form-control"),k.sty("width","100%")]),k7)]))])),k.divc("form-group",j.ofArray([k.divc("col-sm-offset-2 col-sm-10",j.ofArray([i.Button("Submit",j.ofArray([k.cls("btn btn-primary")]),k8)]))]))]))]))]));};lf=function(lg){var lh,li;if(lg.$==0){k3.Auth.ShowForm.call(null,null);lh=i.get_Empty();}else{li=lg.$0;lh=k4(li);}return lh;};lj=k3.Auth.LoggedIn;lk=n.Map(lf,lj);return i.EmbedView(lk);},Sample:$.Field(function(){return s.Build().Id("MessageBoard").FileName("MessageBoard.fs").Keywords(j.ofArray(["text"])).Render(function(){return J.Main();}).RenderDescription(function(){return J.Description();}).Create();}),ShowAction:function(ln){var lo,lp;if(ln.$==1){lp=ln.$0;lo="Thread "+lp.Title;}else{lo=ln.$==2?"Show All Threads":"Create New Thread";}return lo;},ShowThreadPage:function(lq,lr){var ls,lt,ly,lD,lE,lF,lG,lJ,lK,lL,lV,lW,l0,l1;ls=m.Create($.New(l,{$:0}));lt=function(){var lv;lv=W.Delay(function(){return W.Bind(X.GetPosts(lr),function(lx){h.Set(ls,lx);return W.Return(null);});});return W.Start(lv,{$:0});};ly=function(lz){var lA,lB,lC;lB=j.ofArray([i.TextNode(lz.PostAuthorName)]);lC=j.ofArray([i.TextNode(lz.Content)]);lA=j.ofArray([i.Element("td",[],lB),i.Element("td",[],lC)]);return i.Element("tr",[],lA);};lE="Posts in thread \""+lr.Title+"\"";lG=function(lH){var lI;lI=j.map(ly,lH);return i.Concat(lI);};lJ=ls.get_View();lK=n.Map(lG,lJ);lF=j.ofArray([i.EmbedView(lK)]);lD=k.divc("panel panel-default",j.ofArray([k.divc("panel-heading",j.ofArray([i.Element("h3",j.ofArray([k.cls("panel-title")]),j.ofArray([i.TextNode(lE)]))])),k.divc("panel-body",j.ofArray([i.Element("table",j.ofArray([k.cls("table table-hover")]),j.ofArray([i.Element("tbody",[],lF)]))]))]));lL=function(lM){var lN,lO,lU;lN=m.Create("");lO=function(){var lQ,lR;lQ=O.CreatePost(lM,h.Get(lN));lR=W.Delay(function(){return W.Bind(X.AddPost(lr,lQ),function(){lt(null);return W.Return(null);});});return W.Start(lR,{$:0});};lU=j.ofArray([k.cls("form-horizontal"),r.Create("role","form")]);return k.divc("panel panel-default",j.ofArray([k.divc("panel-heading",j.ofArray([i.Element("h3",j.ofArray([k.cls("panel-title")]),j.ofArray([i.TextNode("New Post")]))])),k.divc("panel-body",j.ofArray([i.Element("form",lU,j.ofArray([k.divc("form-group",j.ofArray([i.Element("label",j.ofArray([r.Create("for","postContent"),k.cls("col-sm-2 control-label")]),j.ofArray([i.TextNode("Content")])),k.divc("col-sm-10",j.ofArray([i.InputArea(j.ofArray([r.Create("id","postContent"),r.Create("rows","5"),k.cls("form-control"),k.sty("width","100%")]),lN)]))])),k.divc("form-group",j.ofArray([k.divc("col-sm-offset-2 col-sm-10",j.ofArray([i.Button("Submit",j.ofArray([k.cls("btn btn-primary")]),lO)]))]))]))]))]));};lt(null);lW=function(lX){var lY,lZ;if(lX.$==1){lZ=lX.$0;lY=lL(lZ);}else{lY=i.get_Empty();}return lY;};l0=lq.Auth.LoggedIn;l1=n.Map(lW,l0);lV=j.ofArray([lD,i.EmbedView(l1)]);return i.Element("div",[],lV);},ThreadListPage:function(l2){var l3,l_,l$,mc,md,me,mh,mi;l3=function(l4){var l5,l6,l7,l8;l6=j.ofArray([i.TextNode(l4.ThreadAuthorName)]);l8=function(){return l2.Go.call(null,{$:1,$0:l4});};l7=j.ofArray([i.Link(l4.Title,$.New(l,{$:0}),l8)]);l5=j.ofArray([i.Element("td",[],l6),i.Element("td",[],l7)]);return i.Element("tr",[],l5);};l_=l2.Threads;l$=W.Delay(function(){return W.Bind(X.GetThreads(),function(mb){h.Set(l_,mb);return W.Return(null);});});W.Start(l$,{$:0});mc=j.ofArray([k.cls("table table-hover")]);me=function(mf){var mg;mg=j.map(l3,mf);return i.Concat(mg);};mh=l2.Threads.get_View();mi=n.Map(me,mh);md=j.ofArray([i.EmbedView(mi)]);return i.Element("table",mc,j.ofArray([i.Element("tbody",[],md)]));}},MouseInfo:{Description:function(){var mj;mj=j.ofArray([i.TextNode("Shows information about the mouse")]);return i.Element("div",[],mj);},Main:function(){var mk,mm,mn,mo,mq,mr,ms,mt,mu,mv,mw,mx,my,mz,mA,mB,mC,mE,mF,mH,mI,mJ,mL,mM,mN,mO,mQ,mR,mS,mT,mV,mW,mX,mY,m2,m3,m4,m8,m9;mk=function(ml){return ml[0];};mm=Y.get_Position();mn=n.Map(mk,mm);mo=function(mp){return mp[1];};mq=Y.get_Position();mr=n.Map(mo,mq);ms=[0,0];mt=Y.get_LeftPressed();mu=Y.get_Position();mv=n.UpdateWhile(ms,mt,mu);mw=[0,0];mx=Y.get_LeftPressed();my=Y.get_Position();mz=n.SnapshotOn(mw,mx,my);mC=function(mD){return"X: "+$$.String(mD);};mE=n.Map(mC,mn);mF=function(mG){return"Y: "+$$.String(mG);};mH=n.Map(mF,mr);mB=j.ofArray([i.TextView(mE),i.TextView(mH)]);mJ=function(mK){return"Left button pressed: "+$$.String(mK);};mL=Y.get_LeftPressed();mM=n.Map(mJ,mL);mI=j.ofArray([i.TextView(mM)]);mO=function(mP){return"Middle button pressed: "+$$.String(mP);};mQ=Y.get_MiddlePressed();mR=n.Map(mO,mQ);mN=j.ofArray([i.TextView(mR)]);mT=function(mU){return"Right button pressed: "+$$.String(mU);};mV=Y.get_RightPressed();mW=n.Map(mT,mV);mS=j.ofArray([i.TextView(mW)]);mY=function(mZ){var m0,m1;m0=mZ[0];m1=mZ[1];return"Position on last left click: ("+$$.String(m0)+","+$$.String(m1)+")";};m2=n.Map(mY,mz);mX=j.ofArray([i.TextView(m2)]);m4=function(m5){var m6,m7;m6=m5[0];m7=m5[1];return"Position of mouse while left button held: ("+$$.String(m6)+","+$$.String(m7)+")";};m8=n.Map(m4,mv);m3=j.ofArray([i.TextView(m8)]);mA=j.ofArray([i.Element("p",[],mB),i.Element("p",[],mI),i.Element("p",[],mN),i.Element("p",[],mS),i.Element("p",[],mX),i.Element("p",[],m3)]);m9=i.Element("div",[],mA);return m9;},Sample:$.Field(function(){return s.Build().Id("MouseInfo").FileName("MouseInfo.fs").Keywords(j.ofArray(["mouse"])).Render(function(){return M.Main();}).RenderDescription(function(){return M.Description();}).Create();})},ObjectConstancy:{DataSet:$.Class({},{LoadFromCSV:function(na){return W.FromContinuations(function(nb){var nc,nd;nc=nb[0];nb[1];nb[2];nd=Z.get(na,{},function(ne){return nc(_0.ParseCSV(ne));});return;});},ParseCSV:function(nf){var ng,ni,nj,nk,nl,nn,np,nq,nr,nt,nu,ny,nB;ng=function(nh){return nh!=="";};ni=R.SplitChars(nf,[13,10],1);nj=S.filter(ng,ni);nk=R.SplitChars(S.get(nj,0),[44],1);nl=S.map(function(nm){return{$:0,$0:nm};},_1.array(nk,{$:1,$0:1},{$:0}));nn=function(no){return R.SplitChars(no,[44],1);};np=S.sub(nj,1,S.length(nj)-1);nq=S.map(nn,np);nr=function(ns){return{$:0,$0:S.get(ns,0)};};nt=S.map(nr,nq);nu=function(nv){var nw;nw=function(nx){return S.get(nx,0)===nv;};return S.findINdex(nw,nq);};ny=function(nz){return S.findINdex(function(nA){return q.Equals(nz,nA);},nl);};nB=function(nC){return function(nD){var nE;nE=nD.$0;return S.get(S.get(nq,nu(nE)),1+ny(nC))<<0;};};return $.New(_0,{Brackets:nl,Population:nB,States:nt});},Ratio:function(nF,nG,nH){var nI;nI={$:0,$0:"Total"};return+(nF.Population.call(null,nG))(nH)/+(nF.Population.call(null,nI))(nH);},TopStatesByRatio:function(nJ,nK){var nL,nN,nQ,nR,nS;nL=function(nM){return[nM,_0.Ratio(nJ,nK,nM)];};nN=function(nO){var nP;nO[0];nP=nO[1];return-nP;};nQ=nJ.States;nR=S.map(nL,nQ);nS=S.sortBy(nN,nR);return _1.array(nS,{$:1,$0:0},{$:1,$0:9});}}),Description:function(){var nT;nT=j.ofArray([i.TextNode("This sample show-cases declarative animation and interpolation (tweening)")]);return i.Element("div",[],nT);},Height:$.Field(function(){return 250;}),InOutTransition:$.Field(function(){var nU,nW,nY,nZ;nU=function(nV){return L.SimpleAnimation(L.Height(),nV);};nW=function(nX){return L.SimpleAnimation(nX,L.Height());};nY=L.SimpleTransition();nZ=g.Enter(nU,nY);return g.Exit(nW,nZ);}),Main:function(){var n0,n1,n2,n3,n4,n5,n6,n_,n$,oa,oc,of,oh,oi,oj,ok;n0=L.SetupDataModel();n1=n0[2];n2=n0[0];n3=n0[1];n5=j.ofArray([i.TextNode("Top States by Age Bracket, 2008")]);n6=function(n7){return i.Select(j.ofArray([k.cls("form-control")]),function(n8){var n9;n9=n8.$0;return n9;},j.ofArray(_1.array(n7.Brackets,{$:1,$0:1},{$:0})),n3);};n_=n.Map(n6,n2);n$=j.ofArray([r.Create("width",$$.String(L.Width())),r.Create("height",$$.String(L.Height()))]);oa=function(ob){return ob.State;};oc=function(od){return function(oe){return L.Render(od,oe);};};of=function(og){return i.Concat(og);};oh=n.MapSeqCachedViewBy(oa,oc,n1);oi=n.Map(of,oh);oj=j.ofArray([i.TextNode("Source: "),k.href("Census Bureau","http://www.census.gov/popest/data/historical/2000s/vintage_2008/")]);ok=j.ofArray([i.TextNode("Original Sample by Mike Bostock: "),k.href("Object Constancy","http://bost.ocks.org/mike/constancy/")]);n4=j.ofArray([i.Element("h2",[],n5),i.EmbedView(n_),k.divc("skip",$.New(l,{$:0})),i.SvgElement("svg",n$,j.ofArray([i.EmbedView(oi)])),i.Element("p",[],oj),i.Element("p",[],ok)]);return i.Element("div",[],n4);},Percent:function(ol){return $$.String(_2.floor(100*ol))+"."+$$.String((_2.floor(1000*ol)<<0)%10)+"%";},Render:function(om,on){var oo,ot,ov,ox,oz,oD,oE,oG;oo=function(op,oq,or){return o.Animated(op,oq,n.Map(or,on),function(os){return $$.String(os);});};ot=function(ou){return L.Width()*ou.Value/ou.MaxValue;};ov=function(ow){return L.Height()*+ow.Position/+ow.Total;};ox=function(oy){return L.Height()/+oy.Total-2;};oz=function(oA){return function(oB){var oC;oC=n.Map(oA,on);return i.SvgElement("text",oB,j.ofArray([i.TextView(oC)]));};};oD=j.ofArray([o.Style("fill","steelblue")]);oE=function(oF){return L.Percent(oF.Value);};oG=function(oH){return oH.State;};return i.Concat(j.ofArray([i.SvgElement("g",oD,j.ofArray([i.SvgElement("rect",j.ofArray([r.Create("x","0"),oo("y",L.InOutTransition(),ov),oo("width",L.SimpleTransition(),ot),oo("height",L.SimpleTransition(),ox)]),$.New(l,{$:0}))])),(oz(oE))(j.ofArray([r.Create("text-anchor","end"),oo("x",L.SimpleTransition(),ot),oo("y",L.InOutTransition(),ov),r.Create("dx","-2"),r.Create("dy","14"),k.sty("fill","white"),k.sty("font","12px sans-serif")])),(oz(oG))(j.ofArray([r.Create("x","0"),oo("y",L.InOutTransition(),ov),r.Create("dx","2"),r.Create("dy","16"),k.sty("fill","white"),k.sty("font","14px sans-serif"),k.sty("font-weight","bold")]))]));},Sample:$.Field(function(){return s.Build().Id("ObjectConstancy").FileName("ObjectConstancy.fs").Keywords(j.ofArray(["animation"])).Render(function(){return L.Main();}).RenderDescription(function(){return L.Description();}).Create();}),SetupDataModel:function(){var oK,oM,oN,oO,oP,oS,oT,oU,o7;oK=function(){return _0.LoadFromCSV("ObjectConstancy.csv");};oM=p.Const(null);oN=n.MapAsync(oK,oM);oO=m.Create({$:0,$0:"Under 5 Years"});oP=function(oQ){return function(oR){return _0.TopStatesByRatio(oQ,oR);};};oS=oO.get_View();oT=n.Map2(oP,oN,oS);oU=function(oV){var oW,oX,oZ,o0,o6;oW=S.length(oV);oX=S.map(function(oY){return oY[1];},oV);oZ=S.max(oX);o0=function(o1){return function(o2){var o3,o4,o5;o3=o2[0];o4=o2[1];o5=o3.$0;return{MaxValue:oZ,Position:o1,State:o5,Total:oW,Value:o4};};};o6=S.mapi(o0,oV);return o6;};o7=n.Map(oU,oT);return[oN,oO,o7];},SimpleAnimation:function(o8,o9){var o_,o$;o_=c.get_Double();o$=d.get_CubicInOut();return f.Simple(o_,o$,300,o8,o9);},SimpleTransition:$.Field(function(){return g.Create(function(pa){return function(pb){return L.SimpleAnimation(pa,pb);};});}),Width:$.Field(function(){return 960;})},PhoneExample:{Description:function(){var pc;pc=j.ofArray([i.TextNode("Taken from the "),k.href("AngularJS Tutorial","https://docs.angularjs.org/tutorial/"),i.TextNode(", a list filtering and sorting application for phones.")]);return i.Element("div",[],pc);},Main:function(){var pd;pd=function(pe,pf,pg){return $.New(_3,{Name:pe,Snippet:pf,Age:pg});};return G.PhonesWidget(j.ofArray([pd("Nexus S","Fast just got faster with Nexus S.",1),pd("Motorola XOOM","The Next, Next generation tablet",2),pd("Motorola XOOM with Wi-Fi","The Next, Next generation tablet",3),pd("Samsung Galaxy","The Ultimate Phone",4)]));},Order:$.Class({},{Show:function(ph){return ph.$==1?"Newest":"Alphabetical";}}),Phone:$.Class({},{Compare:function(pi,pj,pk){return pi.$==1?_4.Compare(pj.Age,pk.Age):_4.Compare(pj.Name,pk.Name);},MatchesQuery:function(pl,pm){return pm.Name.indexOf(pl)!=-1?true:pm.Snippet.indexOf(pl)!=-1;}}),PhonesWidget:function(pn){var po,pp,pq,pr,pA,pB,pC,pD,pI,pL;po=m.Create(pn);pp=m.Create("");pq=m.Create($.New(_5,{$:1}));pr=function(ps){return function(pt){var pu,pw,pz;pu=function(pv){return _3.MatchesQuery(ps,pv);};pw=function(px){return function(py){return _3.Compare(pt,px,py);};};pz=j.filter(pu,pn);return j.sortWith(pw,pz);};};pA=pp.get_View();pB=pq.get_View();pC=n.Map2(pr,pA,pB);pD=function(pE){var pF,pG,pH;pG=j.ofArray([i.TextNode(pE.Name)]);pH=j.ofArray([i.TextNode(pE.Snippet)]);pF=j.ofArray([i.Element("span",[],pG),i.Element("p",[],pH)]);return i.Element("li",[],pF);};pI=function(pJ){return i.Concat(j.map(pD,pJ));};pL=j.ofArray([i.EmbedView(n.Map(pI,pC))]);return k.divc("row",j.ofArray([k.divc("col-sm-6",j.ofArray([i.TextNode("Search: "),i.Input(j.ofArray([r.Create("class","form-control")]),pp),i.TextNode("Sort by: "),i.Select(j.ofArray([r.Create("class","form-control")]),function(pK){return _5.Show(pK);},j.ofArray([$.New(_5,{$:1}),$.New(_5,{$:0})]),pq)])),k.divc("col-sm-6",j.ofArray([i.Element("ul",[],pL)]))]));},Sample:$.Field(function(){return s.Build().Id("PhoneExample").FileName("PhoneExample.fs").Keywords(j.ofArray(["todo"])).Render(function(){return G.Main();}).RenderDescription(function(){return G.Description();}).Create();})},RoutedBobsleighSite:{Main:function(pO){var pP,pQ,pS,pU,pV,pX;pP=w.NavBar(pO);pQ=function(pR){return i.Append(pP,pR);};pS={Go:function(pT){return h.Set(pO,pT);}};pU=pO.get_View();pV=function(pW){return pW.$==1?pQ(w.History(pS)):pW.$==2?pQ(w.Governance(pS)):pW.$==3?pQ(w.Team(pS)):pQ(w.HomePage(pS));};pX=n.Map(pV,pU);return i.EmbedView(pX);},Sample:$.Field(function(){return s.Routed(K.TheRouteMap(),{$:0}).Id("RoutedBobsleighSite").FileName("RoutedBobsleighSite.fs").Keywords(j.ofArray(["text"])).Render(function(pY){return K.Main(pY);}).RenderDescription(function(pZ){return K.description(pZ);}).Create();}),TheRouteMap:$.Field(function(){var p0,p2;p0=function(p1){return p1.$==1?j.ofArray(["history"]):p1.$==2?j.ofArray(["governance"]):p1.$==3?j.ofArray(["team"]):$.New(l,{$:0});};p2=function(p3){return p3.$==1?p3.$0==="history"?p3.$1.$==0?{$:1}:{$:0}:p3.$0==="governance"?p3.$1.$==0?{$:2}:{$:0}:p3.$0==="team"?p3.$1.$==0?{$:3}:{$:0}:{$:0}:{$:0};};return _6.Create(p0,p2);}),description:function(){var p5;p5=j.ofArray([i.TextNode("A small website about bobsleighs, demonstrating how UI.Next may be used to structure single-page applications. Routed using the URL.")]);return i.Element("div",[],p5);}},Samples:{Build:function(){return _7.New(function(p6){return function(p7){return s.CreateSimple(p6,p7);};});},Builder:$.Class({Create:function(){return(this.create.call(null,this.vis))(this.meta);},FileName:function(p8){var p9;p9=this.meta;this.meta={FileName:p8,Keywords:p9.Keywords,Title:p9.Title,Uri:p9.Uri};return this;},Id:function(p_){var p$;p$=this.meta;this.meta={FileName:p$.FileName,Keywords:p$.Keywords,Title:p_,Uri:p_};return this;},Keywords:function(qa){var qb;qb=this.meta;this.meta={FileName:qb.FileName,Keywords:qa,Title:qb.Title,Uri:qb.Uri};return this;},Render:function(qc){var qd,qe;qd=this.vis;qe=function(qf){return qc(qf);};this.vis={Desc:qd.Desc,Main:qe};return this;},RenderDescription:function(qg){var qh;qh=this.vis;this.vis={Desc:function(qi){return qg(qi);},Main:qh.Main};return this;},Title:function(qj){var qk;qk=this.meta;this.meta={FileName:qk.FileName,Keywords:qk.Keywords,Title:qj,Uri:qk.Uri};return this;},Uri:function(ql){var qm;qm=this.meta;this.meta={FileName:qm.FileName,Keywords:qm.Keywords,Title:qm.Title,Uri:ql};return this;}},{New:function(qn){var qo;qo=$.New(this,{});qo.create=qn;qo.meta={FileName:"Unknown.fs",Keywords:$.New(l,{$:0}),Title:"Unknown",Uri:"unknown"};qo.vis={Desc:function(){return i.get_Empty();},Main:function(){return i.get_Empty();}};return qo;}}),CreateRouted:function(qr,qs,qt,qu){var qv,qw,qx,qB,qC;qv={Body:i.get_Empty(),Description:i.get_Empty(),Meta:qu,Router:undefined,RouteId:undefined,SamplePage:undefined};qw=qu.Uri;qx=function(qy){return function(qz){var qA;qv.RouteId=qy;qv.Body=qt.Main.call(null,qz);qv.Description=qt.Desc.call(null,qz);qA=_8.mkPage(qv.Meta.Title,qy,{$:2});qA.PageSample={$:1,$0:qv};qA.PageRouteId=qy;qv.SamplePage=qA;return qA;};};qB=_9.Route(qr,qs,qx);qC=_9.Prefix(qw,qB);qv.Router=qC;return qv;},CreateSimple:function(qD,qE){var qF,qH,qJ,qK,qL,qM,qQ;qF=function(){return $.New(l,{$:0});};qH=function(){return null;};qJ=_6.Create(qF,qH);qK={Body:qD.Main.call(null,null),Description:qD.Desc.call(null,null),Meta:qE,Router:undefined,RouteId:undefined,SamplePage:undefined};qL=qE.Uri;qM=function(qN){return function(){var qP;qP=_8.mkPage(qK.Meta.Title,qN,{$:2});qK.RouteId=qN;qP.PageSample={$:1,$0:qK};qP.PageRouteId=qN;qK.SamplePage=qP;return qP;};};qQ=_9.Route(qJ,null,qM);qK.Router=_9.Prefix(qL,qQ);return qK;},InitialSamplePage:function(qR){return j.head(qR).SamplePage;},Render:function(qS,qT,qU){var qV,qW,qX,qY;qV=qT.PageSample;if(qV.$==0){qX=_4.FailWith("Attempted to render non-sample on samples page");}else{qY=qV.$0;qX=qY;}qW=qX;return i.Element("section",j.ofArray([k.cls("block-small")]),j.ofArray([k.divc("container",j.ofArray([k.divc("row",j.ofArray([s.Sidebar(qS,qU),s.RenderContent(qW)]))]))]));},RenderContent:function(qZ){var q0,q1,q2,q3,q4,q5;q1=j.ofArray([i.TextNode(qZ.Meta.Title)]);q3=j.ofArray([qZ.Description]);q4=j.ofArray([i.Element("a",j.ofArray([r.Create("href","https://github.com/intellifactory/websharper.ui.next.samples/blob/master/src/"+qZ.Meta.Uri+".fs")]),j.ofArray([i.TextNode("View Source")]))]);q2=j.ofArray([i.Element("p",[],q3),i.Element("p",[],q4)]);q5=j.ofArray([qZ.Body]);q0=j.ofArray([k.divc("row",j.ofArray([i.Element("h1",[],q1),i.Element("div",[],q2)])),k.divc("row",j.ofArray([i.Element("p",[],q5)]))]);return k.divc("samples col-md-9",j.ofArray([i.Element("div",[],q0)]));},Routed:function(q6,q7){return _7.New(function(q8){return function(q9){return s.CreateRouted(q6,q7,q8,q9);};});},SamplesRouter:function(q_){var q$;q$=_9.Merge(z.toList(z.delay(function(){return z.map(function(rb){return rb.Router;},q_);})));return _9.Prefix("samples",q$);},Sidebar:function(rc,rd){var re,rr,rs;re=function(rf){var rg,ri,rj,rk,rn,ro;rg=function(rh){return rh.PageSample;};ri=rc.get_View();rj=n.Map(rg,ri);rk=function(rl){return _.exists(function(rm){return rf.Meta.FileName===rm.Meta.FileName;},rl);};rn=o.DynamicClass("active",rj,rk);ro=function(){var rq;rq=rf.SamplePage;return h.Set(rc,rq);};return i.Link(rf.Meta.Title,j.ofArray([k.cls("list-group-item"),rn]),ro);};rr=j.ofArray([i.TextNode("Samples")]);rs=j.map(re,rd);return k.divc("col-md-3",j.ofArray([i.Element("h4",[],rr),i.Concat(rs)]));}},Server:{AddPost:function(rt,ru){return W.Delay(function(){var rw,rx,ry,rz,rA,rB,rC,rD,rE;rw=bb.TryFind(rt.ThreadId,X.posts());if(rw.$==0){ry=rt.ThreadId;rz=j.ofArray([ru]);rA=X.posts().Add(ry,rz);X.posts=function(){return rA;};rx=W.Return(null);}else{rB=rw.$0;rC=rt.ThreadId;rD=j.append(rB,j.ofArray([ru]));rE=X.posts().Add(rC,rD);X.posts=function(){return rE;};rx=W.Return(null);}return rx;});},AddThread:function(rF){return W.Delay(function(){var rH,rI,rJ,rK;rH=j.append(X.threads(),j.ofArray([rF]));X.threads=function(){return rH;};rI=rF.ThreadId;rJ=$.New(l,{$:0});rK=X.posts().Add(rI,rJ);X.posts=function(){return rK;};return W.Return(null);});},CheckCredentials:function(rL,rM){var rN;rN=[rL,rM];return rN[0]==="TestUser"?rN[1]==="TestPass"?{$:1,$0:{Name:rL,Password:rM}}:{$:0}:{$:0};},CheckLogin:function(rO,rP){return W.Delay(function(){return W.Bind(W.Sleep(X.DELAY()),function(){return W.Return(X.CheckCredentials(rO,rP));});});},DELAY:$.Field(function(){return 200;}),GetPosts:function(rS){return W.Delay(function(){var rU,rV,rW;rU=bb.TryFind(rS.ThreadId,X.posts());if(rU.$==0){rV=W.Return($.New(l,{$:0}));}else{rW=rU.$0;rV=W.Return(rW);}return rV;});},GetThreads:function(){return W.Delay(function(){return W.Bind(W.Sleep(X.DELAY()),function(){return W.Return(X.threads());});});},posts:$.Field(function(){return bc.New1([]);}),threads:$.Field(function(){return $.New(l,{$:0});})},SimpleTextBox:{Description:function(){var rZ;rZ=j.ofArray([i.TextNode("A label which copies the contents of a text box.")]);return i.Element("div",[],rZ);},Main:function(){var r0,r1,r2,r3,r4,r5;r0=m.Create("");r1=j.ofArray([r.Create("class","form-control")]);r2=i.Input(r1,r0);r3=i.TextView(r0.get_View());r4=j.ofArray([r2]);r5=j.ofArray([r3]);return k.divc("panel-default",j.ofArray([k.divc("panel-body",j.ofArray([i.Element("div",[],r4),i.Element("div",[],r5)]))]));},Sample:$.Field(function(){return s.Build().Id("SimpleTextBox").FileName("SimpleTextBox.fs").Keywords(j.ofArray(["text"])).Render(function(){return C.Main();}).RenderDescription(function(){return C.Description();}).Create();})},Site:{AboutPage:function(r8){var r9,sf,si,sl,sn,so,sp,sq,sr,ss,st,su,sv,sx;r9=function(r_){var r$,sa,sb,se;r$=j.ofArray([i.TextNode(r_.Name)]);sb=function(sc){var sd;sd=j.ofArray([sc]);return i.Element("li",[],sd);};se=r_.URLs;sa=j.ofArray([i.Element("ul",j.ofArray([k.cls("list-unstyled")]),j.map(sb,se))]);return i.Concat(j.ofArray([i.Element("h1",[],r$),i.Element("p",j.ofArray([k.cls("lead")]),j.ofArray([i.TextNode(r_.Description)])),i.Element("p",[],sa)]));};sf=function(sg){var sh;sh=j.ofArray([k.cls("block-large")]);return i.Element("section",sh,j.ofArray([k.divc("container",j.ofArray([k.divc("row",j.ofArray([k.divc("col-lg-3",j.ofArray([i.Element("img",j.ofArray([r.Create("src",sg.ImgURL),k.sty("width","100%")]),$.New(l,{$:0}))])),k.divc("col-lg-1",$.New(l,{$:0})),k.divc("col-lg-8",j.ofArray([r9(sg)]))]))]))]));};si=function(sj){var sk;sk=j.ofArray([k.cls("block-large"),k.cls("bg-alt")]);return i.Element("section",sk,j.ofArray([k.divc("container",j.ofArray([k.divc("row",j.ofArray([k.divc("col-lg-8",j.ofArray([r9(sj)])),k.divc("col-lg-1",$.New(l,{$:0})),k.divc("col-lg-3",j.ofArray([i.Element("img",j.ofArray([r.Create("src",sj.ImgURL),k.sty("width","100%")]),$.New(l,{$:0}))]))]))]))]));};sl=function(sm){return i.Element("span",j.ofArray([k.cls("fa"),k.cls(sm),k.cls("fa-3x"),k.sty("font-size","400%"),k.sty("color","#aaa")]),$.New(l,{$:0}));};sn=j.ofArray([k.cls("block-huge")]);so=j.ofArray([i.TextNode("WebSharper UI.Next: "),i.Element("span",j.ofArray([k.cls("text-muted")]),j.ofArray([i.TextNode("Everything you need to know.")]))]);sp=j.ofArray([i.TextNode("Get Started")]);sq=j.ofArray([i.TextNode("Take the tutorial, and you'll be writing reactive applications in no time!")]);sr=j.ofArray([i.TextNode("Dive Right In")]);ss=j.ofArray([i.TextNode("Comprehensive documentation on the UI.Next API.")]);st=j.ofArray([i.TextNode("See it in Action")]);su=j.ofArray([i.TextNode("A variety of samples using UI.Next, and their associated source code!")]);sv=function(){return r8({$:2});};sx=j.mapi(function(sy){return function(sz){var sA;sA=sy%2===0?sf:si;return sA(sz);};},B.Entries());return k.divc("extensions",j.ofArray([k.divc("container",j.ofArray([i.Element("section",sn,j.ofArray([i.Element("h1",[],so),i.Element("p",j.ofArray([k.cls("lead")]),j.ofArray([i.TextNode("A selection of resources about UI.Next.")]))]))])),k.divc("block-large bg-alt",j.ofArray([k.divc("container",j.ofArray([k.divc("row text-center",j.ofArray([k.divc("col-lg-4",j.ofArray([sl("fa-graduation-cap"),i.Element("h3",[],sp),i.Element("p",[],sq),B.linkBtn("Tutorial","https://github.com/intellifactory/websharper.ui.next/blob/master/docs/Tutorial.md")])),k.divc("col-lg-4",j.ofArray([sl("fa-book"),i.Element("h3",[],sr),i.Element("p",[],ss),B.linkBtn("API Reference","https://github.com/intellifactory/websharper.ui.next/blob/master/docs/API.md")])),k.divc("col-lg-4",j.ofArray([sl("fa-send"),i.Element("h3",[],st),i.Element("p",[],su),i.Button("Samples",j.ofArray([k.cls("btn"),k.cls("btn-default")]),sv)]))]))]))])),i.Concat(sx)]));},Entries:$.Field(function(){return j.ofArray([B.mkEntry("Documentation","Official documentation on WebSharper UI.Next, including the API reference and some discussion about the design decisions we made","files/gear.png",j.ofArray([k.href("Tutorial","https://github.com/intellifactory/websharper.ui.next/blob/master/docs/Tutorial.md"),k.href("API Reference","https://github.com/intellifactory/websharper.ui.next/blob/master/docs/API.md"),k.href("Full Documentation","https://github.com/intellifactory/websharper.ui.next/blob/master/README.md")])),B.mkEntry("Articles","Articles written about UI.Next, which provide more detailed discussions about various aspects of the library.","files/uinext-screen.png",j.ofArray([k.href("WebSharper UI.Next: An Introduction","http://www.websharper.com/blog-entry/3954"),k.href("WebSharper UI.Next: Declarative Animation","http://www.websharper.com/blog-entry/3964"),k.href("Structuring Applications with WebSharper UI.Next","http://www.websharper.com/blog-entry/3965")])),B.mkEntry("Presentations","Presentations about UI.Next, providing an overview of the library and deeper insights into the thinking behind it.","files/anton-pres.png",j.ofArray([k.href("Presentation: Tackle UI with Reactive DOM in F# and WebSharper","https://www.youtube.com/watch?v=wEkS09s3KBc")]))]);}),Fade:$.Field(function(){var sB,sC,sD;sB=c.get_Double();sC=d.get_CubicInOut();sD=B.fadeTime();return function(sE){return function(sF){return f.Simple(sB,sC,sD,sE,sF);};};}),FadeTransition:$.Field(function(){var sG,sI,sK,sL;sG=function(){return((B.Fade())(0))(1);};sI=function(){return((B.Fade())(1))(0);};sK=g.Create(B.Fade());sL=g.Enter(sG,sK);return g.Exit(sI,sL);}),HomePage:function(){var sN,sO,sP,sQ,sR;sN=j.ofArray([k.cls("block-huge"),k.cls("teaser-home"),k.sty("height","700px"),k.sty("padding-top","40px"),k.sty("padding-bottom","30px"),k.sty("margin-bottom","40px")]);sO=$.New(l,{$:0});sP=j.ofArray([i.TextNode("WebSharper UI.Next: "),i.Element("span",j.ofArray([k.cls("text-muted")]),j.ofArray([i.TextNode("A new generation of reactive web applications.")]))]);sR=$.New(l,{$:0});sQ=j.ofArray([i.TextNode("Write powerful, data-backed applications"),i.Element("br",[],sR),i.TextNode(" using F# and WebSharper.")]);return k.divc("container",j.ofArray([i.Element("section",sN,j.ofArray([k.divc("container",j.ofArray([k.divc("row",j.ofArray([k.divc("col-12",j.ofArray([i.Element("br",[],sO),i.Element("h1",[],sP),i.Element("h3",[],sQ),i.Element("p",j.ofArray([k.cls("lead")]),j.ofArray([i.TextNode("Get it free on NuGet today!")]))]))]))]))]))]));},Main:function(sS){var sT,sV,sW,sX;sT=function(sU){return sU.PageRouteId;};sV=B.SiteRouter(sS);sW=_9.Install(sT,sV);sX=function(sY){var sZ,s0,s7;sZ=sY.get_View();s0=function(s1){var s2;s2=s1.PageType;return s2.$==1?B.AboutPage(function(s3){var s4;s4=B.pageFor(s3,sS);return h.Set(sY,s4);}):s2.$==2?s.Render(sY,s1,sS):B.HomePage(function(s5){var s6;s6=B.pageFor(s5,sS);return h.Set(sY,s6);});};s7=n.Map(s0,sZ);return i.EmbedView(s7);};i.RunById("main",sX(sW));return i.RunById("navigation",B.NavBar(sW,sS));},MakePage:function(s8){return i.Element("div",j.ofArray([o.AnimatedStyle("opacity",B.FadeTransition(),p.Const(1),function(s9){return $$.String(s9);})]),j.ofArray([s8]));},NavBar:function(s_,s$){var ta,tk,to,tp,tq,tr,ts,tt;ta=function(tb){var tc,td,tj;tc=s_.get_View();td=function(te){var tf,tg;tf=q.Equals(te.PageType,tb)?k.cls("active"):r.get_Empty();tg=function(){var ti;ti=B.pageFor(tb,s$);return h.Set(s_,ti);};return i.Element("li",j.ofArray([k.cls("nav-item"),tf]),j.ofArray([i.Link(B.showPgTy(tb),$.New(l,{$:0}),tg)]));};tj=n.Map(td,tc);return i.EmbedView(tj);};tk=function(tl){var tm,tn;tm=tl[0];tn=tl[1];return i.Element("li",j.ofArray([k.cls("nav-item")]),j.ofArray([k.href(tm,tn)]));};to=j.ofArray([k.cls("container")]);tp=j.ofArray([k.sty("float","left")]);tq=j.ofArray([r.Create("href","http://www.websharper.com/home"),k.sty("text-decoration","none"),k.cls("first")]);tr=j.ofArray([k.cls("nav"),k.cls("nav-collapsible"),k.cls("right"),k.sty("float","right")]);ts=j.map(ta,B.NavPages());tt=j.map(tk,B.NavExternalLinks());return i.Element("nav",to,j.ofArray([i.Element("div",tp,j.ofArray([i.Element("a",tq,j.ofArray([i.Element("img",j.ofArray([r.Create("src","files/logo-websharper-icon.png"),r.Create("alt","[logo]"),k.sty("margin-top","0"),k.sty("border-right","1px"),k.sty("solid","#eee")]),$.New(l,{$:0})),i.Element("img",j.ofArray([r.Create("src","files/logo-websharper-text-dark.png"),r.Create("alt","WebSharper"),k.sty("height","32px")]),$.New(l,{$:0}))]))])),i.Element("nav",tr,j.ofArray([i.Element("ul",j.ofArray([k.cls("nav-list")]),j.ofArray([i.Concat(ts),i.Concat(tt)]))]))]));},NavExternalLinks:$.Field(function(){return j.ofArray([["GitHub","http://www.github.com/IntelliFactory/websharper.ui.next"],["API Reference","https://github.com/intellifactory/websharper.ui.next/blob/master/docs/API.md"]]);}),NavPages:$.Field(function(){return j.ofArray([{$:0},{$:1},{$:2}]);}),SiteRouter:function(tu){var tv,tw,tx;tv=B.homeRouter(tu);tw=B.aboutRouter(tu);tx=s.SamplesRouter(tu);return _9.Merge(j.ofArray([_9.Prefix("home",tv),_9.Prefix("about",tw),_9.Prefix("samples",tx)]));},aboutPage:$.Field(function(){return _8.mkPage(B.showPgTy({$:1}),undefined,{$:1});}),aboutRouter:function(ty){var tz,tA;tz=B.unitRouteMap();tA=function(tB){return function(){var tD;tD=B.pageFor({$:1},ty);tD.PageRouteId=tB;return tD;};};return _9.Route(tz,null,tA);},fadeTime:$.Field(function(){return 300;}),homePage:$.Field(function(){return _8.mkPage(B.showPgTy({$:0}),undefined,{$:0});}),homeRouter:function(tE){var tF,tG;tF=B.unitRouteMap();tG=function(tH){return function(){var tJ;tJ=B.pageFor({$:0},tE);tJ.PageRouteId=tH;return tJ;};};return _9.Route(tF,null,tG);},linkBtn:function(tK,tL){return i.Element("a",j.ofArray([k.cls("btn"),k.cls("btn-default"),r.Create("href",tL)]),j.ofArray([i.TextNode(tK)]));},mkEntry:function(tM,tN,tO,tP){return{Name:tM,ImgURL:tO,Description:tN,URLs:tP};},pageFor:function(tQ,tR){return tQ.$==1?B.aboutPage():tQ.$==2?s.InitialSamplePage(tR):B.homePage();},showPgTy:function(tS){return tS.$==1?"About":tS.$==2?"Samples":"Home";},unitRouteMap:$.Field(function(){var tT,tV;tT=function(){return $.New(l,{$:0});};tV=function(){return null;};return _6.Create(tT,tV);})},SiteCommon:{mkPage:function(tX,tY,tZ){return{PageName:tX,PageRouteId:tY,PageType:tZ,PageSample:{$:0}};}},SortableBarChart:{BarTransition:$.Field(function(){var t0,t2;t0=function(t1){return bd.SimpleAnimation(0,t1);};t2=bd.SimpleTransition();return g.Enter(t0,t2);}),DelayedAnimation:function(t3,t4,t5){var t6,t7;t6=c.get_Double();t7=d.get_CubicInOut();return f.Delayed(t6,t7,300,t3,t4,t5);},Description:function(){var t8;t8=j.ofArray([i.TextNode("This sample show-cases animation and data display.")]);return i.Element("div",[],t8);},DisplayGraph:function(t9){var t_,t$,ua,uc,uf,uh,ui;t$=j.ofArray([r.Create("width",$$.String(bd.Width())),r.Create("height",$$.String(bd.Height()))]);ua=function(ub){return ub.Label;};uc=function(ud){return function(ue){return bd.Render(ud,ue);};};uf=function(ug){return i.Concat(ug);};uh=n.MapSeqCachedViewBy(ua,uc,t9);ui=n.Map(uf,uh);t_=j.ofArray([i.SvgElement("svg",t$,j.ofArray([i.EmbedView(ui)]))]);return i.Element("div",[],t_);},Height:$.Field(function(){return 500;}),LoadData:$.Field(function(){var uj,ul;uj=function(){return bd.LoadFromCSV("AlphaFrequency.csv");};ul=p.Const(null);return n.MapAsync(uj,ul);}),LoadFromCSV:function(um){return W.FromContinuations(function(un){var uo,up;uo=un[0];un[1];un[2];up=Z.get(um,{},function(uq){return uo(bd.ParseCSV(uq));});return;});},Main:function(){var ur,us,uu,uv,uw,uz,uA,uB;ur=m.Create({$:0});us=function(ut){return j.ofSeq(ut);};uu=bd.LoadData();uv=n.Map(us,uu);uw=function(ux){return function(uy){return bd.ViewData(ux,uy);};};uz=ur.get_View();uA=n.Map2(uw,uv,uz);uB=j.ofArray([i.Select($.New(l,{$:0}),function(uC){return bd.ShowOrdering(uC);},j.ofArray([{$:0},{$:1}]),ur),bd.DisplayGraph(uA)]);return i.Element("div",[],uB);},ParseCSV:function(uD){var uE,uG,uH,uI;uE=function(uF){return uF!=="";};uG=R.SplitChars(uD,[13,10],1);uH=S.filter(uE,uG);uI=S.map(function(uJ){var uK;uK=R.SplitChars(uJ,[44],1);return bd.mkEntry(uK);},_1.array(uH,{$:1,$0:1},{$:0}));return uI;},Render:function(uL,uM){var uN,uT,uV,uX,uZ,u1,u2;uN=function(uO,uP){var uQ;uQ=function(uR){var uS;uS=uP(uR);return $$.String(uS);};return o.Dynamic(uO,n.Map(uQ,uM));};uT=function(uU){return bd.Width()/+uU.NumData-bd.Spacing();};uV=function(uW){return uW.Value/uW.MaxValue*bd.Height();};uX=function(uY){return(uT(uY)+bd.Spacing())*+uY.Rank;};uZ=function(u0){return bd.Height()-uV(u0);};u1=j.ofArray([o.Style("fill","steelblue")]);u2=bd.BarTransition();return i.SvgElement("g",u1,j.ofArray([i.SvgElement("rect",j.ofArray([uN("width",uT),uN("height",uV),o.Animated("x",u2,n.Map(uX,uM),function(u3){return $$.String(u3);}),uN("y",uZ)]),$.New(l,{$:0}))]));},Sample:$.Field(function(){return s.Build().Id("SortableBarChart").FileName("SortableBarChart.fs").Keywords(j.ofArray(["animation"])).Render(function(){return bd.Main();}).RenderDescription(function(){return bd.Description();}).Create();}),ShowOrdering:function(u6){return u6.$==1?"By Frequency":"By Letter";},SimpleAnimation:function(u7,u8){return bd.DelayedAnimation(0,u7,u8);},SimpleTransition:$.Field(function(){return g.Create(function(u9){return function(u_){return bd.SimpleAnimation(u9,u_);};});}),Spacing:$.Field(function(){return 2;}),ViewData:function(u$,va){var vb,vc,vf,vk,vp,vq,vr;vb=z.length(u$);vc=z.fold(function(vd){return function(ve){return ve.DataValue>vd?ve.DataValue:vd;};},0,u$);vf=function(vg){return function(vh){var vi,vj;vi=vh.DataLabel;vj=vh.DataValue;return{Label:vi,Value:vj,Rank:vg,MaxValue:vc,NumData:vb};};};vk=va.$==1?function(vl){return function(vm){return vm.DataValue<vl.DataValue?-1:vl.DataValue===vm.DataValue?0:1;};}:function(vn){return function(vo){return q.Compare(vn.DataLabel,vo.DataLabel);};};vp=j.ofSeq(u$);vq=j.sortWith(vk,vp);vr=j.mapi(vf,vq);return vr;},Width:$.Field(function(){return 720;}),mkEntry:function(vs){var vt,vu;vt=S.get(vs,0);vu=be(S.get(vs,1));return{DataLabel:vt,DataValue:vu};}},TodoList:{CreateModel:function(){var vv,vx;vv=function(vw){return vw.Key;};vx=$.New(l,{$:0});return{Items:bf.Create(vv,vx)};},Description:function(){var vy;vy=j.ofArray([i.TextNode("A to-do list application.")]);return i.Element("div",[],vy);},Main:function(){return F.TodoExample();},RenderItem:function(vz,vA){var vB,vC,vD,vH,vI,vJ,vM;vD=function(vE){var vF,vG;if(vE){vG=j.ofArray([i.TextNode(vA.TodoText)]);vF=i.Element("del",[],vG);}else{vF=i.TextNode(vA.TodoText);}return vF;};vH=vA.Done.get_View();vI=n.Map(vD,vH);vC=j.ofArray([i.EmbedView(vI)]);vJ=j.ofArray([bg.button("Done",function(){var vL;vL=vA.Done;return h.Set(vL,true);})]);vM=j.ofArray([bg.button("Remove",function(){return vz.Items.Remove(vA);})]);vB=j.ofArray([i.Element("td",[],vC),i.Element("td",[],vJ),i.Element("td",[],vM)]);return i.Element("tr",[],vB);},Sample:$.Field(function(){return s.Build().Id("TodoList").FileName("TodoList.fs").Keywords(j.ofArray(["todo"])).Render(function(){return F.Main();}).RenderDescription(function(){return F.Description();}).Create();}),TodoExample:function(){var vQ,vR;vQ=F.CreateModel();vR=j.ofArray([F.TodoList(vQ),F.TodoForm(vQ)]);return i.Element("table",j.ofArray([r.Create("class","table table-hover")]),j.ofArray([i.Element("tbody",[],vR)]));},TodoForm:function(vS){var vT,vU,vV;vT=m.Create("");vV=j.ofArray([i.TextNode("New entry: ")]);vU=j.ofArray([k.divc("form-group",j.ofArray([i.Element("label",[],vV),bg.input(vT)])),bg.button("Submit",function(){var vX;vX=bh.Create(h.Get(vT));return vS.Items.Add(vX);})]);return i.Element("form",[],vU);},TodoItem:$.Class({},{Create:function(vY){var vZ;vZ=bi.Fresh();return $.New(bh,{Done:m.Create(false),Key:vZ,TodoText:vY});}}),TodoList:function(v0){var v1,v3,v5;v1=function(v2){return v2.Key;};v3=function(v4){return F.RenderItem(v0,v4);};v5=bj.View(v0.Items);return i.ConvertBy(v1,v3,v5);},Util:{button:function(v6,v7){return i.Button(v6,j.ofArray([r.Create("class","btn btn-default")]),v7);},input:function(v8){return i.Input(j.ofArray([r.Create("class","form-control")]),v8);}}},Utilities:{cls:function(v9){return o.Class(v9);},divc:function(v_,v$){var wa;wa=j.ofArray([k.cls(v_)]);return i.Element("div",wa,v$);},href:function(wb,wc){var wd,we;wd=j.ofArray([r.Create("href",wc)]);we=j.ofArray([i.TextNode(wb)]);return i.Element("a",wd,we);},sty:function(wf,wg){return o.Style(wf,wg);}}}}}});$.OnInit(function(){a=$.Safe($$.WebSharper.UI);b=$.Safe(a.Next);c=$.Safe(b.Interpolation1);d=$.Safe(b.Easing);e=$.Safe(b.AnimatedBobsleighSite);f=$.Safe(b.An);g=$.Safe(b.Trans1);h=$.Safe(b.Var1);i=$.Safe(b.Doc);j=$.Safe($$.WebSharper.List);k=$.Safe(b.Utilities);l=$.Safe(j.T);m=$.Safe(b.Var);n=$.Safe(b.View);o=$.Safe(b.AttrModule);p=$.Safe(b.View1);q=$.Safe($$.WebSharper.Unchecked);r=$.Safe(b.AttrProxy);s=$.Safe(b.Samples);t=$.Safe(b.AnimatedContactFlow);u=$.Safe(b.Flow);v=$.Safe(b.Flow1);w=$.Safe(b.BobsleighSite);x=$.Safe(b.Calculator);y=$.Safe(b.CheckBoxTest);z=$.Safe($$.WebSharper.Seq);A=$.Safe(y.Person);B=$.Safe(b.Site);C=$.Safe(b.SimpleTextBox);D=$.Safe(b.InputTransform);E=$.Safe(b.InputTransformHtml);F=$.Safe(b.TodoList);G=$.Safe(b.PhoneExample);H=$.Safe(b.EditablePersonList);I=$.Safe(b.ContactFlow);J=$.Safe(b.MessageBoard);K=$.Safe(b.RoutedBobsleighSite);L=$.Safe(b.ObjectConstancy);M=$.Safe(b.MouseInfo);N=$.Safe(b.KeyboardInfo);O=$.Safe(b.Common);P=$.Safe(O.Fresh);Q=$.Safe($$.String);R=$.Safe($$.WebSharper.Strings);S=$.Safe($$.WebSharper.Arrays);T=$.Safe(b.Input);U=$.Safe(T.Keyboard);V=$.Safe(J.Auth);W=$.Safe($$.WebSharper.Concurrency);X=$.Safe(b.Server);Y=$.Safe(T.Mouse);Z=$.Safe($$.jQuery);_0=$.Safe(L.DataSet);_1=$.Safe($$.WebSharper.Slice);_2=$.Safe($$.Math);_3=$.Safe(G.Phone);_4=$.Safe($$.WebSharper.Operators);_5=$.Safe(G.Order);_6=$.Safe(b.RouteMap1);_7=$.Safe(s.Builder);_8=$.Safe(b.SiteCommon);_9=$.Safe(b.Router);_=$.Safe($$.WebSharper.Option);ba=$.Safe($$.WebSharper.Collections);bb=$.Safe(ba.MapModule);bc=$.Safe(ba.FSharpMap);bd=$.Safe(b.SortableBarChart);be=$.Safe($$.parseFloat);bf=$.Safe(b.ListModel);bg=$.Safe(F.Util);bh=$.Safe(F.TodoItem);bi=$.Safe(b.Key);bj=$.Safe(b.ListModel1);return bk=$.Safe(b.Client);});$.OnLoad(function(){F.Sample();bd.Width();bd.Spacing();bd.SimpleTransition();bd.Sample();bd.LoadData();bd.Height();bd.BarTransition();B.unitRouteMap();B.homePage();B.fadeTime();B.aboutPage();B.NavPages();B.NavExternalLinks();B.FadeTransition();B.Fade();B.Entries();C.Sample();X.threads();X.posts();X.DELAY();K.TheRouteMap();K.Sample();G.Sample();L.Width();L.SimpleTransition();L.Sample();L.InOutTransition();L.Height();M.Sample();J.Sample();N.keys();N.Sample();E.Sample();D.Sample();H.peopleList();H.peopleBoxes();H.memberList();H.Sample();I.personFlowlet();I.contactTypeFlowlet();I.Sample();P.i();bk.Main();y.Sample();y.People();x.initCalc();x.Sample();w.pages();w.Sample();t.swipeTime();t.personFlowlet();t.fadeTime();t.contactTypeFlowlet();t.SwipeTransition();t.Swipe();t.Sample();t.FadeTransition();t.Fade();e.pages();e.fadeTime();e.Sample();e.FadeTransition();e.Fade();return;});}());


if (typeof IntelliFactory !=='undefined')
  IntelliFactory.Runtime.Start();
